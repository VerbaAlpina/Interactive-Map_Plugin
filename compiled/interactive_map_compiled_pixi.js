var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function $$jscomp$arrayIteratorImpl$($array$$){var $index$$=0;return function(){return $index$$<$array$$.length?{done:!1,value:$array$$[$index$$++]}:{done:!0}}};$jscomp.arrayIterator=function $$jscomp$arrayIterator$($array$$){return{next:$jscomp.arrayIteratorImpl($array$$)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function($target$$,$property$$,$descriptor$$){if($target$$==Array.prototype||$target$$==Object.prototype)return $target$$;$target$$[$property$$]=$descriptor$$.value;return $target$$};
$jscomp.getGlobal=function $$jscomp$getGlobal$($passedInThis_possibleGlobals$$){$passedInThis_possibleGlobals$$=["object"==typeof globalThis&&globalThis,$passedInThis_possibleGlobals$$,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var $i$$=0;$i$$<$passedInThis_possibleGlobals$$.length;++$i$$){var $maybeGlobal$$=$passedInThis_possibleGlobals$$[$i$$];if($maybeGlobal$$&&$maybeGlobal$$.Math==Math)return $maybeGlobal$$}throw Error("Cannot find global object");
};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";
var $jscomp$lookupPolyfilledValue=function $$jscomp$lookupPolyfilledValue$($target$$,$key$$){var $polyfill_polyfilledKey$$=$jscomp.propertyToPolyfillSymbol[$key$$];if(null==$polyfill_polyfilledKey$$)return $target$$[$key$$];$polyfill_polyfilledKey$$=$target$$[$polyfill_polyfilledKey$$];return void 0!==$polyfill_polyfilledKey$$?$polyfill_polyfilledKey$$:$target$$[$key$$]};
$jscomp.polyfill=function $$jscomp$polyfill$($target$$,$polyfill$$,$fromLang$$,$toLang$$){$polyfill$$&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated($target$$,$polyfill$$,$fromLang$$,$toLang$$):$jscomp.polyfillUnisolated($target$$,$polyfill$$,$fromLang$$,$toLang$$))};
$jscomp.polyfillUnisolated=function $$jscomp$polyfillUnisolated$($property$jscomp$5_split_target$$,$impl_polyfill$$,$fromLang$jscomp$1_obj$$,$i$jscomp$9_orig_toLang$$){$fromLang$jscomp$1_obj$$=$jscomp.global;$property$jscomp$5_split_target$$=$property$jscomp$5_split_target$$.split(".");for($i$jscomp$9_orig_toLang$$=0;$i$jscomp$9_orig_toLang$$<$property$jscomp$5_split_target$$.length-1;$i$jscomp$9_orig_toLang$$++){var $key$$=$property$jscomp$5_split_target$$[$i$jscomp$9_orig_toLang$$];$key$$ in $fromLang$jscomp$1_obj$$||
($fromLang$jscomp$1_obj$$[$key$$]={});$fromLang$jscomp$1_obj$$=$fromLang$jscomp$1_obj$$[$key$$]}$property$jscomp$5_split_target$$=$property$jscomp$5_split_target$$[$property$jscomp$5_split_target$$.length-1];$i$jscomp$9_orig_toLang$$=$fromLang$jscomp$1_obj$$[$property$jscomp$5_split_target$$];$impl_polyfill$$=$impl_polyfill$$($i$jscomp$9_orig_toLang$$);$impl_polyfill$$!=$i$jscomp$9_orig_toLang$$&&null!=$impl_polyfill$$&&$jscomp.defineProperty($fromLang$jscomp$1_obj$$,$property$jscomp$5_split_target$$,
{configurable:!0,writable:!0,value:$impl_polyfill$$})};
$jscomp.polyfillIsolated=function $$jscomp$polyfillIsolated$($isNativeClass_target$$,$impl$jscomp$1_polyfill$$,$fromLang$$,$obj$jscomp$37_root$jscomp$3_toLang$$){var $property$jscomp$6_split$$=$isNativeClass_target$$.split(".");$isNativeClass_target$$=1===$property$jscomp$6_split$$.length;$obj$jscomp$37_root$jscomp$3_toLang$$=$property$jscomp$6_split$$[0];$obj$jscomp$37_root$jscomp$3_toLang$$=!$isNativeClass_target$$&&$obj$jscomp$37_root$jscomp$3_toLang$$ in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;
for(var $i$$=0;$i$$<$property$jscomp$6_split$$.length-1;$i$$++){var $key$$=$property$jscomp$6_split$$[$i$$];$key$$ in $obj$jscomp$37_root$jscomp$3_toLang$$||($obj$jscomp$37_root$jscomp$3_toLang$$[$key$$]={});$obj$jscomp$37_root$jscomp$3_toLang$$=$obj$jscomp$37_root$jscomp$3_toLang$$[$key$$]}$property$jscomp$6_split$$=$property$jscomp$6_split$$[$property$jscomp$6_split$$.length-1];$fromLang$$=$jscomp.IS_SYMBOL_NATIVE&&"es6"===$fromLang$$?$obj$jscomp$37_root$jscomp$3_toLang$$[$property$jscomp$6_split$$]:
null;$impl$jscomp$1_polyfill$$=$impl$jscomp$1_polyfill$$($fromLang$$);null!=$impl$jscomp$1_polyfill$$&&($isNativeClass_target$$?$jscomp.defineProperty($jscomp.polyfills,$property$jscomp$6_split$$,{configurable:!0,writable:!0,value:$impl$jscomp$1_polyfill$$}):$impl$jscomp$1_polyfill$$!==$fromLang$$&&($jscomp.propertyToPolyfillSymbol[$property$jscomp$6_split$$]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol($property$jscomp$6_split$$):$jscomp.POLYFILL_PREFIX+$property$jscomp$6_split$$,$property$jscomp$6_split$$=
$jscomp.propertyToPolyfillSymbol[$property$jscomp$6_split$$],$jscomp.defineProperty($obj$jscomp$37_root$jscomp$3_toLang$$,$property$jscomp$6_split$$,{configurable:!0,writable:!0,value:$impl$jscomp$1_polyfill$$})))};$jscomp.initSymbol=function $$jscomp$initSymbol$(){};
$jscomp.polyfill("Symbol",function($orig$$){if($orig$$)return $orig$$;var $SymbolClass$$=function $$SymbolClass$$$($id$$,$opt_description$$){this.$jscomp$symbol$id_=$id$$;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:$opt_description$$})};$SymbolClass$$.prototype.toString=function $$SymbolClass$$$$toString$(){return this.$jscomp$symbol$id_};var $counter$$=0,$symbolPolyfill$$=function $$symbolPolyfill$$$($opt_description$$){if(this instanceof $symbolPolyfill$$)throw new TypeError("Symbol is not a constructor");
return new $SymbolClass$$("jscomp_symbol_"+($opt_description$$||"")+"_"+$counter$$++,$opt_description$$)};return $symbolPolyfill$$},"es6","es3");$jscomp.initSymbolIterator=function $$jscomp$initSymbolIterator$(){};
$jscomp.polyfill("Symbol.iterator",function($orig$$){if($orig$$)return $orig$$;$orig$$=Symbol("Symbol.iterator");for(var $arrayLikes$$="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),$i$$=0;$i$$<$arrayLikes$$.length;$i$$++){var $ArrayLikeCtor$$=$jscomp.global[$arrayLikes$$[$i$$]];"function"===typeof $ArrayLikeCtor$$&&"function"!=typeof $ArrayLikeCtor$$.prototype[$orig$$]&&$jscomp.defineProperty($ArrayLikeCtor$$.prototype,
$orig$$,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return $orig$$},"es6","es3");$jscomp.initSymbolAsyncIterator=function $$jscomp$initSymbolAsyncIterator$(){};$jscomp.iteratorPrototype=function $$jscomp$iteratorPrototype$($iterator$$){$iterator$$={next:$iterator$$};$iterator$$[Symbol.iterator]=function $$iterator$$$Symbol$iterator$(){return this};return $iterator$$};
$jscomp.makeIterator=function $$jscomp$makeIterator$($iterable$$){var $iteratorFunction$$="undefined"!=typeof Symbol&&Symbol.iterator&&$iterable$$[Symbol.iterator];return $iteratorFunction$$?$iteratorFunction$$.call($iterable$$):$jscomp.arrayIterator($iterable$$)};$jscomp.underscoreProtoCanBeSet=function $$jscomp$underscoreProtoCanBeSet$(){var $x$$={a:!0},$y$$={};try{return $y$$.__proto__=$x$$,$y$$.a}catch($e$$){}return!1};
$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function($target$$,$proto$$){$target$$.__proto__=$proto$$;if($target$$.__proto__!==$proto$$)throw new TypeError($target$$+" is not extensible");return $target$$}:null;$jscomp.generator={};
$jscomp.generator.ensureIteratorResultIsObject_=function $$jscomp$generator$ensureIteratorResultIsObject_$($result$$){if(!($result$$ instanceof Object))throw new TypeError("Iterator result "+$result$$+" is not an object");};$jscomp.generator.Context=function $$jscomp$generator$Context$(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function $$jscomp$generator$Context$$start_$(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function $$jscomp$generator$Context$$stop_$(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function $$jscomp$generator$Context$$jumpToErrorHandler_$(){this.nextAddress=this.catchAddress_||this.finallyAddress_};
$jscomp.generator.Context.prototype.next_=function $$jscomp$generator$Context$$next_$($value$$){this.yieldResult=$value$$};$jscomp.generator.Context.prototype.throw_=function $$jscomp$generator$Context$$throw_$($e$$){this.abruptCompletion_={exception:$e$$,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype["return"]=function $$jscomp$generator$Context$$return$($value$$){this.abruptCompletion_={"return":$value$$};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function $$jscomp$generator$Context$$jumpThroughFinallyBlocks$($nextAddress$$){this.abruptCompletion_={jumpTo:$nextAddress$$};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function $$jscomp$generator$Context$$yield$($value$$,$resumeAddress$$){this.nextAddress=$resumeAddress$$;return{value:$value$$}};
$jscomp.generator.Context.prototype.yieldAll=function $$jscomp$generator$Context$$yieldAll$($iterable$$,$resumeAddress$$){var $iterator$$=$jscomp.makeIterator($iterable$$),$result$$=$iterator$$.next();$jscomp.generator.ensureIteratorResultIsObject_($result$$);if($result$$.done)this.yieldResult=$result$$.value,this.nextAddress=$resumeAddress$$;else return this.yieldAllIterator_=$iterator$$,this.yield($result$$.value,$resumeAddress$$)};
$jscomp.generator.Context.prototype.jumpTo=function $$jscomp$generator$Context$$jumpTo$($nextAddress$$){this.nextAddress=$nextAddress$$};$jscomp.generator.Context.prototype.jumpToEnd=function $$jscomp$generator$Context$$jumpToEnd$(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function $$jscomp$generator$Context$$setCatchFinallyBlocks$($catchAddress$$,$finallyAddress$$){this.catchAddress_=$catchAddress$$;void 0!=$finallyAddress$$&&(this.finallyAddress_=$finallyAddress$$)};
$jscomp.generator.Context.prototype.setFinallyBlock=function $$jscomp$generator$Context$$setFinallyBlock$($finallyAddress$$){this.catchAddress_=0;this.finallyAddress_=$finallyAddress$$||0};$jscomp.generator.Context.prototype.leaveTryBlock=function $$jscomp$generator$Context$$leaveTryBlock$($nextAddress$$,$catchAddress$$){this.nextAddress=$nextAddress$$;this.catchAddress_=$catchAddress$$||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function $$jscomp$generator$Context$$enterCatchBlock$($exception$$){this.catchAddress_=$exception$$||0;$exception$$=this.abruptCompletion_.exception;this.abruptCompletion_=null;return $exception$$};
$jscomp.generator.Context.prototype.enterFinallyBlock=function $$jscomp$generator$Context$$enterFinallyBlock$($nextCatchAddress$$,$nextFinallyAddress$$,$finallyDepth$$){$finallyDepth$$?this.finallyContexts_[$finallyDepth$$]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=$nextCatchAddress$$||0;this.finallyAddress_=$nextFinallyAddress$$||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function $$jscomp$generator$Context$$leaveFinallyBlock$($nextAddress$$,$finallyDepth$$){var $abruptCompletion_preservedContext$$=this.finallyContexts_.splice($finallyDepth$$||0)[0];if($abruptCompletion_preservedContext$$=this.abruptCompletion_=this.abruptCompletion_||$abruptCompletion_preservedContext$$){if($abruptCompletion_preservedContext$$.isException)return this.jumpToErrorHandler_();void 0!=$abruptCompletion_preservedContext$$.jumpTo&&this.finallyAddress_<
$abruptCompletion_preservedContext$$.jumpTo?(this.nextAddress=$abruptCompletion_preservedContext$$.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=$nextAddress$$};$jscomp.generator.Context.prototype.forIn=function $$jscomp$generator$Context$$forIn$($object$$){return new $jscomp.generator.Context.PropertyIterator($object$$)};
$jscomp.generator.Context.PropertyIterator=function $$jscomp$generator$Context$PropertyIterator$($object$$){this.object_=$object$$;this.properties_=[];for(var $property$$ in $object$$)this.properties_.push($property$$);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function $$jscomp$generator$Context$PropertyIterator$$getNext$(){for(;0<this.properties_.length;){var $property$$=this.properties_.pop();if($property$$ in this.object_)return $property$$}return null};
$jscomp.generator.Engine_=function $$jscomp$generator$Engine_$($program$$){this.context_=new $jscomp.generator.Context;this.program_=$program$$};$jscomp.generator.Engine_.prototype.next_=function $$jscomp$generator$Engine_$$next_$($value$$){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,$value$$,this.context_.next_);this.context_.next_($value$$);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function $$jscomp$generator$Engine_$$return_$($value$$){this.context_.start_();var $yieldAllIterator$$=this.context_.yieldAllIterator_;if($yieldAllIterator$$)return this.yieldAllStep_("return"in $yieldAllIterator$$?$yieldAllIterator$$["return"]:function($v$$){return{value:$v$$,done:!0}},$value$$,this.context_["return"]);this.context_["return"]($value$$);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function $$jscomp$generator$Engine_$$throw_$($exception$$){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],$exception$$,this.context_.next_);this.context_.throw_($exception$$);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function $$jscomp$generator$Engine_$$yieldAllStep_$($action$$,$value$$,$nextAction$$){try{var $result$$=$action$$.call(this.context_.yieldAllIterator_,$value$$);$jscomp.generator.ensureIteratorResultIsObject_($result$$);if(!$result$$.done)return this.context_.stop_(),$result$$;var $resultValue$$=$result$$.value}catch($e$$){return this.context_.yieldAllIterator_=null,this.context_.throw_($e$$),this.nextStep_()}this.context_.yieldAllIterator_=null;$nextAction$$.call(this.context_,
$resultValue$$);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function $$jscomp$generator$Engine_$$nextStep_$(){for(;this.context_.nextAddress;)try{var $abruptCompletion$$=this.program_(this.context_);if($abruptCompletion$$)return this.context_.stop_(),{value:$abruptCompletion$$.value,done:!1}}catch($e$$){this.context_.yieldResult=void 0,this.context_.throw_($e$$)}this.context_.stop_();if(this.context_.abruptCompletion_){$abruptCompletion$$=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if($abruptCompletion$$.isException)throw $abruptCompletion$$.exception;
return{value:$abruptCompletion$$["return"],done:!0}}return{value:void 0,done:!0}};$jscomp.generator.Generator_=function $$jscomp$generator$Generator_$($engine$$){this.next=function $this$next$($opt_value$$){return $engine$$.next_($opt_value$$)};this["throw"]=function $this$throw$($exception$$){return $engine$$.throw_($exception$$)};this["return"]=function $this$return$($value$$){return $engine$$.return_($value$$)};this[Symbol.iterator]=function $this$Symbol$iterator$(){return this}};
$jscomp.generator.createGenerator=function $$jscomp$generator$createGenerator$($generator$$,$program$$){var $result$$=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_($program$$));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf($result$$,$generator$$.prototype);return $result$$};
var ClustererOptions,MapSymbolPart,IMGeoType={Point:0,Polygon:1,MultiPolygon:2,LineString:3,MultiLineString:4},IMGeoData,infoWindoInfoOld,infoWindoInfoNew,MultiColorIndex,WaitingData,MapPosition,OverlayType={PointSymbol:0,Polygon:1,LineString:2},num_overlay_types=3,features_classes={main:0,sub:1,add:2},MapInterfaceType={GoogleMaps:0,PixiWebGL:1};var colorsPolygons=Array(15);colorsPolygons[0]=[251,128,114];colorsPolygons[1]=[179,222,105];colorsPolygons[2]=[128,177,211];colorsPolygons[3]=[255,237,111];colorsPolygons[4]=[190,186,218];colorsPolygons[5]=[141,211,199];colorsPolygons[6]=[253,180,98];colorsPolygons[7]=[188,128,189];colorsPolygons[8]=[255,255,179];colorsPolygons[9]=[252,205,229];colorsPolygons[10]=[217,217,217];colorsPolygons[11]=[204,235,197];colorsPolygons[12]=[0,0,0];colorsPolygons[13]=[192,192,192];
colorsPolygons[14]=[255,255,255];colorsPolygons[15]=[0,0,0];colorsPolygons[16]=[192,192,192];colorsPolygons[17]=[255,255,255];var colorsPoints=Array(26);colorsPoints[0]=[251,128,114];colorsPoints[1]=[179,222,105];colorsPoints[2]=[128,177,211];colorsPoints[3]=[255,237,111];colorsPoints[4]=[190,186,218];colorsPoints[5]=[141,211,199];colorsPoints[6]=[253,180,98];colorsPoints[7]=[188,128,189];colorsPoints[8]=[255,255,179];colorsPoints[9]=[252,205,229];colorsPoints[10]=[217,217,217];
colorsPoints[11]=[204,235,197];colorsPoints[12]=[166,206,227];colorsPoints[13]=[255,233,214];colorsPoints[14]=[178,223,138];colorsPoints[15]=[243,224,255];colorsPoints[16]=[249,175,174];colorsPoints[17]=[242,185,89];colorsPoints[18]=[252,176,213];colorsPoints[19]=[219,219,201];colorsPoints[20]=[173,184,237];colorsPoints[21]=[206,237,173];colorsPoints[22]=[255,255,153];colorsPoints[23]=[142,124,124];colorsPoints[24]=[205,229,244];colorsPoints[25]=[239,153,110];var colorsMarking=Array(19);
colorsMarking[0]=[227,26,28];colorsMarking[1]=[31,120,180];colorsMarking[2]=[51,160,44];colorsMarking[3]=[255,127,0];colorsMarking[4]=[106,61,154];colorsMarking[5]=[177,89,40];colorsMarking[6]=[255,255,153];colorsMarking[7]=[251,154,153];colorsMarking[8]=[166,206,227];colorsMarking[9]=[178,223,138];colorsMarking[10]=[253,191,111];colorsMarking[11]=[202,178,214];colorsMarking[12]=[255,0,0];colorsMarking[13]=[0,255,0];colorsMarking[14]=[0,0,255];colorsMarking[15]=[255,255,0];
colorsMarking[16]=[0,255,255];colorsMarking[17]=[0,0,0];colorsMarking[18]=[255,255,255];
var letters="A B C D E F G H I J K L M N O P Q R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s t u v w x y z 1 2 3 4 5 6 7 8 9 ~ * + # & ? ! $ @ % ^ : - | ( ) / \\ . < > [ ] aa ab ac ad ae af ag ah ai aj ak al an ao ap aq ar as at au av ax ay az a1 a2 a3 a4 a5 a6 a7 a8 a9 ba bb bc bd be bf bg bh bi bj bk bl bn bo bp bq br bs bt bu bv bx by bz b1 b2 b3 b4 b5 b6 b7 b8 b9 ca cb cc cd ce cf cg ch ci cj ck cl cn co cp cq cr cs ct cu cv cx cy cz c1 c2 c3 c4 c5 c6 c7 c8 c9 da db dc dd de df dg dh di dj dk dl dn do dp dq dr ds dt du dv dx dy dz d1 d2 d3 d4 d5 d6 d7 d8 d9 ea eb ec ed ee ef eg eh ei ej ek el en eo ep eq er es et eu ev ex ey ez e1 e2 e3 e4 e5 e6 e7 e8 e9 fa fb fc fd fe ff fg fh fi fj fk fl fn fo fp fq fr fs ft fu fv fx fy fz f1 f2 f3 f4 f5 f6 f7 f8 f9 ga gb gc gd ge gf gg gh gi gj gk gl gn go gp gq gr gs gt gu gv gx gy gz g1 g2 g3 g4 g5 g6 g7 g8 g9 ha hb hc hd he hf hg hh hi hj hk hl hn ho hp hq hr hs ht hu hv hx hy hz h1 h2 h3 h4 h5 h6 h7 h8 h9 ia ib ic id ie if ig ih ii ij ik il in io ip iq ir is it iu iv ix iy iz i1 i2 i3 i4 i5 i6 i7 i8 i9 ja jb jc jd je jf jg jh ji jj jk jl jn jo jp jq jr js jt ju jv jx jy jz j1 j2 j3 j4 j5 j6 j7 j8 j9 ka kb kc kd ke kf kg kh ki kj kk kl kn ko kp kq kr ks kt ku kv kx ky kz k1 k2 k3 k4 k5 k6 k7 k8 k9 la lb lc ld le lf lg lh li lj lk ll ln lo lp lq lr ls lt lu lv lx ly lz l1 l2 l3 l4 l5 l6 l7 l8 l9 na nb nc nd ne nf ng nh ni nj nk nl nn no np nq nr ns nt nu nv nx ny nz n1 n2 n3 n4 n5 n6 n7 n8 n9 oa ob oc od oe of og oh oi oj ok ol on oo op oq or os ot ou ov ox oy oz o1 o2 o3 o4 o5 o6 o7 o8 o9 pa pb pc pd pe pf pg ph pi pj pk pl pn po pp pq pr ps pt pu pv px py pz p1 p2 p3 p4 p5 p6 p7 p8 p9 qa qb qc qd qe qf qg qh qi qj qk ql qn qo qp qq qr qs qt qu qv qx qy qz q1 q2 q3 q4 q5 q6 q7 q8 q9 ra rb rc rd re rf rg rh ri rj rk rl rn ro rp rq rr rs rt ru rv rx ry rz r1 r2 r3 r4 r5 r6 r7 r8 r9 sa sb sc sd se sf sg sh si sj sk sl sn so sp sq sr ss st su sv sx sy sz s1 s2 s3 s4 s5 s6 s7 s8 s9 ta tb tc td te tf tg th ti tj tk tl tn to tp tq tr ts tt tu tv tx ty tz t1 t2 t3 t4 t5 t6 t7 t8 t9 ua ub uc ud ue uf ug uh ui uj uk ul un uo up uq ur us ut uu uv ux uy uz u1 u2 u3 u4 u5 u6 u7 u8 u9 va vb vc vd ve vf vg vh vi vj vk vl vn vo vp vq vr vs vt vu vv vx vy vz v1 v2 v3 v4 v5 v6 v7 v8 v9 xa xb xc xd xe xf xg xh xi xj xk xl xn xo xp xq xr xs xt xu xv xx xy xz x1 x2 x3 x4 x5 x6 x7 x8 x9 ya yb yc yd ye yf yg yh yi yj yk yl yn yo yp yq yr ys yt yu yv yx yy yz y1 y2 y3 y4 y5 y6 y7 y8 y9 za zb zc zd ze zf zg zh zi zj zk zl zn zo zp zq zr zs zt zu zv zx zy zz z1 z2 z3 z4 z5 z6 z7 z8 z9 1a 1b 1c 1d 1e 1f 1g 1h 1i 1j 1k 1l 1n 1o 1p 1q 1r 1s 1t 1u 1v 1x 1y 1z 11 12 13 14 15 16 17 18 19 2a 2b 2c 2d 2e 2f 2g 2h 2i 2j 2k 2l 2n 2o 2p 2q 2r 2s 2t 2u 2v 2x 2y 2z 21 22 23 24 25 26 27 28 29 3a 3b 3c 3d 3e 3f 3g 3h 3i 3j 3k 3l 3n 3o 3p 3q 3r 3s 3t 3u 3v 3x 3y 3z 31 32 33 34 35 36 37 38 39 4a 4b 4c 4d 4e 4f 4g 4h 4i 4j 4k 4l 4n 4o 4p 4q 4r 4s 4t 4u 4v 4x 4y 4z 41 42 43 44 45 46 47 48 49 5a 5b 5c 5d 5e 5f 5g 5h 5i 5j 5k 5l 5n 5o 5p 5q 5r 5s 5t 5u 5v 5x 5y 5z 51 52 53 54 55 56 57 58 59 6a 6b 6c 6d 6e 6f 6g 6h 6i 6j 6k 6l 6n 6o 6p 6q 6r 6s 6t 6u 6v 6x 6y 6z 61 62 63 64 65 66 67 68 69 7a 7b 7c 7d 7e 7f 7g 7h 7i 7j 7k 7l 7n 7o 7p 7q 7r 7s 7t 7u 7v 7x 7y 7z 71 72 73 74 75 76 77 78 79 8a 8b 8c 8d 8e 8f 8g 8h 8i 8j 8k 8l 8n 8o 8p 8q 8r 8s 8t 8u 8v 8x 8y 8z 81 82 83 84 85 86 87 88 89 9a 9b 9c 9d 9e 9f 9g 9h 9i 9j 9k 9l 9n 9o 9p 9q 9r 9s 9t 9u 9v 9x 9y 9z 91 92 93 94 95 96 97 98 99".split(" "),shapes=
"circle rect hex_flat hex_pointy house house_i rectcutoffbr rectcutofftr rectcutofftl rectcutoffbl rhomb triangle triangle_i".split(" "),symbolSize=18,markingSize=3;
function markingScaleFunction($symbolInfo$$){switch($symbolInfo$$.shape){case "triangle":return 2;case "triangle_i":return 2;case "hex_flat":return 1.3;case "hex_pointy":return 1.3;case "rhomb":return 1.7;case "house":return 1.3;case "house_i":return 1.3;case "rectcutoffbr":return 1.3;case "rectcutofftr":return 1.3;case "rectcutofftl":return 1.3;case "rectcutoffbl":return 1.3}return 1}
var showSliders=!1,colorScheme=new ColorScheme([new Feature("shape",shapes)],[new Feature("color",colorsPoints,!1,26),new Feature("letter",letters)],[new Feature("mcolor",colorsMarking)],colorsPolygons),multiSymbolTableSize=40,minimumSymbolEnlargement=34,decSymbolEnlargement=100,chosenSettings={allow_single_deselect:!0},polygonSettings=function $polygonSettings$($fillColor$$,$highlighted$$){var $hex$$="phy"!==optionManager.getOptionState("polymode");return{strokeWeight:$hex$$?$highlighted$$?4:2:$highlighted$$?
2:1,strokeColor:$hex$$?"GhostWhite":$fillColor$$,fillOpacity:$hex$$?1:$highlighted$$?.75:.55}},polygonSettingsBoth=function $polygonSettingsBoth$($fillColor$$){var $hex$$="phy"!==optionManager.getOptionState("polymode");return{fill_alpha:$hex$$?1:.55,stroke_color:$hex$$?"0xf8f8ff":$fillColor$$,hover_fill_alpha:$hex$$?1:.75,hover_stroke_color:$hex$$?"0xf8f8ff":$fillColor$$}},symbolRescaleFactor=2;var mapInterfaceType;switch(PATH.mapType){case "gm":mapInterfaceType=MapInterfaceType.GoogleMaps;break;case "pixi":mapInterfaceType=MapInterfaceType.PixiWebGL;break;default:throw"Invalid map type: "+PATH.mapType;}var mapInterface,mapDomElement,legend,symbolManager,commentManager,optionManager,symbolClusterer,categoryManager=new CategoryManager,geoManager,mapState,style_for_hex_quantify={};
function initMap($mapPosition$$,$clustererOptions$$,$constructorOptions$$){$clustererOptions$$||($clustererOptions$$={viewportLat:$mapPosition$$.lat+4,viewportLng:$mapPosition$$.lng-8,viewportHeight:8,viewportWidth:16,gridsizeLng:16,gridsizeLat:16,threshold:.001});$constructorOptions$$||($constructorOptions$$={});switch(mapInterfaceType){case MapInterfaceType.GoogleMaps:mapInterface=new GoogleMapsInterface($mapPosition$$,$constructorOptions$$);break;case MapInterfaceType.PixiWebGL:mapInterface=new PixiWebGLInterface($mapPosition$$,
$constructorOptions$$)}commentManager=new CommentManager;mapState=new MapState;geoManager=new GeoManager;mapDomElement=document.getElementById("IM_map_div");PATH.layer&&(mapState.currentMapLayer=1*PATH.layer);mapInterface.init(mapDomElement,initCallback.bind(this,$clustererOptions$$),polygonSettings,mapState.currentMapLayer)}
function initCallback($catNum_clustererOptions$$){mapInterface.addMarkerListeners(function($iconIndex$$){this.openInfoWindow($iconIndex$$)},function(){1<this.getNumParts()&&this.openSplitMultiSymbol()},function($oldLat$$,$oldLng$$){optionManager.addChange(new MarkerDragOperation(this,$oldLat$$,$oldLng$$))},function($iconIndex$$){},function(){});mapInterface.addShapeListeners(function($lat$$,$lng$$){this.openInfoWindow($lat$$,$lng$$)});mapInterface.addInfoWindowListeners(function($tabElement$$,$tabIndex$$,
$mapElement$$,$infoWindow$$,$overlay$$){if($mapElement$$ instanceof MapSymbol){$mapElement$$.currentTabIndex=$tabIndex$$;for(var $infoWindowContents$$=$mapElement$$.parts[$tabIndex$$].infoWindows,$i$1$$=0;$i$1$$<$infoWindowContents$$.length;$i$1$$++)$infoWindowContents$$[$i$1$$].onOpen($tabElement$$,$tabIndex$$,$infoWindow$$,$overlay$$);$mapElement$$.parts[$tabIndex$$].owner.highlight()}else $mapElement$$.infoWindowContent.onOpen($tabElement$$,$tabIndex$$,$infoWindow$$,$overlay$$)},function($tabElement$$,
$tabIndex$$,$mapElement$$){if(void 0!==$tabIndex$$&&$mapElement$$ instanceof MapSymbol){for(var $infoWindowContents$$=$mapElement$$.parts[$tabIndex$$].infoWindows,$i$2$$=0;$i$2$$<$infoWindowContents$$.length;$i$2$$++)$infoWindowContents$$[$i$2$$].onClose($tabElement$$);$mapElement$$.parts[$tabIndex$$].owner.unhighlight()}},function($windowElement$$,$mapElement$$){mapState.removeInfoWindowOwnerFromList($mapElement$$)},function($id$$,$content$$){jQuery(document).trigger("im_location_window_opened",
[$id$$,$content$$])},function($id$$,$content$$){mapState.removeLocationMarker($id$$);jQuery(document).trigger("im_location_window_closed",[$id$$,$content$$])});mapInterface.addMapListeners(function($newLayerIndex$$){mapState.currentMapLayer=$newLayerIndex$$;var $state$$={layer:$newLayerIndex$$};history.pushState($state$$,"",addParamToUrl(window.location.href,"layer",$newLayerIndex$$+""));jQuery(document).trigger("im_url_changed",$state$$)});legend=new Legend;symbolManager=new SymbolManager(colorScheme);
symbolClusterer=new SymbolClusterer($catNum_clustererOptions$$);optionManager=new OptionManager;for(var $option$$ in PATH.options)optionManager.setOption($option$$,PATH.options[$option$$]);optionManager.createOptionsDiv();initGuiElements();jQuery.contextMenu({selector:".addComment",build:function($trigger$$,$e$$){var $itemList$$=legend.getMenuItems(1*$trigger$$.attr("data-index"),1*$trigger$$.attr("data-main-index"));return jQuery.isEmptyObject($itemList$$)?!1:{items:$itemList$$,callback:legend.menuCallback}}});
jQuery("#commentTabs").tabs({beforeActivate:commentManager.beforeTabChange.bind(commentManager)});jQuery(document).trigger("im_map_initialized");void 0!=PATH.tk?categoryManager.loadSynopticMap(1*PATH.tk,"URL"):void 0!=PATH.single&&($catNum_clustererOptions$$=categoryManager.getCategoryFromPrefix(PATH.single[0]),-1!=$catNum_clustererOptions$$&&categoryManager.loadData($catNum_clustererOptions$$,PATH.single,"custom"))};function Legend(){function $storeRemovedElement$$($filterData$$,$key$$){var $result$$=jQuery.extend({},$filterData$$),$removedElements$$=$result$$.removed;void 0==$removedElements$$&&($removedElements$$=$result$$.removed=[]);$removedElements$$.push($key$$);return $result$$}function $legendRow$$($delete_symbol_elements$$,$index$$,$table$$,$col_i$jscomp$21_mainIndex$$){var $element$$=$delete_symbol_elements$$[$index$$];$delete_symbol_elements$$=!$element$$.loading&&!optionManager.inEditMode();var $row$$=
document.createElement("tr");$element$$.htmlElement=jQuery($row$$);$row$$.className=$element$$ instanceof MultiLegendElement?"im_parent_legend_element addComment":null==$element$$.parent?"im_single_legend_element addComment":"im_child_legend_element addComment";$element$$ instanceof MultiLegendElement?$row$$.addEventListener("click",function($event$$){var $scrollpos$$=parseInt(jQuery(".legendtable tbody").scrollTop(),10),$rowpos$$=jQuery($row$$).position().top-115;legend.scrollPosTop=$scrollpos$$+
$rowpos$$;($event$$.target||$event$$.srcElement)instanceof HTMLInputElement||($element$$.childrenInLegend=!$element$$.childrenInLegend,legend.update())}):0<$element$$.openInfoWindowsNumber&&($row$$.className+=" focused");$row$$.tabIndex=-1;$row$$.dataset.index=$index$$;null!=$col_i$jscomp$21_mainIndex$$&&($row$$.dataset.mainIndex=$col_i$jscomp$21_mainIndex$$);$col_i$jscomp$21_mainIndex$$=document.createElement("td");if($element$$ instanceof MultiLegendElement){$col_i$jscomp$21_mainIndex$$.className=
"collapseSymbol";var $builder_cb_exportIcon_forbidRemoving_img$$=document.createElement("span");if($element$$.childrenInLegend){var $dot_expParent_minus_numSub_plus_qButtonParent$$=document.createElement("i");$dot_expParent_minus_numSub_plus_qButtonParent$$.className="fa fa-caret-down collapsesymbol_icon";$builder_cb_exportIcon_forbidRemoving_img$$.appendChild($dot_expParent_minus_numSub_plus_qButtonParent$$)}else $dot_expParent_minus_numSub_plus_qButtonParent$$=document.createElement("i"),$dot_expParent_minus_numSub_plus_qButtonParent$$.className=
"fa fa-caret-right collapsesymbol_icon",$builder_cb_exportIcon_forbidRemoving_img$$.appendChild($dot_expParent_minus_numSub_plus_qButtonParent$$);$col_i$jscomp$21_mainIndex$$.appendChild($builder_cb_exportIcon_forbidRemoving_img$$)}else $element$$.overlayType!=OverlayType.PointSymbol||symbolClusterer.checkQuantify()||($builder_cb_exportIcon_forbidRemoving_img$$=document.createElement("span"),$dot_expParent_minus_numSub_plus_qButtonParent$$=document.createElement("i"),$dot_expParent_minus_numSub_plus_qButtonParent$$.className=
"fa fa-circle activate_symbol_icon",$builder_cb_exportIcon_forbidRemoving_img$$.appendChild($dot_expParent_minus_numSub_plus_qButtonParent$$),$col_i$jscomp$21_mainIndex$$.appendChild($builder_cb_exportIcon_forbidRemoving_img$$),$row$$.className+=" toggle",$element$$.active&&($dot_expParent_minus_numSub_plus_qButtonParent$$.className+=" active"),$row$$.addEventListener("click",function(){var $active$jscomp$1_scrollpos$$=parseInt(jQuery(".legendtable tbody").scrollTop(),10);legend.scrollPosTop=$active$jscomp$1_scrollpos$$;
$active$jscomp$1_scrollpos$$=!this.active;this.setActive($active$jscomp$1_scrollpos$$);this.active&&!this.visible()&&this.visible(!0,!1);$active$jscomp$1_scrollpos$$&&1==legend.numActive||!$active$jscomp$1_scrollpos$$&&0==legend.numActive?symbolClusterer.repaintPointSymbols():symbolClusterer.repaintPointSymbols(this);legend.update();mapInterface.repaint(!0)}.bind($element$$)));$row$$.appendChild($col_i$jscomp$21_mainIndex$$);$col_i$jscomp$21_mainIndex$$=document.createElement("td");if($element$$.loading||
$element$$.symbolStandard)$builder_cb_exportIcon_forbidRemoving_img$$=document.createElement("img"),$element$$.loading?$builder_cb_exportIcon_forbidRemoving_img$$.src=PATH.Loading:($builder_cb_exportIcon_forbidRemoving_img$$.src=!$element$$.active&&$element$$.overlayType==OverlayType.PointSymbol&&0<legend.numActive?$element$$.symbolInactive.toDataURL():$element$$.symbolStandard.toDataURL(),$builder_cb_exportIcon_forbidRemoving_img$$.style.width=symbolSize+" px",$builder_cb_exportIcon_forbidRemoving_img$$.style.height=
symbolSize+"px"),$col_i$jscomp$21_mainIndex$$.appendChild($builder_cb_exportIcon_forbidRemoving_img$$);$row$$.appendChild($col_i$jscomp$21_mainIndex$$);$col_i$jscomp$21_mainIndex$$=document.createElement("td");$appendTextPart$$($col_i$jscomp$21_mainIndex$$,$element$$);$row$$.appendChild($col_i$jscomp$21_mainIndex$$);$col_i$jscomp$21_mainIndex$$=document.createElement("td");if($delete_symbol_elements$$&&$element$$.isQuantifiably()){$builder_cb_exportIcon_forbidRemoving_img$$=document.createElement("div");
$dot_expParent_minus_numSub_plus_qButtonParent$$=document.createElement("div");document.createElement("div");var $j$$=document.createElement("i"),$qButtonIcon2$$=document.createElement("i"),$qButtonIcon3$$=document.createElement("img"),$qIconSpan$$=document.createElement("span");$qButtonIcon3$$.src=PATH.quantify;$j$$.className=$element$$.quantify?"far fa-check-circle qcheck q-stack1 greensymbol fa-stack-1x":"far fa-times-circle qcheck q-stack1 fa-stack-1x";$element$$.loading_quantify&&($j$$.className=
"qcheck q-stack1 fa-stack-1x fa fa-cog fa-spin");$qButtonIcon2$$.className="fa fa-circle qcheck q-stack fa-stack-1x";$qIconSpan$$.className="q-span fa-stack";$builder_cb_exportIcon_forbidRemoving_img$$.title="Quantify";$builder_cb_exportIcon_forbidRemoving_img$$.style.vertical_align="middle";$builder_cb_exportIcon_forbidRemoving_img$$.style.opacity="0.6";$builder_cb_exportIcon_forbidRemoving_img$$.className="quantifyButton";$builder_cb_exportIcon_forbidRemoving_img$$.id="qbutton_"+$element$$.key;
$dot_expParent_minus_numSub_plus_qButtonParent$$.className="qButtonParent";jQuery($builder_cb_exportIcon_forbidRemoving_img$$).on("click",function($event$$){$event$$.stopPropagation();$event$$.preventDefault()});if(!$element$$.loading_quantify)jQuery($builder_cb_exportIcon_forbidRemoving_img$$).one("click",function($event$$){var $scrollpos$$=parseInt(jQuery(".legendtable tbody").scrollTop(),10);legend.scrollPosTop=$scrollpos$$;legend.deactivateAll();symbolClusterer.repaintPointSymbols();$hideAllOtherPolygonGrps$$($element$$);
$element$$.visible()||$element$$.visible(!0,!1);$event$$.stopPropagation();$event$$.preventDefault();if(0==jQuery("#IM_legend").find(".fa-cog").length&&$element$$.visible()&&!$element$$.loading_quantify){var $checkQuant$$=symbolClusterer.checkQuantify();$element$$.loading_quantify=!0;legend.update();setTimeout(function(){symbolClusterer.quantify($element$$,!1,function(){setTimeout(function(){$element$$.loading_quantify=!1;legend.update();$checkQuant$$&&$checkQuant$$!=$element$$||symbolClusterer.toggleQuantifyMode()},
100)})},200)}});$builder_cb_exportIcon_forbidRemoving_img$$.appendChild($qButtonIcon3$$);$dot_expParent_minus_numSub_plus_qButtonParent$$.appendChild($builder_cb_exportIcon_forbidRemoving_img$$);$builder_cb_exportIcon_forbidRemoving_img$$.appendChild($qIconSpan$$);$qIconSpan$$.appendChild($j$$);$qIconSpan$$.appendChild($qButtonIcon2$$);$col_i$jscomp$21_mainIndex$$.appendChild($dot_expParent_minus_numSub_plus_qButtonParent$$)}$builder_cb_exportIcon_forbidRemoving_img$$=categoryManager.getListBuilder($element$$.category);
!$element$$.loading&&$builder_cb_exportIcon_forbidRemoving_img$$&&($element$$ instanceof MultiLegendElement||$element$$ instanceof LegendElement&&null==$element$$.parent)&&!$element$$.isQuantifiably()&&($builder_cb_exportIcon_forbidRemoving_img$$=document.createElement("i"),$dot_expParent_minus_numSub_plus_qButtonParent$$=document.createElement("div"),$builder_cb_exportIcon_forbidRemoving_img$$.className="list_export_icon fas fa-file-download",$dot_expParent_minus_numSub_plus_qButtonParent$$.appendChild($builder_cb_exportIcon_forbidRemoving_img$$),
$dot_expParent_minus_numSub_plus_qButtonParent$$.className="list_export_icon_parent",$col_i$jscomp$21_mainIndex$$.appendChild($dot_expParent_minus_numSub_plus_qButtonParent$$),jQuery($builder_cb_exportIcon_forbidRemoving_img$$).on("click",function($builder$jscomp$1_event$$){$builder$jscomp$1_event$$.stopPropagation();$builder$jscomp$1_event$$.preventDefault();jQuery(".select_export_popup").modal();$builder$jscomp$1_event$$=categoryManager.getListBuilder($element$$.category);var $manager$$=new ListManager($builder$jscomp$1_event$$,
$element$$);jQuery(".select_export_popup").one("shown.bs.modal",function(){jQuery(".select_export_popup #export_json").off().one("click",function(){$manager$$.showResult(0);jQuery(".select_export_popup").modal("hide")});jQuery(".select_export_popup #export_csv").off().one("click",function(){$manager$$.showResult(2);jQuery(".select_export_popup").modal("hide")});jQuery(".select_export_popup #export_list").off().one("click",function(){$manager$$.showResult(1);jQuery(".select_export_popup").modal("hide")})})}));
$row$$.appendChild($col_i$jscomp$21_mainIndex$$);$col_i$jscomp$21_mainIndex$$=document.createElement("td");if($delete_symbol_elements$$){$builder_cb_exportIcon_forbidRemoving_img$$=document.createElement("input");if($element$$.quantify&&$element$$.isQuantifiably()||$element$$.loading_quantify)$builder_cb_exportIcon_forbidRemoving_img$$.disabled="disabled";if(symbolClusterer.checkQuantify())if($element$$ instanceof MultiLegendElement)for($dot_expParent_minus_numSub_plus_qButtonParent$$=$element$$.getNumSubElements(),
$j$$=0;$j$$<$dot_expParent_minus_numSub_plus_qButtonParent$$;$j$$++)$element$$.getSubElement($j$$).overlayType==OverlayType.Polygon&&($builder_cb_exportIcon_forbidRemoving_img$$.disabled="disabled");else $element$$.overlayType==OverlayType.Polygon&&($builder_cb_exportIcon_forbidRemoving_img$$.disabled="disabled");$builder_cb_exportIcon_forbidRemoving_img$$.type="checkbox";$builder_cb_exportIcon_forbidRemoving_img$$.className="legend_checkbox";$builder_cb_exportIcon_forbidRemoving_img$$.addEventListener("click",
function($event$$){var $scrollpos$$=parseInt(jQuery(".legendtable tbody").scrollTop(),10);legend.scrollPosTop=$scrollpos$$;$element$$.visible(this.checked,!0);symbolClusterer.checkQuantify()&&$element$$.containsPointSymbols()&&symbolClusterer.reQuantify();$event$$.stopPropagation()});$builder_cb_exportIcon_forbidRemoving_img$$.checked=$element$$.visible();$col_i$jscomp$21_mainIndex$$.appendChild($builder_cb_exportIcon_forbidRemoving_img$$)}$row$$.appendChild($col_i$jscomp$21_mainIndex$$);$col_i$jscomp$21_mainIndex$$=
document.createElement("td");$builder_cb_exportIcon_forbidRemoving_img$$=$element$$ instanceof LegendElement&&null!=$element$$.parent?categoryManager.forbidRemoving($element$$.parent.category,$element$$.key):categoryManager.forbidRemoving($element$$.category,$element$$.key);$delete_symbol_elements$$&&!$builder_cb_exportIcon_forbidRemoving_img$$&&($delete_symbol_elements$$=document.createElement("i"),$delete_symbol_elements$$.className="fa fa-times delete_symbol",$delete_symbol_elements$$.addEventListener("click",
function($event$$){var $needs_repaint_scrollpos$$=parseInt(jQuery(".legendtable tbody").scrollTop(),10);legend.scrollPosTop=$needs_repaint_scrollpos$$;$needs_repaint_scrollpos$$=!1;if($element$$ instanceof MultiLegendElement&&$element$$.containsPointSymbols())for(var $len$$=$element$$.subElements.length,$i$$=0;$i$$<$len$$;$i$$++)$element$$.subElements[$i$$].active&&($element$$.subElements[$i$$].setActive(!1),$needs_repaint_scrollpos$$=!0);else $element$$.active&&($element$$.setActive(!1),$needs_repaint_scrollpos$$=
!0);if($needs_repaint_scrollpos$$)for($i$$=0;$i$$<legend.elements.length;$i$$++)legend.elements[$i$$].repaintSymbols();legend.removeElement($element$$,!0);history.pushState({content:legend.getCompleteExport(!0)},"");0==legend.elements.length&&(jQuery("#legend_heading").parent().removeClass("keep_shadow").removeClass("active").find(".fa-caret-down").removeClass("fa-caret-down").addClass("fa-caret-right"),jQuery("#legend_heading").parent().find(".menu_collapse").hide(),jQuery("#legend_heading").addClass("l_disabled"));
$event$$.stopPropagation()}),$col_i$jscomp$21_mainIndex$$.appendChild($delete_symbol_elements$$));$row$$.appendChild($col_i$jscomp$21_mainIndex$$);$table$$.appendChild($row$$);jQuery(document).trigger("im_legend_element_created",$element$$,$row$$);if($element$$ instanceof MultiLegendElement)for($delete_symbol_elements$$=$element$$.subElements.length,$col_i$jscomp$21_mainIndex$$=0;$col_i$jscomp$21_mainIndex$$<$delete_symbol_elements$$;$col_i$jscomp$21_mainIndex$$++)if($element$$.childrenInLegend)$legendRow$$($element$$.subElements,
$col_i$jscomp$21_mainIndex$$,$table$$,$index$$);else if(0<$element$$.subElements[$col_i$jscomp$21_mainIndex$$].openInfoWindowsNumber){$row$$.className+=" focused";break}}function $hideAllOtherPolygonGrps$$($element$$){for(var $i$$=0;$i$$<legend.getLength();$i$$++){var $element_l$$=legend.getElement($i$$);if($element$$!==$element_l$$){var $numSub$jscomp$1_type$$=$element_l$$.overlayType;if($element_l$$ instanceof MultiLegendElement){$numSub$jscomp$1_type$$=$element_l$$.getNumSubElements();for(var $j$$=
0;$j$$<$numSub$jscomp$1_type$$;$j$$++)$element_l$$.getSubElement($j$$).overlayType==OverlayType.Polygon&&$element_l$$.visible(!1,!0)}else $numSub$jscomp$1_type$$==OverlayType.Polygon&&$element_l$$.visible(!1,!0)}}}function $appendTextPart$$($col$$,$element$$){var $keys_numRecords_values$$=$element$$.key.split("+"),$divElement_tagName$$=document.createElement("div");$divElement_tagName$$.className="l_span_container";for(var $i$$=0;$i$$<$keys_numRecords_values$$.length;$i$$++){var $commentTranslations_img$$=
commentManager.getComment($keys_numRecords_values$$[$i$$]),$mimg_spanStart_tagNameElement$$=document.createElement("span"),$spanMiddle$$=document.createElement("span");if(-1==$element$$.key)$mimg_spanStart_tagNameElement$$.appendChild(document.createTextNode(categoryManager.getEmptyCategoryName($element$$.category)));else{var $catName_elementName$$=-3==$element$$.category?categoryManager.getTagTranslation($element$$.parent.filterData.selectedTag):$element$$.parent?categoryManager.getCategoryNameForSubLegendEntry($element$$.category,
$element$$.parent.filterData,!0):categoryManager.getCategoryName($element$$.category,!0);$mimg_spanStart_tagNameElement$$.appendChild(document.createTextNode((0<$i$$?" + ":"")+$catName_elementName$$+" "));$catName_elementName$$=-1==$element$$.category?categoryManager.getAllDistinctElementName($keys_numRecords_values$$[$i$$],$element$$.parent.key):-3==$element$$.category?categoryManager.getTagTranslation($keys_numRecords_values$$[$i$$].substring(1)):categoryManager.getElementName($element$$.category,
$keys_numRecords_values$$[$i$$]);$spanMiddle$$.style["font-weight"]="bold";$spanMiddle$$.appendChild(document.createTextNode($catName_elementName$$+" "))}$divElement_tagName$$.appendChild($mimg_spanStart_tagNameElement$$);$divElement_tagName$$.appendChild($spanMiddle$$);void 0!==$commentTranslations_img$$&&($commentTranslations_img$$=document.createElement("img"),$commentTranslations_img$$.style.vertical_align="middle",$commentTranslations_img$$.src=PATH.Info,$commentTranslations_img$$.addEventListener("click",
function($keyE$$,$event$$){commentManager.openCommentWindow($element$$.category,$keyE$$,!1);$event$$.stopPropagation()}.bind(this,$keys_numRecords_values$$[$i$$])),$divElement_tagName$$.appendChild($commentTranslations_img$$))}$element$$ instanceof LegendElement&&($keys_numRecords_values$$=$element$$.getNumOverlays(),$divElement_tagName$$.appendChild(document.createTextNode(categoryManager.getCountString($element$$.category,$keys_numRecords_values$$))));$col$$.appendChild($divElement_tagName$$);if(void 0!==
$element$$.filterData&&void 0!==$element$$.filterData.markings){$divElement_tagName$$=$element$$.filterData.markings.tagName;$keys_numRecords_values$$=$element$$.filterData.markings.tagValues;$i$$=document.createElement("div");$i$$.className="mark_parent";for(var $key$$ in $keys_numRecords_values$$)$commentTranslations_img$$=document.createElement("div"),$commentTranslations_img$$.className="mark_item",$i$$.appendChild($commentTranslations_img$$),$mimg_spanStart_tagNameElement$$=document.createElement("img"),
$mimg_spanStart_tagNameElement$$.style.verticalAlign="middle",$mimg_spanStart_tagNameElement$$.style.width="23px",$mimg_spanStart_tagNameElement$$.src=symbolManager.createSymbolURLForMarking($element$$ instanceof LegendElement?$element$$.colorIndex[0]:$element$$.mainColorIndex,$keys_numRecords_values$$[$key$$]).toDataURL(),$commentTranslations_img$$.appendChild($mimg_spanStart_tagNameElement$$),$commentTranslations_img$$.appendChild(document.createTextNode(" = ")),$mimg_spanStart_tagNameElement$$=
document.createElement("span"),$mimg_spanStart_tagNameElement$$.appendChild(document.createTextNode($divElement_tagName$$+" ")),$mimg_spanStart_tagNameElement$$.style["font-weight"]="bold",$commentTranslations_img$$.appendChild($mimg_spanStart_tagNameElement$$),$commentTranslations_img$$.appendChild(document.createTextNode($key$$));$col$$.appendChild($i$$)}}function $createMenuPoint$$($name$$){return{name:$name$$,icon:"edit"}}this.elements=[];this.numActive=this.numLoading=0;this.globalZindex=2;this.scrollPosTop=
0;this.getLength=function $this$getLength$(){return this.elements.length};this.getElement=function $this$getElement$($index$$){return this.elements[$index$$]};this.addElement=function $this$addElement$($element$$,$fixedIndex$$){if(void 0!==$fixedIndex$$){$element$$.setIndex($fixedIndex$$);this.elements.splice($fixedIndex$$,0,$element$$);for(var $i$$=$fixedIndex$$+1;$i$$<this.elements.length;$i$$++)this.elements[$i$$].setIndex($i$$)}else $element$$.setIndex(this.elements.length),this.elements.push($element$$)};
this.getMainElement=function $this$getMainElement$($category$$,$key$$){for(var $i$$=0;$i$$<this.elements.length;$i$$++){var $e$$=this.elements[$i$$];if($e$$.category==$category$$&&$e$$.key==$key$$)return $e$$}return null};this.getElements=function $this$getElements$($category$$,$key$$){for(var $results$$=[],$i$$=0;$i$$<legend.elements.length;$i$$++){var $currentElement$$=legend.elements[$i$$];$currentElement$$.category==$category$$&&$currentElement$$.key==$key$$&&$results$$.push($currentElement$$);
if($currentElement$$ instanceof MultiLegendElement)for(var $j$$=0;$j$$<$currentElement$$.subElements.length;$j$$++){var $currentSubElement$$=$currentElement$$.subElements[$j$$];$currentSubElement$$.category==$category$$&&$currentSubElement$$.key==$key$$&&$results$$.push($currentSubElement$$)}}return $results$$};this.unhighlightAll=function $this$unhighlightAll$(){jQuery(".focused").removeClass("focused")};this.removeElementsByCategory=function $this$removeElementsByCategory$($category$$){for(var $i$$=
0;$i$$<this.elements.length;$i$$++){var $currentElement$$=this.elements[$i$$];if($currentElement$$ instanceof LegendElement)$currentElement$$.category==$category$$&&this.removeElement($currentElement$$,!0);else for(var $j$$=0;$j$$<$currentElement$$.subElements.length;$j$$++)if($currentElement$$.category==$category$$){this.removeElement($currentElement$$,!0);break}}};this.update=function $this$update$(){jQuery(document).trigger("im_legend_before_rebuild",this);var $j$$=document.createElement("div"),
$table$$=document.createElement("table"),$tablebody$$=document.createElement("tbody");$table$$.appendChild($tablebody$$);if(0!=this.elements.length){$table$$.className="legendtable";for(var $i$$=0;$i$$<this.elements.length;$i$$++){var $element$$=this.elements[$i$$];null!=$element$$&&(optionManager.inEditMode()&&!$element$$.editable?$element$$.visible(!1):$legendRow$$(this.elements,$i$$,$tablebody$$))}}$j$$.className="legendtablecontainer";$j$$.appendChild($table$$);jQuery("#IM_legend").html($j$$);
jQuery(document).trigger("im_legend_after_update",this);for($j$$=0;$j$$<mapState.getInfoWindowCount();$j$$++)mapState.getInfoWindowOwner($j$$).updateInfoWindow();0!=this.scrollPosTop&&jQuery(".legendtable tbody").scrollTop(this.scrollPosTop)};this.removeElement=function $this$removeElement$($element$$,$deleteFromArray$$){var $qelement$$=symbolClusterer.checkQuantify();$qelement$$==$element$$&&(symbolClusterer.displayMarkers(!0),symbolClusterer.toggleQuantifyMode(),$qelement$$=null);if($element$$ instanceof
MultiLegendElement)for(var $i$$=0;$i$$<$element$$.subElements.length;$i$$++)this.removeElement($element$$.subElements[$i$$],!1);else symbolClusterer.removeOverlays($element$$),$element$$.unblockColorIndexes(),null!=$element$$.parent&&($element$$.parent.filterData=$storeRemovedElement$$($element$$.parent.filterData,$element$$.key),$element$$.visible()&&$element$$.parent.subElementsVisible--);commentManager.removeComment($element$$.key);if($deleteFromArray$$){var $finished$$=!1;for($i$$=0;$i$$<this.elements.length;$i$$++){var $currentElement$$=
this.elements[$i$$];if($element$$==$currentElement$$){for(this.elements.splice($i$$,1);$i$$<this.elements.length;$i$$++)this.elements[$i$$].setIndex($i$$);break}else if($currentElement$$ instanceof MultiLegendElement){for(var $j$$=0;$j$$<$currentElement$$.subElements.length;$j$$++)if($element$$==$currentElement$$.subElements[$j$$]){$currentElement$$.subElements.splice($j$$,1);0==$currentElement$$.subElements.length&&this.removeElement($currentElement$$,!0);$finished$$=!0;break}if($finished$$)break}}this.update();
$qelement$$&&symbolClusterer.reQuantify()}($deleteFromArray$$||$element$$ instanceof MultiLegendElement)&&mapInterface.repaint(!0)};this.removeAll=function $this$removeAll$(){for(var $length$$=this.elements.length,$i$$=0;$i$$<$length$$;$i$$++)this.removeElement(this.elements[0],!0)};this.deactivateAll=function $this$deactivateAll$(){for(var $$jscomp$iter$0$$=$jscomp.makeIterator(this),$$jscomp$key$le$$=$$jscomp$iter$0$$.next();!$$jscomp$key$le$$.done;$$jscomp$key$le$$=$$jscomp$iter$0$$.next())$$jscomp$key$le$$.value.setActive(!1)};
this.getCompleteExport=function $this$getCompleteExport$($useHiddenElements$$){for(var $result$$=[],$i$$=0;$i$$<this.elements.length;$i$$++){var $currElement$$=this.elements[$i$$];if($useHiddenElements$$||$currElement$$.visible()){var $currentFilterData$$=$currElement$$.filterData;if(!$useHiddenElements$$&&$currElement$$ instanceof MultiLegendElement)for(var $active_j$$=0;$active_j$$<$currElement$$.subElements.length;$active_j$$++)$currElement$$.subElements[$active_j$$].visible()||($currentFilterData$$=
$storeRemovedElement$$($currentFilterData$$,$currElement$$.subElements[$active_j$$].key));if($currElement$$ instanceof LegendElement)$active_j$$=$currElement$$.active;else{$active_j$$=[];for(var $j$3$$=0;$j$3$$<$currElement$$.subElements.length;$j$3$$++)$currElement$$.subElements[$j$3$$].active&&$active_j$$.push($j$3$$)}$result$$[$i$$]={category:$currElement$$.category,key:$currElement$$.key,filter:$currentFilterData$$,fixedColors:$currElement$$.getColorAssignment(),active:$active_j$$}}}return $result$$};
this.getElementByIndexes=function $this$getElementByIndexes$($subIndex$$,$mainIndex$$){return $subIndex$$?this.elements[$mainIndex$$].subElements[$subIndex$$]:this.elements[$mainIndex$$]};this.getElementByKey=function $this$getElementByKey$($category$$,$key$$,$parentCategory$$,$parentKey$$){for(var $i$4$$=0;$i$4$$<this.elements.length;$i$4$$++){var $element$$=this.elements[$i$4$$];if($element$$.category==$category$$&&$element$$.key==$key$$)return $element$$;if($element$$ instanceof MultiLegendElement)for(var $j$$=
0;$j$$<$element$$.subElements.length;$j$$++){var $subElement$$=$element$$.subElements[$j$$];if($subElement$$.category==$category$$&&$subElement$$.key==$key$$&&$element$$.category==$parentCategory$$&&$element$$.key==$parentKey$$)return $subElement$$}}};this.getElementsWithKey=function $this$getElementsWithKey$($category$$,$key$$){for(var $res$$=[],$i$5$$=0;$i$5$$<this.elements.length;$i$5$$++){var $element$$=this.elements[$i$5$$];if($element$$.category==$category$$&&$element$$.key==$key$$)return[$element$$];
if($element$$ instanceof MultiLegendElement)for(var $j$$=0;$j$$<$element$$.subElements.length;$j$$++){var $subElement$$=$element$$.subElements[$j$$];$subElement$$.category==$category$$&&$subElement$$.key==$key$$&&$res$$.push($subElement$$)}}return $res$$};this.switchToState=function $this$switchToState$($data$$){legend.removeAll();for(var $i$$=0;$i$$<$data$$.length;$i$$++){var $currElement$$=$data$$[$i$$];categoryManager.loadData(1*$currElement$$.category,$currElement$$.key,"stateChange",$currElement$$.filter,
$currElement$$.fixedColors)}};this[Symbol.iterator]=function $jscomp$generator$function(){var $$jscomp$generator$this$$=this,$length$$,$i$6$$,$child$$,$subLength$$,$j$$;return $jscomp.generator.createGenerator($jscomp$generator$function,function($$jscomp$generator$context$$){switch($$jscomp$generator$context$$.nextAddress){case 1:$length$$=$$jscomp$generator$this$$.elements.length,$i$6$$=0;case 2:if(!($i$6$$<$length$$)){$$jscomp$generator$context$$.jumpTo(0);break}$child$$=$$jscomp$generator$this$$.elements[$i$6$$];
if($child$$ instanceof LegendElement)return $$jscomp$generator$context$$.yield($child$$,3);$subLength$$=$child$$.subElements.length;$j$$=0;case 7:if(!($j$$<$subLength$$)){$$jscomp$generator$context$$.jumpTo(3);break}return $$jscomp$generator$context$$.yield($child$$.subElements[$j$$],8);case 8:$j$$++;$$jscomp$generator$context$$.jumpTo(7);break;case 3:$i$6$$++,$$jscomp$generator$context$$.jumpTo(2)}})};this.getMenuItems=function $this$getMenuItems$($index$$,$mainIndex$$){var $items$$={};var $element$$=
isNaN($mainIndex$$)?legend.elements[$index$$]:legend.elements[$mainIndex$$].subElements[$index$$];if("-1"!=$element$$.key)for(var $keys$$=$element$$.key.split("+"),$i$$=0;$i$$<$keys$$.length;$i$$++){var $text$$=categoryManager.getNewCommentText($element$$.category,$keys$$[$i$$],1<$keys$$.length);!commentManager.hasComment($keys$$[$i$$])&&$text$$&&"1"==PATH.userCanEditComments&&commentManager.showCommentMenu($element$$.category,$element$$.key)&&($items$$["addComment"+$keys$$[$i$$]]=$createMenuPoint$$($text$$));
($text$$=categoryManager.getListRetrievalText($element$$.category,$keys$$[$i$$],1<$keys$$.length))&&($items$$["getList"+$keys$$[$i$$]]=$createMenuPoint$$($text$$))}($element$$ instanceof MultiLegendElement||!$element$$.parent)&&$element$$.filterData&&($items$$.reload=$createMenuPoint$$(TRANSLATIONS.RELOAD_LEGEND_ENTRY));return $items$$};this.menuCallback=function $this$menuCallback$($key$$,$options$$){var $element$jscomp$18_index$$=1*$options$$.$trigger.attr("data-index");var $builder$jscomp$2_filterData$jscomp$1_id$jscomp$11_mainIndex$$=
1*$options$$.$trigger.attr("data-main-index");$element$jscomp$18_index$$=isNaN($builder$jscomp$2_filterData$jscomp$1_id$jscomp$11_mainIndex$$)?legend.elements[$element$jscomp$18_index$$]:legend.elements[$builder$jscomp$2_filterData$jscomp$1_id$jscomp$11_mainIndex$$].subElements[$element$jscomp$18_index$$];0===$key$$.indexOf("addComment")?($builder$jscomp$2_filterData$jscomp$1_id$jscomp$11_mainIndex$$=$key$$.substring(10),commentManager.openCommentWindow($element$jscomp$18_index$$.category,$builder$jscomp$2_filterData$jscomp$1_id$jscomp$11_mainIndex$$,
!0)):0===$key$$.indexOf("getList")?($key$$.substring(7),$builder$jscomp$2_filterData$jscomp$1_id$jscomp$11_mainIndex$$=categoryManager.getListBuilder($element$jscomp$18_index$$.category),(new ListManager($builder$jscomp$2_filterData$jscomp$1_id$jscomp$11_mainIndex$$,$element$jscomp$18_index$$)).showSelectionDialog()):"reload"==$key$$&&($builder$jscomp$2_filterData$jscomp$1_id$jscomp$11_mainIndex$$=$element$jscomp$18_index$$.filterData?$element$jscomp$18_index$$.filterData:{},$builder$jscomp$2_filterData$jscomp$1_id$jscomp$11_mainIndex$$=
Object.assign($builder$jscomp$2_filterData$jscomp$1_id$jscomp$11_mainIndex$$,{id:$element$jscomp$18_index$$.key}),categoryManager.showFilterScreen($element$jscomp$18_index$$.category,$element$jscomp$18_index$$.key,$builder$jscomp$2_filterData$jscomp$1_id$jscomp$11_mainIndex$$))};this.reloadOverlays=function $this$reloadOverlays$($callback$$){var $legendLength$$=this.elements.length;if(0==$legendLength$$)$callback$$&&$callback$$();else{var $checkQuant$$=symbolClusterer.checkQuantify(),$counter$$=0;
var $elementCallback$$=function $$elementCallback$$$(){$counter$$++;$counter$$==$legendLength$$&&($checkQuant$$&&symbolClusterer.reQuantify(),mapInterface.repaint(!0),$callback$$&&$callback$$())};for(var $i$$=0;$i$$<$legendLength$$;$i$$++)this.elements[$i$$].reloadSymbols($elementCallback$$);this.update()}};this.collapseAll=function $this$collapseAll$($reload$$){void 0==$reload$$&&($reload$$=!0);for(var $i$$=0;$i$$<this.elements.length;$i$$++)this.elements[$i$$]instanceof MultiLegendElement&&(this.elements[$i$$].childrenInLegend=
!1);$reload$$&&this.update()}}
function LegendElement($category$$,$key$$,$parent$$){this.category=$category$$;this.key=$key$$;this.zIndex=0;this.active=!1;this.openInfoWindowsNumber=this.currentElementIndex=0;this.getIndex=function $this$getIndex$(){return this.index};this.getZindex=function $this$getZindex$(){return this.zIndex};this.setIndex=function $this$setIndex$($index$$){this.index=$index$$};this.setActive=function $this$setActive$($active$$){this.active!=$active$$&&((this.active=$active$$)?(legend.numActive++,legend.globalZindex++,
999999<legend.globalZindex&&(legend.globalZindex=2),this.zIndex=legend.globalZindex):(legend.numActive--,this.zIndex=0))};this.repaintSymbols=function $this$repaintSymbols$(){this.overlayType!=OverlayType.Polygon&&symbolClusterer.repaintPointSymbols(this)};this.getSubElementIndex=function $this$getSubElementIndex$(){return null==this.parent?-1:this.parent.subElements.indexOf(this)};this.quantify=!1;this.editable=categoryManager.categoryAllowsFieldDataEditingForElement(this.category,this.key)||categoryManager.categoryAllowsGeoDataEditingForElement(this.category,
this.key);this.isEditable=function $this$isEditable$(){return this.editable};this.containsPointSymbols=function $this$containsPointSymbols$(){return this.overlayType==OverlayType.PointSymbol};this.loading_quantify=!1;this.symbolInactive=this.symbolStandard=null;this.overlayInfos=[];this.parent=this.htmlElement=null;$parent$$&&(this.parent=$parent$$);this.setLoading=function $this$setLoading$($state$$){this.loading=$state$$;null==this.parent&&($state$$?(legend.numLoading++,optionManager.enableOptions(!1)):
(legend.numLoading--,0==legend.numLoading&&optionManager.enableOptions(!0)))};this.setLoading(!0);var $isVisible$$=!0;this.getNumOverlays=function $this$getNumOverlays$(){for(var $result$$=0,$i$$=0;$i$$<this.overlayInfos.length;$i$$++)$result$$+=this.overlayInfos[$i$$].infoWindowContents.length;return $result$$};this.visible=function $this$visible$($visible$$,$updateLegend$$){var $i$$;if(null!=$visible$$&&$visible$$!=$isVisible$$){if($isVisible$$=$visible$$){var $movable$$=optionManager.inEditMode()&&
categoryManager.categoryAllowsFieldDataEditingForElement(this.category,this.key,this.overlayType),$len$$=this.overlayInfos.length,$color$$=this.getColorHex(),$lineWidth$$=this.getLineWidth();for($i$$=0;$i$$<$len$$;$i$$++)symbolClusterer.addOverlay(this.overlayInfos[$i$$],this,$movable$$,$color$$,$lineWidth$$);null!=this.parent&&(this.parent.subElementsVisible++,this.parent.visible(!0,1==this.parent.subElementsVisible,!0))}else this.openInfoWindowsNumber=0,symbolClusterer.removeOverlays(this),null!=
this.parent&&(this.parent.subElementsVisible--,0==this.parent.subElementsVisible&&this.parent.visible(!1,!0,!0));$updateLegend$$&&(legend.update(),mapInterface.repaint(!0))}return $isVisible$$};this.hasChild=function $this$hasChild$($element$$){return!1};this.isActive=function $this$isActive$(){return 0==legend.numActive?!0:this.active};this.setQuantify=function $this$setQuantify$($q$$){this.quantify=$q$$};this.getOverlayInfos=function $this$getOverlayInfos$(){return this.visible()?this.overlayInfos:
[]};this.highlight=function $this$highlight$(){var $element$jscomp$21_scrollpos$$=null==this.parent||this.parent.childrenInLegend?this.htmlElement:this.parent.htmlElement;this.openInfoWindowsNumber++;$element$jscomp$21_scrollpos$$.focus();$element$jscomp$21_scrollpos$$.addClass("focused");$element$jscomp$21_scrollpos$$=parseInt(jQuery(".legendtable tbody").scrollTop(),10);legend.scrollPosTop=$element$jscomp$21_scrollpos$$};this.unhighlight=function $this$unhighlight$(){this.openInfoWindowsNumber--;
if(0==this.openInfoWindowsNumber)if(null==this.parent||this.parent.childrenInLegend)this.htmlElement.removeClass("focused");else{for(var $i$$=0;$i$$<this.parent.subElements.length;$i$$++)if(0<this.parent.subElements[$i$$].openInfoWindowsNumber)return;this.parent.htmlElement.removeClass("focused")}};this.blur=function $this$blur$(){this.htmlElement.blur()};this.getSubElementIds=function $this$getSubElementIds$(){return[-1]};this.reloadSymbols=function $this$reloadSymbols$($callback$$,$filterData$$){this.loading?
$callback$$&&$callback$$():(this.setLoading(!0),this.removeOverlayInfo(),this.unblockColorIndexes(),categoryManager.loadData(this.category,this.key,"reload",$filterData$$?$filterData$$:this.filterData,this.getColorAssignment(),$callback$$))};this.unblockColorIndexes=function $this$unblockColorIndexes$(){void 0!==this.colorIndex&&(this.overlayType==OverlayType.PointSymbol?symbolManager.unblockFeatureCombination(this.colorIndex[0],this.colorIndex[1]):symbolManager.unblockColor(this.overlayType,this.colorIndex))};
this.getColorAssignment=function $this$getColorAssignment$(){return{"-1":this.colorIndex}};this.getColorString=function $this$getColorString$(){return this.overlayType==OverlayType.PointSymbol?symbolManager.getColorStringForSymbol(this.colorIndex):symbolManager.getPolygonColorString(this.colorIndex)};this.getColorHex=function $this$getColorHex$(){return"0x"+this.getColorString().substring(1)};this.getLineWidth=function $this$getLineWidth$(){return this.parent?categoryManager.getLineWidth(this.parent.category,
this.parent.key):categoryManager.getLineWidth(this.category,this.key)};this.removeOverlayInfo=function $this$removeOverlayInfo$(){symbolClusterer.removeOverlays(this);this.overlayInfos=[]};this.isQuantifiably=function $this$isQuantifiably$(){return this.overlayType==OverlayType.Polygon&&null==this.parent}}
function MultiLegendElement($category$jscomp$0$$,$key$jscomp$0$$){this.category=$category$jscomp$0$$;this.key=$key$jscomp$0$$;this.setIndex=function $this$setIndex$($index$$){this.index=$index$$;for(var $i$$=0;$i$$<this.subElements.length;$i$$++)this.subElements[$i$$].setIndex($index$$)};this.repaintSymbols=function $this$repaintSymbols$(){for(var $i$$=0;$i$$<this.subElements.length;$i$$++)this.subElements[$i$$].repaintSymbols()};this.getIndex=function $this$getIndex$(){return this.index};this.setActive=
function $this$setActive$($active$$){for(var $i$$=0;$i$$<this.subElements.length;$i$$++)this.subElements[$i$$].setActive($active$$)};this.overlayType=-1;this.setLoading=function $this$setLoading$($state$$){(this.loading=$state$$)?(legend.numLoading++,optionManager.enableOptions(!1)):(legend.numLoading--,0==legend.numLoading&&optionManager.enableOptions(!0))};this.setLoading(!0);this.symbolStandard=null;this.subElements=[];this.getNumSubElements=function $this$getNumSubElements$(){return this.subElements.length};
this.getSubElement=function $this$getSubElement$($index$$){return this.subElements[$index$$]};this.containsPointSymbols=function $this$containsPointSymbols$(){for(var $i$$=0;$i$$<this.subElements.length;$i$$++)if(this.subElements[$i$$].containsPointSymbols())return!0;return!1};this.addSubElement=function $this$addSubElement$($element$$){$element$$.setIndex(this.index);this.subElements.push($element$$)};this.subElementsVisible=0;this.htmlElement=null;this.quantify=!1;this.setQuantify=function $this$setQuantify$($q$$){this.quantify=
$q$$;for(var $i$$=0;$i$$<this.subElements.length;$i$$++)this.subElements[$i$$].quantify=$q$$};this.getOverlayInfos=function $this$getOverlayInfos$(){for(var $result$$=[],$i$$=0;$i$$<this.subElements.length;$i$$++)this.subElements[$i$$].visible()&&($result$$=$result$$.concat(this.subElements[$i$$].overlayInfos));return $result$$};this.loading_quantify=!1;var $isVisible$$=!0;this.visible=function $this$visible$($visible$$,$updateLegend$$,$i$$){if(null!=$visible$$&&$visible$$!=$isVisible$$){$isVisible$$=
$visible$$;if(!$i$$)for($i$$=0;$i$$<this.subElements.length;$i$$++)this.subElements[$i$$].visible($visible$$,!1);$updateLegend$$&&(legend.update(),mapInterface.repaint(!0))}return $isVisible$$};this.hasChild=function $this$hasChild$($element$$){for(var $i$$=0;$i$$<this.subElements.length;$i$$++)if(this.subElements[$i$$]==$element$$)return!0;return!1};this.childrenInLegend=!0;this.getElement=function $this$getElement$($category$$,$key$$){for(var $i$$=0;$i$$<this.subElements.length;$i$$++){var $e$$=
this.subElements[$i$$];if($e$$.category==$category$$&&$e$$.key==$key$$)return $e$$}return null};this.focus=function $this$focus$(){this.htmlElement.focus()};this.blur=function $this$blur$(){this.htmlElement.blur()};this.getSubElementIds=function $this$getSubElementIds$(){return this.subElements.map(function($e$$){return $e$$.key})};this.reloadSymbols=function $this$reloadSymbols$($callback$$,$filterData$$){this.loading?$callback$$&&$callback$$():(this.setLoading(!0),this.removeOverlayInfo(),this.unblockColorIndexes(),
categoryManager.loadData(this.category,this.key,"reload",$filterData$$?$filterData$$:this.filterData,this.getColorAssignment(),$callback$$))};this.unblockColorIndexes=function $this$unblockColorIndexes$(){for(var $i$$=0;$i$$<this.subElements.length;$i$$++)this.subElements[$i$$].unblockColorIndexes()};this.getColorAssignment=function $this$getColorAssignment$(){for(var $result$$={},$i$$=0;$i$$<this.subElements.length;$i$$++){var $subElement$$=this.subElements[$i$$];$result$$[$subElement$$.key]=$subElement$$.colorIndex}return $result$$};
this.removeOverlayInfo=function $this$removeOverlayInfo$(){for(var $i$$=0;$i$$<this.subElements.length;$i$$++){var $subElement$$=this.subElements[$i$$];symbolClusterer.removeOverlays($subElement$$);$subElement$$.overlayInfos=[];$subElement$$.loading=!0}};this.removeSubElements=function $this$removeSubElements$(){this.subElements=[]};this.isQuantifiably=function $this$isQuantifiably$(){for(var $i$$=0;$i$$<this.subElements.length;$i$$++)if(this.subElements[$i$$].overlayType==OverlayType.Polygon)return!0;
return!1}};function SymbolClusterer($clustererOptions$$){function $removeSymbolsFromArray$$($arr$$,$owner$$){for(var $i$9$$=$arr$$.length-1;0<=$i$9$$;$i$9$$--)for(var $currentElement$$=$arr$$[$i$9$$],$lenParts$$=$currentElement$$.parts.length,$j$10$$=0;$j$10$$<$lenParts$$;$j$10$$++){var $infoWindowContents$jscomp$2_part$$=$currentElement$$.parts[$j$10$$];if($infoWindowContents$jscomp$2_part$$.owner==$owner$$){if(1==$lenParts$$){null!=$currentElement$$.infoWindow&&(mapInterface.destroyInfoWindow($currentElement$$.infoWindow),
mapState.removeInfoWindowOwnerFromList($currentElement$$));$infoWindowContents$jscomp$2_part$$=$infoWindowContents$jscomp$2_part$$.infoWindows;for(var $numInfoWindowContents$$=$infoWindowContents$jscomp$2_part$$.length,$k$$=0;$k$$<$numInfoWindowContents$$;$k$$++)$infoWindowContents$jscomp$2_part$$[$k$$].resetState();mapInterface.destroyOverlay($currentElement$$.marker);$arr$$.splice($i$9$$,1)}else $currentElement$$.reduceSymbol($j$10$$);$lenParts$$--;$j$10$$--}}}function $getArray$$($lat$$,$lng$$){return $lng$$<
$clustererOptions$$.viewportLng||$lat$$<$clustererOptions$$.viewportLat||$lng$$>$clustererOptions$$.viewportLng+$clustererOptions$$.viewportWidth||$lat$$>$clustererOptions$$.viewportLat+$clustererOptions$$.viewportHeight?$outside$$:$markerIndex$$[Math.floor(($lng$$-$clustererOptions$$.viewportLng)/$xDist$$)][Math.floor(($lat$$-$clustererOptions$$.viewportLat)/$yDist$$)]}for(var $thresholdSquared$$=Math.pow($clustererOptions$$.threshold,2),$markerIndex$$=Array($clustererOptions$$.gridsizeLng),$i$jscomp$0$$=
0;$i$jscomp$0$$<$clustererOptions$$.gridsizeLng;$i$jscomp$0$$++){$markerIndex$$[$i$jscomp$0$$]=Array($clustererOptions$$.gridsizeLat);for(var $j$jscomp$0$$=0;$j$jscomp$0$$<$clustererOptions$$.gridsizeLat;$j$jscomp$0$$++)$markerIndex$$[$i$jscomp$0$$][$j$jscomp$0$$]=[]}var $outside$$=[],$otherOverlays$$=[],$yDist$$=$clustererOptions$$.viewportHeight/$clustererOptions$$.gridsizeLat,$xDist$$=$clustererOptions$$.viewportWidth/$clustererOptions$$.gridsizeLng;this.addOverlay=function $this$addOverlay$($cindex_info_mapInterfaceElement$$,
$mapShapeNew_newMarker_owner$$,$id$jscomp$12_movable$$,$arr$jscomp$4_color$$,$latlng$jscomp$5_lineWidth$$){if($cindex_info_mapInterfaceElement$$.geomData.getType()==IMGeoType.Point){$latlng$jscomp$5_lineWidth$$=$cindex_info_mapInterfaceElement$$.geomData.getGeometry();$arr$jscomp$4_color$$=$getArray$$($latlng$jscomp$5_lineWidth$$.lat,$latlng$jscomp$5_lineWidth$$.lng);for(var $len$$=$arr$jscomp$4_color$$.length,$i$jscomp$45_numSymbols_size$$=0;$i$jscomp$45_numSymbols_size$$<$len$$;$i$jscomp$45_numSymbols_size$$++){var $dlng$$=
mapInterface.getMarkerPosition($arr$jscomp$4_color$$[$i$jscomp$45_numSymbols_size$$].getMarker());var $distSquared_dlat$$=$latlng$jscomp$5_lineWidth$$.lat-$dlng$$.lat;$dlng$$=$latlng$jscomp$5_lineWidth$$.lng-$dlng$$.lng;$distSquared_dlat$$=$distSquared_dlat$$*$distSquared_dlat$$+$dlng$$*$dlng$$;$dlng$$=$thresholdSquared$$;optionManager.inEditMode()&&($dlng$$=0);if($distSquared_dlat$$<=$dlng$$)return $arr$jscomp$4_color$$[$i$jscomp$45_numSymbols_size$$].appendSymbol($cindex_info_mapInterfaceElement$$,
$mapShapeNew_newMarker_owner$$),$arr$jscomp$4_color$$[$i$jscomp$45_numSymbols_size$$]}$len$$=new MapSymbol($cindex_info_mapInterfaceElement$$.infoWindowContents,$mapShapeNew_newMarker_owner$$,$cindex_info_mapInterfaceElement$$.markingColorIndex,$cindex_info_mapInterfaceElement$$.elementIndex);$i$jscomp$45_numSymbols_size$$=$cindex_info_mapInterfaceElement$$.infoWindowContents.length;$i$jscomp$45_numSymbols_size$$=1==$i$jscomp$45_numSymbols_size$$?symbolSize:symbolManager.getLogSizeForCount($i$jscomp$45_numSymbols_size$$);
$cindex_info_mapInterfaceElement$$=this.computeColorIndex($mapShapeNew_newMarker_owner$$,$cindex_info_mapInterfaceElement$$.markingColorIndex);$distSquared_dlat$$=$i$jscomp$45_numSymbols_size$$+2*$cindex_info_mapInterfaceElement$$.markingSize;$mapShapeNew_newMarker_owner$$=mapInterface.createMarker($latlng$jscomp$5_lineWidth$$,symbolManager.createSymbolURL($cindex_info_mapInterfaceElement$$.index,$i$jscomp$45_numSymbols_size$$,$cindex_info_mapInterfaceElement$$.markingSize,$mapShapeNew_newMarker_owner$$.isActive()),
$distSquared_dlat$$,$id$jscomp$12_movable$$,$len$$,$len$$.getZIndex());$len$$.setMarker($mapShapeNew_newMarker_owner$$);$arr$jscomp$4_color$$.push($len$$);return $len$$}$id$jscomp$12_movable$$=$cindex_info_mapInterfaceElement$$.quantifyInfo;$mapShapeNew_newMarker_owner$$=new MapShape($cindex_info_mapInterfaceElement$$.infoWindowContents[0],$mapShapeNew_newMarker_owner$$,$mapShapeNew_newMarker_owner$$.currentElementIndex++);$cindex_info_mapInterfaceElement$$.setMapShape($mapShapeNew_newMarker_owner$$);
$cindex_info_mapInterfaceElement$$=mapInterface.createShape($cindex_info_mapInterfaceElement$$.geomData,$mapShapeNew_newMarker_owner$$,$id$jscomp$12_movable$$,$arr$jscomp$4_color$$,$latlng$jscomp$5_lineWidth$$);$mapShapeNew_newMarker_owner$$.setMapInterfaceElement($cindex_info_mapInterfaceElement$$);$otherOverlays$$.push($mapShapeNew_newMarker_owner$$);mapInterface.addShape($cindex_info_mapInterfaceElement$$);return $mapShapeNew_newMarker_owner$$};this.repaintPointSymbols=function $this$repaintPointSymbols$($owner$$){$owner$$?
this.repaintOwnerSymbolsFromArray($owner$$,$outside$$):this.repaintSymbolsFromArray($outside$$);for(var $len$$=$markerIndex$$.length,$len2$$=$markerIndex$$[0].length,$i$$=0;$i$$<$len$$;$i$$++)for(var $j$$=0;$j$$<$len2$$;$j$$++)$owner$$?this.repaintOwnerSymbolsFromArray($owner$$,$markerIndex$$[$i$$][$j$$]):this.repaintSymbolsFromArray($markerIndex$$[$i$$][$j$$])};this.repaintSymbolsFromArray=function $this$repaintSymbolsFromArray$($arr$$){for(var $len$$=$arr$$.length,$i$7$$=0;$i$7$$<$len$$;$i$7$$++){var $ms$$=
$arr$$[$i$7$$];$ms$$.marker=mapInterface.updateMarker($ms$$.marker,$ms$$.getSymbolURLs(),$ms$$,$ms$$.getZIndex())}};this.repaintOwnerSymbolsFromArray=function $this$repaintOwnerSymbolsFromArray$($owner$$,$arr$$){for(var $len$$=$arr$$.length,$i$8$$=0;$i$8$$<$len$$;$i$8$$++){var $ms$$=$arr$$[$i$8$$];$ms$$.hasOwner($owner$$)&&($ms$$.marker=mapInterface.updateMarker($ms$$.marker,$ms$$.getSymbolURLs(),$ms$$,$ms$$.getZIndex()))}};this.removeOverlays=function $this$removeOverlays$($owner$$){$removeSymbolsFromArray$$($outside$$,
$owner$$);for(var $currentShape_len$$=$markerIndex$$.length,$len2$$=$markerIndex$$[0].length,$i$$=0;$i$$<$currentShape_len$$;$i$$++)for(var $j$$=0;$j$$<$len2$$;$j$$++)$removeSymbolsFromArray$$($markerIndex$$[$i$$][$j$$],$owner$$);for($i$$=$otherOverlays$$.length-1;0<=$i$$;$i$$--)$currentShape_len$$=$otherOverlays$$[$i$$],$currentShape_len$$.owner==$owner$$&&($currentShape_len$$.destroyInfoWindow(),mapInterface.destroyOverlay($currentShape_len$$.mapInterfaceElement),$otherOverlays$$.splice($i$$,1))};
this.findMapElement=function $this$findMapElement$($owner$$,$index$$,$lat$jscomp$4_result$$,$len$jscomp$8_lng$$){for(var $k_len2$$=0;$k_len2$$<$otherOverlays$$.length;$k_len2$$++)if($otherOverlays$$[$k_len2$$].owner==$owner$$&&$otherOverlays$$[$k_len2$$].index==$index$$)return $otherOverlays$$[$k_len2$$];if($lat$jscomp$4_result$$&&$len$jscomp$8_lng$$)return this.findElementInArray($getArray$$($lat$jscomp$4_result$$,$len$jscomp$8_lng$$),$owner$$,$index$$);$len$jscomp$8_lng$$=$markerIndex$$.length;
$k_len2$$=$markerIndex$$[0].length;for(var $i$$=0;$i$$<$len$jscomp$8_lng$$;$i$$++)for(var $j$$=0;$j$$<$k_len2$$;$j$$++)if($lat$jscomp$4_result$$=this.findElementInArray($markerIndex$$[$i$$][$j$$],$owner$$,$index$$))return $lat$jscomp$4_result$$;if($lat$jscomp$4_result$$=this.findElementInArray($outside$$,$owner$$,$index$$))return $lat$jscomp$4_result$$};this.findElementInArray=function $this$findElementInArray$($arr$$,$owner$$,$index$$){for(var $i$$=0;$i$$<$arr$$.length;$i$$++)for(var $j$$=0;$j$$<
$arr$$[$i$$].parts.length;$j$$++){var $part$$=$arr$$[$i$$].parts[$j$$];if($part$$.owner==$owner$$)for(var $k$$=0;$k$$<$part$$.indexes.length;$k$$++)if($part$$.indexes[$k$$]==$index$$)return $arr$$[$i$$]}};this.computeColorIndex=function $this$computeColorIndex$($owner$$,$markingColorIndex$$){var $ownerIndex$$=$owner$$.colorIndex,$result$$=[];$result$$[features_classes.main]=$ownerIndex$$[features_classes.main];$result$$[features_classes.sub]=$ownerIndex$$[features_classes.sub];if(-1===$markingColorIndex$$)return $result$$[features_classes.add]=
$ownerIndex$$[features_classes.add],{index:$result$$,markingSize:0};$result$$[features_classes.add]=$markingColorIndex$$;return{index:$result$$,markingSize:colorScheme.getFeatureCombination($ownerIndex$$,markingSize).msize}};this.removeSingleMapSymbol=function $this$removeSingleMapSymbol$($mapSymbol$$){if(this.removeSingleSymbolFromArray($outside$$,$mapSymbol$$))return!0;for(var $len$$=$markerIndex$$.length,$len2$$=$markerIndex$$[0].length,$i$$=0;$i$$<$len$$;$i$$++)for(var $j$$=0;$j$$<$len2$$;$j$$++)if(this.removeSingleSymbolFromArray($markerIndex$$[$i$$][$j$$],
$mapSymbol$$))return!0;return!1};this.removeSingleSymbolFromArray=function $this$removeSingleSymbolFromArray$($arr$$,$mapSymbol$$){for(var $i$$=$arr$$.length-1;0<=$i$$;$i$$--){var $currentElement$$=$arr$$[$i$$],$lenParts$$=$currentElement$$.parts.length;if($currentElement$$==$mapSymbol$$){1==$lenParts$$?(null!=$currentElement$$.infoWindow&&(mapInterface.destroyInfoWindow($currentElement$$.infoWindow),mapState.removeInfoWindowOwnerFromList($currentElement$$)),mapInterface.destroyOverlay($currentElement$$.marker),
$arr$$.splice($i$$,1)):$currentElement$$.reduceSymbol($i$$);break}}};this.quantify=function $this$quantify$($element$jscomp$24_idx_point$$,$update$$,$callback$$){for(var $i$$=0;$i$$<legend.getLength();$i$$++){var $element_l$jscomp$1_info$11_j$$=legend.getElement($i$$);$element_l$jscomp$1_info$11_j$$.quantify&&$element$jscomp$24_idx_point$$!==$element_l$jscomp$1_info$11_j$$&&$element_l$jscomp$1_info$11_j$$.setQuantify(!1)}$update$$||($element$jscomp$24_idx_point$$.setQuantify(!$element$jscomp$24_idx_point$$.quantify),
jQuery(document).trigger("im_quantify_mode",$element$jscomp$24_idx_point$$.quantify));this.polygrp={};if($element$jscomp$24_idx_point$$ instanceof MultiLegendElement){var $ekey_numSub$$=$element$jscomp$24_idx_point$$.getNumSubElements();for($element_l$jscomp$1_info$11_j$$=0;$element_l$jscomp$1_info$11_j$$<$ekey_numSub$$;$element_l$jscomp$1_info$11_j$$++){var $fastquantify_subowner$$=$element$jscomp$24_idx_point$$.getSubElement($element_l$jscomp$1_info$11_j$$);$i$$=$fastquantify_subowner$$.overlayInfos.length;
for(var $activeMapSymbols_k$$=0;$activeMapSymbols_k$$<$i$$;$activeMapSymbols_k$$++){var $info$$=$fastquantify_subowner$$.overlayInfos[$activeMapSymbols_k$$];this.polygrp[$info$$.quantifyInfo]=$info$$}}}else for($i$$=$element$jscomp$24_idx_point$$.overlayInfos.length,$activeMapSymbols_k$$=0;$activeMapSymbols_k$$<$i$$;$activeMapSymbols_k$$++)$element_l$jscomp$1_info$11_j$$=$element$jscomp$24_idx_point$$.overlayInfos[$activeMapSymbols_k$$],this.polygrp[$element_l$jscomp$1_info$11_j$$.quantifyInfo]=$element_l$jscomp$1_info$11_j$$;
$activeMapSymbols_k$$=[];$fastquantify_subowner$$=!0;$ekey_numSub$$=$element$jscomp$24_idx_point$$.key;for($i$$=0;$i$$<legend.getLength();$i$$++)for($element_l$jscomp$1_info$11_j$$=legend.getElement($i$$),$info$$=$element_l$jscomp$1_info$11_j$$.getOverlayInfos(),$element_l$jscomp$1_info$11_j$$=0;$element_l$jscomp$1_info$11_j$$<$info$$.length;$element_l$jscomp$1_info$11_j$$++)$info$$[$element_l$jscomp$1_info$11_j$$].geomData.getType()==IMGeoType.Point&&($activeMapSymbols_k$$.push($info$$[$element_l$jscomp$1_info$11_j$$]),
null==$info$$[$element_l$jscomp$1_info$11_j$$].getQuantifyInfo($ekey_numSub$$)&&($fastquantify_subowner$$=!1));this.displayMarkers(!1);this.overall_markers=$activeMapSymbols_k$$.length;this.markerCounts={};if($element$jscomp$24_idx_point$$.quantify||$update$$){for(var $id$$ in this.polygrp)this.markerCounts[$id$$]=0;this.max_markers_in_one_poly=0;if($fastquantify_subowner$$)for($i$$=0;$i$$<$activeMapSymbols_k$$.length;$i$$++){if($id$$=$activeMapSymbols_k$$[$i$$],$element$jscomp$24_idx_point$$=$id$$.getQuantifyInfo($ekey_numSub$$),
-1!=$element$jscomp$24_idx_point$$)try{this.markerCounts[$element$jscomp$24_idx_point$$]+=$id$$.infoWindowContents.length,this.markerCounts[$element$jscomp$24_idx_point$$]>this.max_markers_in_one_poly&&(this.max_markers_in_one_poly=this.markerCounts[$element$jscomp$24_idx_point$$])}catch($e$$){}}else for($i$$=0;$i$$<$activeMapSymbols_k$$.length;$i$$++)for($id$$ in $element$jscomp$24_idx_point$$=$activeMapSymbols_k$$[$i$$].geomData,this.polygrp)if(geoManager.pointInPolygon($element$jscomp$24_idx_point$$,
this.polygrp[$id$$].geomData)){this.markerCounts[$id$$]+=$activeMapSymbols_k$$[$i$$].infoWindowContents.length;this.markerCounts[$id$$]>this.max_markers_in_one_poly&&(this.max_markers_in_one_poly=this.markerCounts[$id$$]);break}jQuery("#colorbarlegend_right").text(this.max_markers_in_one_poly);this.changePolygonColor(!1)}else this.displayMarkers(!0),mapInterface.revertChangedOverlays();mapInterface.repaint(!0);"function"==typeof $callback$$&&$callback$$()};this.showSimilarity=function $this$showSimilarity$($id_reference$$,
$similarities$$){this.polygrp={};this.markerCounts={};for(var $i$$=0;$i$$<legend.getLength();$i$$++)for(var $overlays$$=legend.getElement($i$$).getOverlayInfos(),$j$$=0;$j$$<$overlays$$.length;$j$$++){var $idx$jscomp$1_type$$=$overlays$$[$j$$].geomData.getType();if($idx$jscomp$1_type$$==IMGeoType.Polygon||$idx$jscomp$1_type$$==IMGeoType.MultiPolygon)$idx$jscomp$1_type$$=$overlays$$[$j$$].quantifyInfo,this.polygrp[$idx$jscomp$1_type$$]=$overlays$$[$j$$],this.markerCounts[$idx$jscomp$1_type$$]=$similarities$$[$idx$jscomp$1_type$$]?
$similarities$$[$idx$jscomp$1_type$$]:!1}this.max_markers_in_one_poly=1;jQuery("#colorbarlegend_right").text(this.max_markers_in_one_poly);this.changePolygonColor(!1);mapInterface.changePolygonAppearance(this.polygrp[$id_reference$$].getMapShape().mapInterfaceElement,"rgb(0,255,0)","rgb(0,255,0)",1,1,1);mapInterface.repaint(!0);categoryManager.addAjaxData("similarity",$id_reference$$);this.toggleQuantifyMode();return this.polygrp[$id_reference$$].getMapShape()};this.displayMarkers=function $this$displayMarkers$($show$$){for(var $i$$=
0;$i$$<$markerIndex$$.length;$i$$++)for(var $j$$=0;$j$$<$markerIndex$$[$i$$].length;$j$$++)if(0<$markerIndex$$[$i$$][$j$$].length)for(var $k$$=0;$k$$<$markerIndex$$[$i$$][$j$$].length;$k$$++){var $mapsymbol$$=$markerIndex$$[$i$$][$j$$][$k$$];mapInterface.setMarkerVisible($mapsymbol$$.marker,$show$$)}for($i$$=0;$i$$<$outside$$.length;$i$$++)$mapsymbol$$=$outside$$[$i$$],mapInterface.setMarkerVisible($mapsymbol$$.marker,$show$$)};this.toggleQuantifyMode=function $this$toggleQuantifyMode$($left$$){var $l_container$$=
jQuery("#listcontainer");$left$$||"none"==$l_container$$.css("display")?($left$$=jQuery(mapDomElement).width()/2-128,$l_container$$.css("left",$left$$).css("position","absolute"),$l_container$$.fadeIn("fast",function(){mapInterface.updateMapStyle(!0)})):$l_container$$.fadeOut("fast",function(){mapInterface.updateMapStyle(!1)})};this.changePolygonColor=function $this$changePolygonColor$($linear_mapping$$){for(var $id$$ in this.polygrp)if(!1===this.markerCounts[$id$$])mapInterface.changePolygonAppearance(this.polygrp[$id$$].getMapShape().mapInterfaceElement,
"rgb(0,0,0)","rgb(0,0,0)",.01,1,1);else{var $idx$$=0;this.markerCounts[$id$$]&&($idx$$=$linear_mapping$$?this.markerCounts[$id$$]/this.overall_markers:this.markerCounts[$id$$]/this.max_markers_in_one_poly);$idx$$=Math.ceil(255*$idx$$);255<$idx$$&&($idx$$=255);var $color$$=document.querySelector("#activediv canvas").getContext("2d").getImageData($idx$$,0,1,1).data;$color$$="rgb("+$color$$[0]+","+$color$$[1]+","+$color$$[2]+")";var $state$$=optionManager.getOptionState("polymode"),$zindex$$=2;0==$idx$$&&
($color$$=jQuery("#gradient_startblock").css("background-color"));if("phy"==$state$$){var $opacity$$=.5;$state$$=$color$$}else{$opacity$$=1;$state$$="ghostwhite";var $activecanvas$$=jQuery("#activediv canvas").attr("id");"barcanvas_0"==$activecanvas$$&&($state$$="black");"barcanvas_5"==$activecanvas$$&&($state$$="black");"barcanvas_3"==$activecanvas$$&&($state$$="rgb(180,180,180)");0==$idx$$&&($state$$="rgba(20,20,20,0.75)",$zindex$$=1)}mapInterface.changePolygonAppearance(this.polygrp[$id$$].getMapShape().mapInterfaceElement,
$color$$,$state$$,$opacity$$,$opacity$$,$zindex$$)}};this.checkQuantify=function $this$checkQuantify$(){for(var $elem$$=!1,$i$$=0;$i$$<legend.getLength();$i$$++){var $element_l$$=legend.getElement($i$$);$element_l$$.quantify&&($elem$$=$element_l$$)}return $elem$$};this.reQuantify=function $this$reQuantify$(){var $q_elem$$=this.checkQuantify();$q_elem$$.loading_quantify=!0;legend.update();setTimeout(function(){symbolClusterer.quantify($q_elem$$,!0,function(){$q_elem$$.loading_quantify=!1;legend.update()})},
200)}}
function MapShape($infoWindowContent$$,$owner$$,$index$$){this.infoWindow=null;this.infoWindowContent=$infoWindowContent$$;this.index=$index$$;this.owner=$owner$$;this.setMapInterfaceElement=function $this$setMapInterfaceElement$($element$$){this.mapInterfaceElement=$element$$};this.openInfoWindow=function $this$openInfoWindow$($lat$$,$lng$$){this.infoWindow&&mapInterface.destroyInfoWindow(this.infoWindow);this.infoWindow=mapInterface.createInfoWindow(this.mapInterfaceElement,[{url:void 0,size:void 0}],[this.infoWindowContent.getHtml(0)],
this);mapState.addInfoWindowOwnerToList(this);mapInterface.openInfoWindow(this.mapInterfaceElement,this.infoWindow,void 0,$lat$$,$lng$$,this)};this.destroyInfoWindow=function $this$destroyInfoWindow$(){this.infoWindow&&mapInterface.destroyInfoWindow(this.infoWindow)};this.updateInfoWindow=function $this$updateInfoWindow$(){var $newContent$$=mapInterface.updateInfoWindowContent(this.infoWindow,-1,this.infoWindowContent.getHtml(0));this.infoWindowContent.onOpen($newContent$$,0,this.infoWindow,this.mapInterfaceElement)}}
function MapSymbol($infoWindowContents$jscomp$0$$,$owner$jscomp$0$$,$markingColorIndex$jscomp$0$$,$elementIndex$$){this.currentTabIndex=0;this.updateInfoWindow=function $this$updateInfoWindow$(){};this.getNumParts=function $this$getNumParts$(){return null==this.parts?-1:this.parts.length};this.getOwner=function $this$getOwner$($index$$){return null==this.parts?null:this.parts[$index$$].owner};this.getZIndex=function $this$getZIndex$(){if(null==this.parts)return 0;for(var $maxZIndex$$=0,$i$$=0;$i$$<
this.parts.length;$i$$++)$maxZIndex$$=Math.max(this.parts[$i$$].owner.getZindex(),$maxZIndex$$);return $maxZIndex$$};this.getMarker=function $this$getMarker$(){return this.marker};this.setMarker=function $this$setMarker$($marker$$){this.marker=$marker$$};this.infoWindow=null;this.getSymbolURLs=function $this$getSymbolURLs$(){for(var $symbols$$=[],$i$$=0;$i$$<this.parts.length;$i$$++){var $part$jscomp$2_size$$=this.parts[$i$$],$owner$$=$part$jscomp$2_size$$.owner,$cindex$$=symbolClusterer.computeColorIndex($owner$$,
$part$jscomp$2_size$$.markingColor);$part$jscomp$2_size$$=symbolManager.getLogSizeForCount(this.getNumElementsForPart($part$jscomp$2_size$$));var $totalSize$$=$part$jscomp$2_size$$+2*$cindex$$.markingSize;$symbols$$.push({canvas:null==$owner$$?null:symbolManager.createSymbolURL($cindex$$.index,$part$jscomp$2_size$$,$cindex$$.markingSize,$owner$$.isActive()),size:$totalSize$$})}return $symbols$$};this.getNumElementsForPart=function $this$getNumElementsForPart$($part$$){for(var $result$$=0,$i$12$$=
0;$i$12$$<$part$$.infoWindows.length;$i$12$$++)$result$$+=$part$$.infoWindows[$i$12$$].getNumElements();return $result$$};this.getOwnerKey=function $this$getOwnerKey$($owner$$,$markingColorIndex$$){return null==$owner$$?"null":null==$owner$$.parent?$owner$$.key+"&"+$markingColorIndex$$:$owner$$.parent.key+"|"+$owner$$.key+"&"+$markingColorIndex$$};this.appendSymbol=function $this$appendSymbol$($info$$,$owner$$,$index$$){null!=this.infoWindow&&(mapInterface.destroyInfoWindow(this.infoWindow),mapState.removeInfoWindowOwnerFromList(this),
this.infoWindow=null);for(var $lenParts$$=this.parts.length,$existingPartFound$$=!1,$i$13$$=0;$i$13$$<$lenParts$$;$i$13$$++){var $part$$=this.parts[$i$13$$];if($part$$.owner==$owner$$&&$info$$.markingColorIndex==$part$$.markingColor){$part$$.infoWindows=this.appendInfoWindowContents($info$$.infoWindowContents,$part$$.infoWindows);$part$$.indexes.push($info$$.elementIndex);$existingPartFound$$=!0;break}}$existingPartFound$$||($info$$={owner:$owner$$,markingColor:$info$$.markingColorIndex,infoWindows:this.appendInfoWindowContents($info$$.infoWindowContents,
[]),indexes:[$info$$.elementIndex]},void 0===$index$$?this.parts.push($info$$):this.parts.splice($index$$+1,0,$info$$));this.marker=mapInterface.updateMarker(this.marker,this.getSymbolURLs(),this,this.getZIndex())};this.appendInfoWindowContents=function $this$appendInfoWindowContents$($newContents$$,$exisitingContents$$){for(var $i$14$$=0;$i$14$$<$newContents$$.length;$i$14$$++){for(var $merged$$=!1,$j$$=0;$j$$<$exisitingContents$$.length;$j$$++)if($newContents$$[$i$14$$].tryMerge($exisitingContents$$[$j$$])){$merged$$=
!0;break}$merged$$||$exisitingContents$$.push($newContents$$[$i$14$$])}return $exisitingContents$$};this.reduceSymbol=function $this$reduceSymbol$($index$$){null!=this.infoWindow&&(mapInterface.destroyInfoWindow(this.infoWindow),mapState.removeInfoWindowOwnerFromList(this),this.infoWindow=null);for(var $infoWindowContents$$=this.parts[$index$$].infoWindows,$numInfoWindowContents$$=$infoWindowContents$$.length,$i$15$$=0;$i$15$$<$numInfoWindowContents$$;$i$15$$++)$infoWindowContents$$[$i$15$$].resetState();
this.parts.splice($index$$,1);this.marker=mapInterface.updateMarker(this.marker,this.getSymbolURLs(),this,this.getZIndex())};this.openInfoWindow=function $this$openInfoWindow$($iconIndex$$){if(null==this.infoWindow){for(var $contents$$=[],$i$16_symbols$$=0;$i$16_symbols$$<this.parts.length;$i$16_symbols$$++)for(var $part$$=this.parts[$i$16_symbols$$],$j$$=0;$j$$<$part$$.infoWindows.length;$j$$++){var $elements$$=$part$$.infoWindows[$j$$].getHtml($j$$);if("string"===typeof $elements$$){var $newChild$$=
document.createElement("div");$elements$$=jQuery.parseHTML($elements$$);for(var $k$17_k$$=0;$k$17_k$$<$elements$$.length;$k$17_k$$++)$newChild$$.appendChild($elements$$[$k$17_k$$])}else $newChild$$=$elements$$;if(void 0==$contents$$[$i$16_symbols$$])$elements$$=document.createElement("div"),$elements$$.id="tab_content_"+$i$16_symbols$$,$elements$$.appendChild($newChild$$),$contents$$[$i$16_symbols$$]=$elements$$;else{$elements$$=jQuery.parseHTML(getInfoWindowContentSeparator());for($k$17_k$$=0;$k$17_k$$<
$elements$$.length;$k$17_k$$++)$contents$$[$i$16_symbols$$].appendChild($elements$$[$k$17_k$$]);$contents$$[$i$16_symbols$$].appendChild($newChild$$)}}$i$16_symbols$$=null==this.parts?[{canvas:null,size:symbolSize}]:this.getSymbolURLs();this.infoWindow=mapInterface.createInfoWindow(this.marker,$i$16_symbols$$,$contents$$,this)}mapInterface.openInfoWindow(this.marker,this.infoWindow,$iconIndex$$,void 0,void 0,this);mapState.addInfoWindowOwnerToList(this)};this.getLegendElement=function $this$getLegendElement$($iconIndex$$){return 1==
this.parts.length?this.parts[0].owner:this.parts[$iconIndex$$].owner};this.openSplitMultiSymbol=function $this$openSplitMultiSymbol$(){};this.hasOwner=function $this$hasOwner$($owner$$){for(var $i$18$$=0;$i$18$$<this.parts.length;$i$18$$++)if(this.parts[$i$18$$].owner==$owner$$)return!0;return!1};this.parts=[{owner:$owner$jscomp$0$$,infoWindows:this.appendInfoWindowContents($infoWindowContents$jscomp$0$$,[]),markingColor:$markingColorIndex$jscomp$0$$,indexes:[$elementIndex$$]}]}
function OverlayInfo($infoWindowContents$$,$geomData$$,$quantifyInfo$$,$markingColorIndex$$,$elementIndex$$){this.elementIndex=$elementIndex$$;this.infoWindowContents=$infoWindowContents$$;this.geomData=$geomData$$;null==$quantifyInfo$$?$geomData$$.getType()==IMGeoType.Point?this.quantifyInfo=[]:this.quantifyInfo="NoID"+OverlayInfo.currentId++:this.quantifyInfo=$quantifyInfo$$;this.getQuantifyInfo=function $this$getQuantifyInfo$($key$$){var $posPipe$$=$key$$.indexOf("|");return-1!==$posPipe$$?this.quantifyInfo[$key$$.substring(0,
$posPipe$$)]:this.quantifyInfo[$key$$]};this.markingColorIndex=$markingColorIndex$$;this.mapShape=null;this.setMapShape=function $this$setMapShape$($mapShape$$){this.mapShape=$mapShape$$};this.getMapShape=function $this$getMapShape$(){return this.mapShape}}OverlayInfo.currentId=0;function InfoWindowContent($categoryID$$,$elementID$$,$overlayType$$,$data$$){}InfoWindowContent.prototype.getHtml=function $InfoWindowContent$$getHtml$($index$$){};InfoWindowContent.prototype.tryMerge=function $InfoWindowContent$$tryMerge$($oldContent$$){};
InfoWindowContent.prototype.resetState=function $InfoWindowContent$$resetState$(){};InfoWindowContent.prototype.getNumElements=function $InfoWindowContent$$getNumElements$(){};InfoWindowContent.prototype.onOpen=function $InfoWindowContent$$onOpen$($tabContent$$,$tabIndex$$,$infoWindow$$,$overlay$$){};InfoWindowContent.prototype.onClose=function $InfoWindowContent$$onClose$($tabContent$$){};InfoWindowContent.prototype.getData=function $InfoWindowContent$$getData$(){};
InfoWindowContent.prototype.getName=function $InfoWindowContent$$getName$(){};function SymbolManager($colorScheme$$){function $nextColor$$($type$$){$freeColors$$[$type$$][$firstFreeColor$$[$type$$]]=!1;for($firstFreeColor$$[$type$$]++;$firstFreeColor$$[$type$$]<$freeColors$$[$type$$].length&&!$freeColors$$[$type$$][$firstFreeColor$$[$type$$]];)$firstFreeColor$$[$type$$]++}function $increaseNextMainFeature$$(){$nextMainFeature$$=($nextMainFeature$$+1)%$numMain$$;for(var $numIterations$$=0;$numFreeSubFeatures$$[$nextMainFeature$$]!=$numSub$$&&!($nextMainFeature$$=($nextMainFeature$$+
1)%$numMain$$,$numIterations$$++,$nextMainFeature$$!=$mainFeatureForSingularSymbols$$&&$numIterations$$>=$numMain$$););if(!($numIterations$$<$numMain$$))for($numIterations$$=0;0==$numFreeSubFeatures$$[$nextMainFeature$$];)if($nextMainFeature$$=($nextMainFeature$$+1)%$numMain$$,$numIterations$$++,$nextMainFeature$$!=$mainFeatureForSingularSymbols$$&&$numIterations$$>=$numMain$$){$nextMainFeature$$=0<$numFreeSubFeatures$$[$mainFeatureForSingularSymbols$$]?$mainFeatureForSingularSymbols$$:-1;break}}
function $getNewIndexes$$($mainIndex$$,$numSubComb$$){for(var $foundIndexes$$=0,$res$$=Array($numSubComb$$),$subArray$$=$freeSubFeatures$$[$mainIndex$$],$i$$=0;$i$$<$numSub$$&&(!$subArray$$[$i$$]||($subArray$$[$i$$]=!1,$res$$[$foundIndexes$$++]=[$mainIndex$$,$i$$,0],$foundIndexes$$!=$numSubComb$$));$i$$++);return $res$$}for(var $numMain$$=$colorScheme$$.getNumCombinations(features_classes.main),$numSub$$=$colorScheme$$.getNumCombinations(features_classes.sub),$numAdd$$=$colorScheme$$.getNumCombinations(features_classes.add),
$numCols$$=$colorScheme$$.getNumPolygonColors(),$nextMainFeature$$,$mainFeatureForSingularSymbols$$,$numFreeSubFeatures$$=Array($numMain$$),$freeSubFeatures$$=Array($numMain$$),$firstFreeSubFeature$$=Array($numMain$$),$i$jscomp$59_y1$$=0;$i$jscomp$59_y1$$<$numMain$$;$i$jscomp$59_y1$$++)$freeSubFeatures$$[$i$jscomp$59_y1$$]=Array($numSub$$);$i$jscomp$59_y1$$=symbolSize*(1+minimumSymbolEnlargement/100)/2;var $a$$=($i$jscomp$59_y1$$-symbolSize*(1+decSymbolEnlargement/100)/2)/(Math.log(2)-Math.log(100)),
$b$$=$i$jscomp$59_y1$$-$a$$*Math.log(2),$firstFreeColor$$=Array(num_overlay_types),$freeColors$$=Array(num_overlay_types);for($i$jscomp$59_y1$$=1;$i$jscomp$59_y1$$<num_overlay_types;$i$jscomp$59_y1$$++)$freeColors$$[$i$jscomp$59_y1$$]=Array($numCols$$);this.symbolBuffer=new Map;this.resetFreeFeatures=function $this$resetFreeFeatures$(){$nextMainFeature$$=0;$mainFeatureForSingularSymbols$$=-1;for(var $i$$=0;$i$$<$numMain$$;$i$$++){$numFreeSubFeatures$$[$i$$]=$numSub$$;for(var $j$$=0;$j$$<$numSub$$;$j$$++)$freeSubFeatures$$[$i$$][$j$$]=
!0;$firstFreeSubFeature$$[$i$$]=0}for($i$$=1;$i$$<num_overlay_types;$i$$++)for($j$$=$firstFreeColor$$[$i$$]=0;$j$$<$numCols$$;$j$$++)$freeColors$$[$i$$][$j$$]=!0};this.resetFreeFeatures();this.blockColor=function $this$blockColor$($type$$,$index$$){if(null==$index$$){if($firstFreeColor$$[$type$$]>=$freeColors$$[$type$$].length)throw"No color for polygons left!";$index$$=$firstFreeColor$$[$type$$];$nextColor$$($type$$);return $index$$+$numCols$$*($type$$-1)}var $relativeIndex$$=$index$$-$numCols$$*
($type$$-1);if(0>$relativeIndex$$||$relativeIndex$$>=$numCols$$)throw"Index not valid for this overlay type!";$relativeIndex$$==$firstFreeColor$$[$type$$]?$nextColor$$($type$$):$freeColors$$[$type$$][$relativeIndex$$]=!1;return $index$$};this.blockColors=function $this$blockColors$($type$$,$number$$){if(0==$number$$)return[];for(var $indexes$$=Array($number$$),$i$$=0;$i$$<$number$$;$i$$++)$indexes$$[$i$$]=this.blockColor($type$$);return $indexes$$};this.unblockColor=function $this$unblockColor$($type$$,
$index$$){var $relativeIndex$$=$index$$-$numCols$$*($type$$-1);$freeColors$$[$type$$][$relativeIndex$$]=!0;$relativeIndex$$<$firstFreeColor$$[$type$$]&&($firstFreeColor$$[$type$$]=$relativeIndex$$)};this.getPolygonColorString=function $this$getPolygonColorString$($colorArray_index$$){$colorArray_index$$=$colorScheme$$.getPolygonColor($colorArray_index$$%$numCols$$);return"#"+decimalToHex($colorArray_index$$[0])+decimalToHex($colorArray_index$$[1])+decimalToHex($colorArray_index$$[2])};this.getMarkingColor=
function $this$getMarkingColor$($index$$){return $colorScheme$$.getSingleFeature(features_classes.add,$index$$).mcolor};this.getMarkingColorString=function $this$getMarkingColorString$($colorArray$jscomp$1_index$$){$colorArray$jscomp$1_index$$=this.getMarkingColor($colorArray$jscomp$1_index$$);return"#"+decimalToHex($colorArray$jscomp$1_index$$[0])+decimalToHex($colorArray$jscomp$1_index$$[1])+decimalToHex($colorArray$jscomp$1_index$$[2])};this.blockFeatureCombinations=function $this$blockFeatureCombinations$($JSCompiler_inline_result$$,
$i$jscomp$inline_62_res$$,$mainIndex$$){if(0==$JSCompiler_inline_result$$)return[];if(null==$mainIndex$$){a:{if(-1==$nextMainFeature$$)throw"No symbols left!";if(1==$i$jscomp$inline_62_res$$&&(-1==$mainFeatureForSingularSymbols$$&&($mainFeatureForSingularSymbols$$=$nextMainFeature$$,$increaseNextMainFeature$$()),0<$numFreeSubFeatures$$[$mainFeatureForSingularSymbols$$])){$numFreeSubFeatures$$[$mainFeatureForSingularSymbols$$]--;$JSCompiler_inline_result$$=$getNewIndexes$$($mainFeatureForSingularSymbols$$,
1);break a}if($numFreeSubFeatures$$[$nextMainFeature$$]>=$JSCompiler_inline_result$$)$i$jscomp$inline_62_res$$=$getNewIndexes$$($nextMainFeature$$,$JSCompiler_inline_result$$),$numFreeSubFeatures$$[$nextMainFeature$$]-=$JSCompiler_inline_result$$,$increaseNextMainFeature$$(),$JSCompiler_inline_result$$=$i$jscomp$inline_62_res$$;else{for($i$jscomp$inline_62_res$$=$nextMainFeature$$+1;$i$jscomp$inline_62_res$$!=$nextMainFeature$$;$i$jscomp$inline_62_res$$=($i$jscomp$inline_62_res$$+1)%$numMain$$)if($numFreeSubFeatures$$[$i$jscomp$inline_62_res$$]>=
$JSCompiler_inline_result$$){$numFreeSubFeatures$$[$i$jscomp$inline_62_res$$]-=$JSCompiler_inline_result$$;break}if($i$jscomp$inline_62_res$$==$nextMainFeature$$)throw"Not enough symbols left!";$JSCompiler_inline_result$$=$getNewIndexes$$($i$jscomp$inline_62_res$$,$JSCompiler_inline_result$$)}}return $JSCompiler_inline_result$$}$numFreeSubFeatures$$[$mainIndex$$]-=$JSCompiler_inline_result$$;return $getNewIndexes$$($mainIndex$$,$JSCompiler_inline_result$$)};this.blockExplicitIndex=function $this$blockExplicitIndex$($index$$){jQuery.isArray($index$$)?
($freeSubFeatures$$[$index$$[0]][$index$$[1]]=!1,$numFreeSubFeatures$$[$index$$[0]]--,$nextMainFeature$$==$index$$[0]&&$increaseNextMainFeature$$()):this.blockExplicitSingularIndex($index$$);return $index$$};this.blockExplicitSingularIndex=function $this$blockExplicitSingularIndex$($index$$){if(jQuery.isArray($index$$))$freeSubFeatures$$[$index$$[0]][$index$$[1]]=!1,$numFreeSubFeatures$$[$index$$[0]]--,-1==$mainFeatureForSingularSymbols$$&&($mainFeatureForSingularSymbols$$=$index$$[0],$nextMainFeature$$==
$mainFeatureForSingularSymbols$$&&$increaseNextMainFeature$$());else{var $type$$=Math.floor($index$$/$numCols$$)+1,$relativeIndex$$=$index$$-$numCols$$*($type$$-1);$firstFreeColor$$[$type$$]==$index$$?$nextColor$$($type$$):$freeColors$$[$type$$][$relativeIndex$$]=!1}return $index$$};this.unblockFeatureCombination=function $this$unblockFeatureCombination$($mainIndex$$,$subIndex$$){$freeSubFeatures$$[$mainIndex$$][$subIndex$$]=!0;$numFreeSubFeatures$$[$mainIndex$$]++;$numFreeSubFeatures$$[$mainIndex$$]==
$numSub$$&&($nextMainFeature$$>$mainIndex$$&&($nextMainFeature$$=$mainIndex$$),$mainIndex$$==$mainFeatureForSingularSymbols$$&&($mainFeatureForSingularSymbols$$=-1));if(-1==$nextMainFeature$$||$nextMainFeature$$==$mainFeatureForSingularSymbols$$)$nextMainFeature$$=$mainIndex$$};this.ColorLuminance=function $this$ColorLuminance$($hex$$,$lum$$){$hex$$=String($hex$$).replace(/[^0-9a-f]/gi,"");6>$hex$$.length&&($hex$$=$hex$$[0]+$hex$$[0]+$hex$$[1]+$hex$$[1]+$hex$$[2]+$hex$$[2]);$lum$$=$lum$$||0;var $rgb$$=
"#",$i$$;for($i$$=0;3>$i$$;$i$$++){var $c$$=parseInt($hex$$.substr(2*$i$$,2),16);$c$$=Math.round(Math.min(Math.max(0,$c$$+$c$$*$lum$$),255)).toString(16);$rgb$$+=("00"+$c$$).substr($c$$.length)}return $rgb$$};this.checkContrast=function $this$checkContrast$($color_array$$){return Math.round((299*parseInt($color_array$$[0],10)+587*parseInt($color_array$$[1],10)+114*parseInt($color_array$$[2],10))/1E3)};this.getContrastColor=function $this$getContrastColor$($hex_color$$,$color_array$$){var $contrast_color_w3_contrast$$=
this.checkContrast($color_array$$);$contrast_color_w3_contrast$$=125>$contrast_color_w3_contrast$$?this.ColorLuminance($hex_color$$,.65+$contrast_color_w3_contrast$$/100):this.ColorLuminance($hex_color$$,-.45);"#000000"==$hex_color$$&&($contrast_color_w3_contrast$$="#d1d1d1");"#FFFFFF"==$hex_color$$&&($contrast_color_w3_contrast$$="#777777");return $contrast_color_w3_contrast$$};this.rgbToHex=function $this$rgbToHex$($color_array$$){return"#"+(16777216+($color_array$$[0]<<16)+($color_array$$[1]<<
8)+$color_array$$[2]).toString(16).slice(1)};this.createMarkerImage=function $this$createMarkerImage$($size$$,$label$$,$color$jscomp$5_contrast_color$$,$form$$,$outline_only$$,$markingSize$$,$markingcolor$$,$active$$){var $fontsize$$=this.getImageFontSize($size$$,$label$$,$form$$);$size$$*=symbolRescaleFactor;var $hex_color$$=this.rgbToHex($color$jscomp$5_contrast_color$$),$canvas$$=document.createElement("canvas"),$context$$=$canvas$$.getContext("2d"),$add_for_marking_new_center$$=0;0==$markingSize$$?
($canvas$$.width=$size$$,$canvas$$.height=$size$$):($add_for_marking_new_center$$=4*$markingSize$$,$canvas$$.width=$size$$+$add_for_marking_new_center$$,$canvas$$.height=$size$$+$add_for_marking_new_center$$);var $centerX$$=$canvas$$.width/2,$centerY$$=$canvas$$.height/2;$color$jscomp$5_contrast_color$$=$outline_only$$?$hex_color$$:this.getContrastColor($hex_color$$,$color$jscomp$5_contrast_color$$);0<$markingSize$$&&($context$$.beginPath(),$add_for_marking_new_center$$=this.drawForm($form$$,$centerX$$,
$centerY$$,$context$$,$size$$+$add_for_marking_new_center$$,3),null!=$add_for_marking_new_center$$&&($centerX$$=$add_for_marking_new_center$$[0],$centerY$$=$add_for_marking_new_center$$[1]),$context$$.lineWidth=3,$context$$.strokeStyle=this.rgbToHex($markingcolor$$),$context$$.closePath(),$context$$.stroke());$context$$.beginPath();0<$markingSize$$&&("house"==$form$$&&($centerY$$-=.14*$centerY$$),"house_i"==$form$$&&($centerY$$+=.23*$centerY$$),"triangle"==$form$$&&($centerY$$-=.18*$centerY$$),"triangle_i"==
$form$$&&($centerY$$+=.3*$centerY$$));$add_for_marking_new_center$$=this.drawForm($form$$,$centerX$$,$centerY$$,$context$$,$size$$,3);null!=$add_for_marking_new_center$$&&($centerX$$=$add_for_marking_new_center$$[0],$centerY$$=$add_for_marking_new_center$$[1]);$active$$||($color$jscomp$5_contrast_color$$="rgba(120,120,120,1)",$hex_color$$="rgba(220,220,220,1)");$outline_only$$||($context$$.fillStyle=$hex_color$$,$context$$.fill(),$context$$.font=$fontsize$$+"px Arial",$context$$.fillStyle=$color$jscomp$5_contrast_color$$,
$context$$.textAlign="center",$context$$.textBaseline="middle",$context$$.fillText($label$$,$centerX$$,$centerY$$));$context$$.lineWidth=3;$context$$.strokeStyle=$color$jscomp$5_contrast_color$$;$context$$.closePath();$context$$.stroke();return $canvas$$};this.drawForm=function $this$drawForm$($form$$,$centerX$$,$centerY$$,$context$$,$size$$,$strokewidth$$){var $newcenter$$=null;switch($form$$){case "circle":this.drawCircle($centerX$$,$centerY$$,$context$$,$size$$,$strokewidth$$);break;case "rect":this.drawRect($centerX$$,
$centerY$$,$context$$,$size$$,$strokewidth$$);break;case "triangle":$newcenter$$=this.drawTriangle($centerX$$,$centerY$$,$context$$,$size$$,$strokewidth$$);break;case "triangle_i":$newcenter$$=this.drawTriangle_i($centerX$$,$centerY$$,$context$$,$size$$,$strokewidth$$);break;case "hex_flat":this.drawHex($centerX$$,$centerY$$,$context$$,$size$$,$strokewidth$$,!0);break;case "hex_pointy":this.drawHex($centerX$$,$centerY$$,$context$$,$size$$,$strokewidth$$,!1);break;case "rhomb":this.drawRhomb($centerX$$,
$centerY$$,$context$$,$size$$,$strokewidth$$);break;case "house":$newcenter$$=this.drawHouse($centerX$$,$centerY$$,$context$$,$size$$,$strokewidth$$);break;case "house_i":$newcenter$$=this.drawHouse_i($centerX$$,$centerY$$,$context$$,$size$$,$strokewidth$$);break;case "rectcutoffbr":this.drawCutOffRectBR($centerX$$,$centerY$$,$context$$,$size$$,$strokewidth$$);break;case "rectcutofftr":this.drawCutOffRectTR($centerX$$,$centerY$$,$context$$,$size$$,$strokewidth$$);break;case "rectcutofftl":this.drawCutOffRectTL($centerX$$,
$centerY$$,$context$$,$size$$,$strokewidth$$);break;case "rectcutoffbl":this.drawCutOffRectBL($centerX$$,$centerY$$,$context$$,$size$$,$strokewidth$$)}return $newcenter$$};this.getImageFontSize=function $this$getImageFontSize$($size$$,$label$$,$form$$){var $fsize$$;if("circle"==$form$$||"rect"==$form$$||"rectcutoffbr"==$form$$||"rectcutofftr"==$form$$||"rectcutofftl"==$form$$||"rectcutoffbl"==$form$$)$size$$==symbolSize&&1==$label$$.length&&($fsize$$=12),$size$$==symbolSize&&2==$label$$.length&&($fsize$$=
10),$size$$>symbolSize&&1==$label$$.length&&($fsize$$=15),$size$$>symbolSize&&2==$label$$.length&&($fsize$$=13);if("triangle"==$form$$||"triangle_i"==$form$$)$size$$==symbolSize&&1==$label$$.length&&($fsize$$=8.5),$size$$==symbolSize&&2==$label$$.length&&($fsize$$=7.5),$size$$>symbolSize&&1==$label$$.length&&($fsize$$=13),$size$$>symbolSize&&2==$label$$.length&&($fsize$$=9);if("hex_flat"==$form$$||"hex_pointy"==$form$$)$size$$==symbolSize&&1==$label$$.length&&($fsize$$=11.5),$size$$==symbolSize&&
2==$label$$.length&&($fsize$$=9.5),$size$$>symbolSize&&1==$label$$.length&&($fsize$$=14.5),$size$$>symbolSize&&2==$label$$.length&&($fsize$$=12.5);"rhomb"==$form$$&&($size$$==symbolSize&&1==$label$$.length&&($fsize$$=9.5),$size$$==symbolSize&&2==$label$$.length&&($fsize$$=7.5),$size$$>symbolSize&&1==$label$$.length&&($fsize$$=12.5),$size$$>symbolSize&&2==$label$$.length&&($fsize$$=10.5));if("house"==$form$$||"house_i"==$form$$)$size$$==symbolSize&&1==$label$$.length&&($fsize$$=10.5),$size$$==symbolSize&&
2==$label$$.length&&($fsize$$=8.5),$size$$>symbolSize&&1==$label$$.length&&($fsize$$=13),$size$$>symbolSize&&2==$label$$.length&&($fsize$$=12);return $fsize$$*symbolRescaleFactor};this.drawCircle=function $this$drawCircle$($centerX$$,$centerY$$,$context$$,$size$$,$strokewidth$$){$context$$.arc($centerX$$,$centerY$$,$size$$/2-$strokewidth$$/2,0,2*Math.PI,!1)};this.drawRect=function $this$drawRect$($centerX$$,$centerY$$,$context$$,$size$$,$strokewidth$$){$context$$.moveTo($centerX$$-$size$$/2+$strokewidth$$/
2,$centerY$$-$size$$/2+$strokewidth$$/2);$context$$.lineTo($centerX$$+$size$$/2-$strokewidth$$/2,$centerY$$-$size$$/2+$strokewidth$$/2);$context$$.lineTo($centerX$$+$size$$/2-$strokewidth$$/2,$centerY$$+$size$$/2-$strokewidth$$/2);$context$$.lineTo($centerX$$-$size$$/2+$strokewidth$$/2,$centerY$$+$size$$/2-$strokewidth$$/2);$context$$.closePath()};this.drawRhomb=function $this$drawRhomb$($centerX$$,$centerY$$,$context$$,$size$$,$strokewidth$$){$context$$.moveTo($centerX$$-$size$$/2+$strokewidth$$/
2,$centerY$$);$context$$.lineTo($centerX$$,$centerY$$-$size$$/2+$strokewidth$$/2);$context$$.lineTo($centerX$$+$size$$/2-$strokewidth$$/2,$centerY$$);$context$$.lineTo($centerX$$,$centerY$$+$size$$/2-$strokewidth$$/2);$context$$.closePath()};this.drawTriangle=function $this$drawTriangle$($centerX$$,$centerY$$,$context$$,$size$$,$strokewidth$$){$context$$.moveTo($centerX$$,$centerY$$-$size$$/2+$strokewidth$$/2);$context$$.lineTo($centerX$$+$size$$/2-$strokewidth$$/2,$centerY$$+$size$$/2-$strokewidth$$/
2);$context$$.lineTo($centerX$$-$size$$/2+$strokewidth$$/2,$centerY$$+$size$$/2-$strokewidth$$/2);$context$$.closePath();return[($centerX$$+$centerX$$+$size$$/2-$strokewidth$$/2+$centerX$$-$size$$/2+$strokewidth$$/2)/3,($centerY$$-$size$$/2+$strokewidth$$/2+$centerY$$+$size$$/2-$strokewidth$$/2+$centerY$$+$size$$/2-$strokewidth$$/2)/3]};this.drawTriangle_i=function $this$drawTriangle_i$($centerX$$,$centerY$$,$context$$,$size$$,$strokewidth$$){$context$$.moveTo($centerX$$,$centerY$$+$size$$/2-$strokewidth$$/
2);$context$$.lineTo($centerX$$-$size$$/2+$strokewidth$$/2,$centerY$$-$size$$/2+$strokewidth$$/2);$context$$.lineTo($centerX$$+$size$$/2-$strokewidth$$/2,$centerY$$-$size$$/2+$strokewidth$$/2);$context$$.closePath();return[($centerX$$+$centerX$$-$size$$/2+$strokewidth$$/2+$centerX$$+$size$$/2-$strokewidth$$/2)/3,($centerY$$+$size$$/2-$strokewidth$$/2+$centerY$$-$size$$/2+$strokewidth$$/2+$centerY$$-$size$$/2+$strokewidth$$/2)/3]};this.drawHouse=function $this$drawHouse$($centerX$$,$centerY$$,$add_context$$,
$size$$,$strokewidth$$){$add_context$$.moveTo($centerX$$,$centerY$$-$size$$/2+$strokewidth$$/2);$add_context$$.lineTo($centerX$$+$size$$/2-$strokewidth$$/2,$centerY$$);$add_context$$.lineTo($centerX$$+$size$$/2-$strokewidth$$/2,$centerY$$+$size$$/2-$strokewidth$$/2);$add_context$$.lineTo($centerX$$-$size$$/2+$strokewidth$$/2,$centerY$$+$size$$/2-$strokewidth$$/2);$add_context$$.lineTo($centerX$$-$size$$/2+$strokewidth$$/2,$centerY$$);$add_context$$.closePath();$add_context$$=.15;34<$size$$&&($add_context$$=
.22);return[$centerX$$,$centerY$$+$add_context$$*$centerY$$]};this.drawHouse_i=function $this$drawHouse_i$($centerX$$,$centerY$$,$add$jscomp$1_context$$,$size$$,$strokewidth$$){$add$jscomp$1_context$$.moveTo($centerX$$,$centerY$$+$size$$/2-$strokewidth$$/2);$add$jscomp$1_context$$.lineTo($centerX$$-$size$$/2+$strokewidth$$/2,$centerY$$);$add$jscomp$1_context$$.lineTo($centerX$$-$size$$/2+$strokewidth$$/2,$centerY$$-$size$$/2+$strokewidth$$/2);$add$jscomp$1_context$$.lineTo($centerX$$+$size$$/2-$strokewidth$$/
2,$centerY$$-$size$$/2+$strokewidth$$/2);$add$jscomp$1_context$$.lineTo($centerX$$+$size$$/2-$strokewidth$$/2,$centerY$$);$add$jscomp$1_context$$.closePath();$add$jscomp$1_context$$=-.15;34<$size$$&&($add$jscomp$1_context$$=-.22);return[$centerX$$,$centerY$$+$add$jscomp$1_context$$*$centerY$$]};this.drawCutOffRectBR=function $this$drawCutOffRectBR$($centerX$$,$centerY$$,$context$$,$size$$,$strokewidth$$){$context$$.moveTo($centerX$$-$size$$/2+$strokewidth$$/2,$centerY$$-$size$$/2+$strokewidth$$/2);
$context$$.lineTo($centerX$$+$size$$/2-$strokewidth$$/2,$centerY$$-$size$$/2+$strokewidth$$/2);$context$$.lineTo($centerX$$+$size$$/2-$strokewidth$$/2,$centerY$$+$size$$/2-$strokewidth$$/2-$size$$/2*.35);$context$$.lineTo($centerX$$+$size$$/2-$strokewidth$$/2-$size$$/2*.35,$centerY$$+$size$$/2-$strokewidth$$/2);$context$$.lineTo($centerX$$-$size$$/2+$strokewidth$$/2,$centerY$$+$size$$/2-$strokewidth$$/2);$context$$.closePath()};this.drawCutOffRectTR=function $this$drawCutOffRectTR$($centerX$$,$centerY$$,
$context$$,$size$$,$strokewidth$$){$context$$.moveTo($centerX$$-$size$$/2+$strokewidth$$/2,$centerY$$-$size$$/2+$strokewidth$$/2);$context$$.lineTo($centerX$$+$size$$/2-$strokewidth$$/2-$size$$/2*.35,$centerY$$-$size$$/2+$strokewidth$$/2);$context$$.lineTo($centerX$$+$size$$/2-$strokewidth$$/2,$centerY$$-$size$$/2+$strokewidth$$/2+$size$$/2*.35);$context$$.lineTo($centerX$$+$size$$/2-$strokewidth$$/2,$centerY$$+$size$$/2-$strokewidth$$/2);$context$$.lineTo($centerX$$-$size$$/2+$strokewidth$$/2,$centerY$$+
$size$$/2-$strokewidth$$/2);$context$$.closePath()};this.drawCutOffRectTL=function $this$drawCutOffRectTL$($centerX$$,$centerY$$,$context$$,$size$$,$strokewidth$$){$context$$.moveTo($centerX$$-$size$$/2+$strokewidth$$/2+$size$$/2*.35,$centerY$$-$size$$/2+$strokewidth$$/2);$context$$.lineTo($centerX$$+$size$$/2-$strokewidth$$/2,$centerY$$-$size$$/2+$strokewidth$$/2);$context$$.lineTo($centerX$$+$size$$/2-$strokewidth$$/2,$centerY$$+$size$$/2-$strokewidth$$/2);$context$$.lineTo($centerX$$-$size$$/2+
$strokewidth$$/2,$centerY$$+$size$$/2-$strokewidth$$/2);$context$$.lineTo($centerX$$-$size$$/2+$strokewidth$$/2,$centerY$$-$size$$/2+$strokewidth$$/2+$size$$/2*.35);$context$$.closePath()};this.drawCutOffRectBL=function $this$drawCutOffRectBL$($centerX$$,$centerY$$,$context$$,$size$$,$strokewidth$$){$context$$.moveTo($centerX$$-$size$$/2+$strokewidth$$/2,$centerY$$-$size$$/2+$strokewidth$$/2);$context$$.lineTo($centerX$$+$size$$/2-$strokewidth$$/2,$centerY$$-$size$$/2+$strokewidth$$/2);$context$$.lineTo($centerX$$+
$size$$/2-$strokewidth$$/2,$centerY$$+$size$$/2-$strokewidth$$/2);$context$$.lineTo($centerX$$-$size$$/2+$strokewidth$$/2+$size$$/2*.35,$centerY$$+$size$$/2-$strokewidth$$/2);$context$$.lineTo($centerX$$-$size$$/2+$strokewidth$$/2,$centerY$$+$size$$/2-$strokewidth$$/2-$size$$/2*.35);$context$$.closePath()};this.drawHex=function $this$drawHex$($centerX$$,$centerY$$,$context$$,$size$$,$strokewidth$$,$flat$$){$centerX$$=this.calculateHexPoints($centerX$$,$centerY$$,$size$$/2,$flat$$);$flat$$?($context$$.moveTo($centerX$$[0].x-
$strokewidth$$/2,$centerX$$[0].y),$context$$.lineTo($centerX$$[1].x,$centerX$$[1].y-$strokewidth$$/2),$context$$.lineTo($centerX$$[2].x,$centerX$$[2].y-$strokewidth$$/2),$context$$.lineTo($centerX$$[3].x+$strokewidth$$/2,$centerX$$[3].y),$context$$.lineTo($centerX$$[4].x,$centerX$$[4].y+$strokewidth$$/2),$context$$.lineTo($centerX$$[5].x,$centerX$$[5].y+$strokewidth$$/2)):($context$$.moveTo($centerX$$[0].x,$centerX$$[0].y-$strokewidth$$/2),$context$$.lineTo($centerX$$[1].x-$strokewidth$$/2,$centerX$$[1].y),
$context$$.lineTo($centerX$$[2].x-$strokewidth$$/2,$centerX$$[2].y),$context$$.lineTo($centerX$$[3].x,$centerX$$[3].y+$strokewidth$$/2),$context$$.lineTo($centerX$$[4].x+$strokewidth$$/2,$centerX$$[4].y),$context$$.lineTo($centerX$$[5].x+$strokewidth$$/2,$centerX$$[5].y));$context$$.closePath()};this.calculateHexPoints=function $this$calculateHexPoints$($x$$,$y$$,$r$$,$flat$$){for(var $result$$=[],$i$$=0;6>$i$$;$i$$++){var $point$$={x:0,y:0};$flat$$?($point$$.x=$x$$+$r$$*Math.cos(2*Math.PI*$i$$/6),
$point$$.y=$y$$+$r$$*Math.sin(2*Math.PI*$i$$/6)):($point$$.x=$x$$+$r$$*Math.sin(2*Math.PI*$i$$/6),$point$$.y=$y$$+$r$$*Math.cos(2*Math.PI*$i$$/6));$result$$.push($point$$)}return $result$$};this.createSymbolURL=function $this$createSymbolURL$($indexArray_symbolInfo$$,$canvas$jscomp$3_size$$,$markingSize$$,$active$$){null==$canvas$jscomp$3_size$$&&($canvas$jscomp$3_size$$=symbolSize);null==$markingSize$$&&($markingSize$$=0);void 0===$active$$&&($active$$=!0);var $key$$=this.createSymbolKey($indexArray_symbolInfo$$,
$canvas$jscomp$3_size$$,$markingSize$$,$active$$),$bufferedVal$$=this.symbolBuffer.get($key$$);if(void 0!==$bufferedVal$$)return $bufferedVal$$;$indexArray_symbolInfo$$=$colorScheme$$.getFeatureCombination($indexArray_symbolInfo$$,$markingSize$$*symbolRescaleFactor);$canvas$jscomp$3_size$$=this.createMarkerImage($canvas$jscomp$3_size$$,$indexArray_symbolInfo$$.letter,$indexArray_symbolInfo$$.color,$indexArray_symbolInfo$$.shape,!1,$markingSize$$,$indexArray_symbolInfo$$.mcolor,$active$$);this.symbolBuffer.set($key$$,
$canvas$jscomp$3_size$$);return $canvas$jscomp$3_size$$};this.createSymbolKey=function $this$createSymbolKey$($indexArray$$,$size$$,$markingSize$$,$active$$){return $indexArray$$.join(".")+"."+$size$$+"."+$markingSize$$+"."+($active$$?"1":"0")};this.getLogSizeForCount=function $this$getLogSizeForCount$($count$$){return 1==$count$$?symbolSize:2*Math.round($a$$*Math.log($count$$)+$b$$)+1};this.createSymbolURLForMainIndex=function $this$createSymbolURLForMainIndex$($mainIndex$$,$size$$){null==$size$$&&
($size$$=symbolSize);var $symbolInfo$$=$colorScheme$$.getSingleFeature(features_classes.main,$mainIndex$$);return this.createMarkerImage($size$$,"",[119,119,119],$symbolInfo$$.shape,!0,0,null,!0)};this.createColorURL=function $this$createColorURL$($color$jscomp$6_index$$){$color$jscomp$6_index$$=$colorScheme$$.getPolygonColor($color$jscomp$6_index$$%$numCols$$);return this.createMarkerImage(symbolSize,"",$color$jscomp$6_index$$,"circle",!1,0,null,!0)};this.createSymbolURLForMarking=function $this$createSymbolURLForMarking$($mainIndex$$,
$colorIndex$$){var $symbolInfo$$=$colorScheme$$.getSingleFeature(features_classes.main,$mainIndex$$);return this.createMarkerImage(symbolSize,"",[119,119,119],$symbolInfo$$.shape,!0,markingSize,symbolManager.getMarkingColor($colorIndex$$),!0)};this.getColorStringForSymbol=function $this$getColorStringForSymbol$($colorArray$jscomp$2_index$$){$colorArray$jscomp$2_index$$=$colorScheme$$.getFeatureCombination($colorArray$jscomp$2_index$$,0).color;return"#"+decimalToHex($colorArray$jscomp$2_index$$[0])+
decimalToHex($colorArray$jscomp$2_index$$[1])+decimalToHex($colorArray$jscomp$2_index$$[2])};this.createHighlightedIndex=function $this$createHighlightedIndex$($index$$){return $index$$};this.getNumPolygonColors=function $this$getNumPolygonColors$(){return $numCols$$};this.getNumMarkingColors=function $this$getNumMarkingColors$(){return $numAdd$$}}
function ColorScheme($main$$,$sub$$,$add$$,$colors$$){function $computeRange$$($arr$$){return 0==$arr$$.length?[]:1==$arr$$.length?$arr$$[0].values.map(function($e$$){return[$e$$]}):$arr$$[0].independent?$cartesianProductFlat$$($arr$$[0].values,$computeRange$$($arr$$.slice(1))):$combineArrays$$($arr$$)}function $combineArrays$$($arr$$){for(var $countLongest$$=0,$numberFeatures$$=$arr$$.length,$i$$=0;$i$$<$numberFeatures$$;$i$$++){var $len$jscomp$10_res$$=$arr$$[$i$$].values.length;$len$jscomp$10_res$$>
$countLongest$$&&($countLongest$$=$len$jscomp$10_res$$)}$len$jscomp$10_res$$=Array($countLongest$$);for($i$$=0;$i$$<$countLongest$$;$i$$++){for(var $element$$=Array($numberFeatures$$),$j$$=0;$j$$<$numberFeatures$$;$j$$++){var $vals$$=$arr$$[$j$$].values;$element$$[$j$$]=null==$vals$$[$i$$]?$vals$$[$vals$$.length-$arr$$[$j$$].overflow+($i$$-$vals$$.length)%$arr$$[$j$$].overflow]:$vals$$[$i$$]}$len$jscomp$10_res$$[$i$$]=$element$$}return $len$jscomp$10_res$$}function $cartesianProductFlat$$($arr1$$,
$arr2$$){for(var $l1$$=$arr1$$.length,$l2$$=$arr2$$.length,$res$$=Array($l1$$*$l2$$),$i$$=0;$i$$<$l1$$;$i$$++)for(var $j$$=0;$j$$<$l2$$;$j$$++)$res$$[$i$$*$l2$$+$j$$]=[$arr1$$[$i$$]].concat($arr2$$[$j$$]);return $res$$}var $ranges$$=[$computeRange$$($main$$),$computeRange$$($sub$$),$computeRange$$($add$$)],$descriptions$$=[$main$$,$sub$$,$add$$];this.getSingleFeature=function $this$getSingleFeature$($fclass$$,$index$$){for(var $res$$={},$desc$$=$descriptions$$[$fclass$$],$i$$=0;$i$$<$desc$$.length;$i$$++)$res$$[$desc$$[$i$$].name]=
$ranges$$[$fclass$$][$index$$][$i$$];return $res$$};this.getFeatureCombination=function $this$getFeatureCombination$($indexArray$$,$markingSize$$){for(var $res$$={},$j$$=0;$j$$<$indexArray$$.length;$j$$++)for(var $desc$$=$descriptions$$[$j$$],$i$$=0;$i$$<$desc$$.length;$i$$++)$res$$[$desc$$[$i$$].name]=$ranges$$[$j$$][$indexArray$$[$j$$]][$i$$];0<$markingSize$$&&($res$$.msize=$markingSize$$*markingScaleFunction($res$$));return $res$$};this.getNumCombinations=function $this$getNumCombinations$($fclass$$){return $ranges$$[$fclass$$].length};
this.getNumPolygonColors=function $this$getNumPolygonColors$(){return $colors$$.length};this.getPolygonColor=function $this$getPolygonColor$($index$$){return $colors$$[$index$$]};this.exportScheme=function $this$exportScheme$(){for(var $result$$={main:[]},$i$$=0;$i$$<$main$$.length;$i$$++)$result$$.main.push($main$$[$i$$].exportFeature());$result$$.sub=[];for($i$$=0;$i$$<$sub$$.length;$i$$++)$result$$.sub.push($sub$$[$i$$].exportFeature());$result$$.add=[];for($i$$=0;$i$$<$add$$.length;$i$$++)$result$$.add.push($add$$[$i$$].exportFeature());
$result$$.colors=$colors$$;return JSON.stringify($result$$)}}function Feature($name$$,$values$$,$independent$$,$overflow$$){this.name=$name$$;this.values=$values$$;this.overflow=null==$overflow$$?$values$$.length:$overflow$$;this.independent=null==$independent$$?!1:$independent$$;this.exportFeature=function $this$exportFeature$(){return{name:this.name,values:this.values,overflow:this.overflow,independent:this.independent}}};function CommentManager(){function $commentAjax$$($mode$$,$content$$,$callback$$){jQuery.post(ajaxurl,{action:"im_u",namespace:"comments",mode:$mode$$,content:$content$$,lang:$currentLang$$,key:$currentKey$$,name:PATH.mapName,_wpnonce:jQuery("#_wpnonce_comments").val()},function($response$$){$callback$$&&$callback$$($response$$)})}var $comments$$=new Map,$commentCount$$=new Map,$currentLang$$,$currentKey$$,$editMode$$=!1,$canEditComment$$=!1;this.showCommentMenu=function $this$showCommentMenu$($categoryID$$,
$elementID$$){return!0};this.showContent=function $this$showContent$(){var $result$$="";$comments$$.forEach(function($e$$){$result$$+=JSON.stringify($e$$)+"\n"});alert($result$$)};this.addComment=function $this$addComment$($key$$,$commentTranslations$$){var $count$$=$commentCount$$.get($key$$);void 0===$count$$?($comments$$.set($key$$,$commentTranslations$$),$commentCount$$.set($key$$,1)):$commentCount$$.set($key$$,$count$$+1)};this.removeComment=function $this$removeComment$($key$$){var $count$$=
$commentCount$$.get($key$$);void 0!==$count$$&&(1===$count$$?($comments$$["delete"]($key$$),$commentCount$$["delete"]($key$$)):$commentCount$$.set($key$$,$count$$-1))};this.getComment=function $this$getComment$($key$$){return $comments$$.get($key$$)};this.updateComment=function $this$updateComment$($key$$,$lang$$,$comment$$){var $commentTranslations$$=$comments$$.get($key$$);void 0===$commentTranslations$$?""!==$comment$$&&($commentTranslations$$={},$commentTranslations$$[$lang$$]=$comment$$,$comments$$.set($key$$,
$commentTranslations$$),$commentCount$$.set($key$$,1)):""==$comment$$?(delete $commentTranslations$$[$lang$$],jQuery.isEmptyObject($commentTranslations$$)&&($comments$$["delete"]($key$$),$commentCount$$["delete"]($key$$))):$commentTranslations$$[$lang$$]=$comment$$};this.hasComment=function $this$hasComment$($key$$){return $comments$$.has($key$$)};this.getCurrentCommentText=function $this$getCurrentCommentText$(){return $comments$$.get($currentKey$$)[$currentLang$$]};this.openCommentWindow=function $this$openCommentWindow$($category$$,
$commentTranslations$jscomp$3_key$$,$edit$$){var $thisObject$$=this;$canEditComment$$=this.showCommentMenu($category$$,$commentTranslations$jscomp$3_key$$);var $currentLanguageActive_indexCurrentLang$$=!1;$currentKey$$=$commentTranslations$jscomp$3_key$$;$currentLang$$=PATH.language;$category$$=jQuery('<span class="im_concept_hl">'+TRANSLATIONS.COMMENT+'</span><span class="im_name_hl">'+categoryManager.getCategoryName($category$$)+" <span>"+categoryManager.getElementName($category$$,$commentTranslations$jscomp$3_key$$)+
"</span></span>");jQuery("#commentWindow .modal-title").empty().append($category$$);jQuery("#commentTabs").tabs("disable");$commentTranslations$jscomp$3_key$$=this.getComment($commentTranslations$jscomp$3_key$$);for(var $lang$$ in $commentTranslations$jscomp$3_key$$)this.showTab($lang$$,$commentTranslations$jscomp$3_key$$[$lang$$],$edit$$),$lang$$==$currentLang$$&&($currentLanguageActive_indexCurrentLang$$=!0);$currentLanguageActive_indexCurrentLang$$||($edit$$?this.showTab($currentLang$$,"",$edit$$):
this.showTab($currentLang$$,"<font color='red'>"+TRANSLATIONS.COMMENT_LANG_MISSING+"</font>",$edit$$));$currentLanguageActive_indexCurrentLang$$=jQuery('#commentTabs a[href="#ctabs-'+$currentLang$$+'"]').parent().index();jQuery("#commentTabs").tabs("option","active",$currentLanguageActive_indexCurrentLang$$);this.commentTabOpened(jQuery("#commentContent-"+$currentLang$$),$edit$$);jQuery("#commentWindow").modal("show");jQuery("#commentWindow .close").off().on("click",function(){$thisObject$$.beforeClose.call($thisObject$$)&&
jQuery("#commentWindow").modal("hide")})};this.showTab=function $this$showTab$($lang$$,$comment$$,$edit$$){null==$comment$$&&($comment$$="");jQuery("#commentContent-"+$lang$$).html($comment$$);jQuery("#commentTabs").tabs("enable","#ctabs-"+$lang$$);$edit$$?(jQuery("#saveComment-"+$lang$$).css("display","inline"),jQuery("#editComment-"+$lang$$).css("display","none"),jQuery("#commentContent-"+$lang$$).html("<textarea id='commentEditField' style='width: 95%; height: 150pt;'>"+$comment$$+"</textarea>"),
jQuery("#commentContent-"+$lang$$+" textarea").focus()):(jQuery("#saveComment-"+$lang$$).css("display","none"),$canEditComment$$?jQuery("#editComment-"+$lang$$).css("display","inline"):jQuery("#editComment-"+$lang$$).css("display","none"))};this.editComment=function $this$editComment$(){$commentAjax$$("get",null,function($response$$){"§§§LOCKED§§§"==$response$$?alert(TRANSLATIONS.COMMENT_LOCKED):(commentManager.showTab($currentLang$$,JSON.parse($response$$),!0),$editMode$$=!0)})};this.saveComment=
function $this$saveComment$(){var $thisObject$$=this;$commentAjax$$("update",jQuery("#commentEditField").val(),function($response$$){$thisObject$$.commentTabClosed(jQuery("#commentContent-"+$currentLang$$),!0);commentManager.updateComment($currentKey$$,$currentLang$$,$response$$);legend.update();$editMode$$=!1;""==$response$$?jQuery("#commentWindow").modal("hide"):(jQuery("#commentContent-"+$currentLang$$).html($response$$),jQuery("#saveComment-"+$currentLang$$).css("display","none"),jQuery("#editComment-"+
$currentLang$$).css("display","inline"),$thisObject$$.commentTabOpened(jQuery("#commentContent-"+$currentLang$$),!1))})};this.beforeTabChange=function $this$beforeTabChange$($event$$,$ui$$){if($editMode$$){if(confirm(TRANSLATIONS.SAVE_CHANGES))return!1;var $comm_id$$=$comments$$.get($currentKey$$)[$currentLang$$];null==$comm_id$$?this.showTab($currentLang$$,"<font color='red'>"+TRANSLATIONS.COMMENT_LANG_MISSING+"</font>",!1):this.showTab($currentLang$$,$comm_id$$,!1);$editMode$$=!1;$commentAjax$$("removeLock",
"")}jQuery("#commentWindow").is(":visible")&&this.commentTabClosed(jQuery("#commentContent-"+$currentLang$$),$editMode$$);$comm_id$$=$ui$$.newPanel.attr("id");$currentLang$$=$comm_id$$.substring($comm_id$$.length-2);this.commentTabOpened(jQuery("#commentContent-"+$currentLang$$),$editMode$$);return!0};this.beforeClose=function $this$beforeClose$(){if($editMode$$){if(confirm(TRANSLATIONS.SAVE_CHANGES))return!1;$editMode$$=!1;$commentAjax$$("removeLock","")}this.commentTabClosed(jQuery("#commentContent-"+
$currentLang$$),$editMode$$);return!0};this.commentTabOpened=function $this$commentTabOpened$($element$$,$edit$$){};this.commentTabClosed=function $this$commentTabClosed$($element$$,$edit$$){}};function OptionManager(){this.options={};this.state={};this.editMode=!1;this.inEditMode=function $this$inEditMode$(){return this.editMode};this.changeHistory=[];this.addChange=function $this$addChange$($change$$){this.changeHistory.push($change$$);1==this.changeHistory.length&&mapInterface.updateUndoComponent(TRANSLATIONS.UNDO_CHANGES,!0,!0)};this.redoHistory=function $this$redoHistory$(){for(var $len$$=this.changeHistory.length,$i$$=0;$i$$<$len$$;$i$$++)this.undoChange(!0)};this.undoChange=function $this$undoChange$($undoAll$$){0<
this.changeHistory.length&&(this.changeHistory.pop().undo($undoAll$$),0==this.changeHistory.length&&mapInterface.updateUndoComponent(TRANSLATIONS.LEAVE_EDIT_MODE,!1,!1))};this.getAllOptionValues=function $this$getAllOptionValues$(){var $res$$={},$key$$;for($key$$ in this.options)this.options[$key$$].isSaved()&&($res$$[$key$$]=this.state[$key$$]);return $res$$};this.getChangeList=function $this$getChangeList$(){for(var $infos_len$$=this.changeHistory.length,$list$$=[],$i$$=0;$i$$<$infos_len$$;$i$$++)$list$$=
$list$$.concat(this.changeHistory[$i$$].getCommitInformation());$infos_len$$={};for($i$$=0;$i$$<$list$$.length;$i$$++)"markerMoved"==$list$$[$i$$].operation&&($infos_len$$[$list$$[$i$$].id]||($infos_len$$[$list$$[$i$$].id]=[]),$infos_len$$[$list$$[$i$$].id].push($i$$));var $changedData_value$$={};for($i$$=0;$i$$<$list$$.length;$i$$++)"dataChanged"==$list$$[$i$$].operation&&($changedData_value$$[$list$$[$i$$].id]||($changedData_value$$[$list$$[$i$$].id]=[]),$changedData_value$$[$list$$[$i$$].id].push($i$$));
for(var $id$jscomp$16_j$$ in $changedData_value$$){var $dataOld$$=$list$$[$changedData_value$$[$id$jscomp$16_j$$][0]].valuesOld,$dataNew$$=$list$$[$changedData_value$$[$id$jscomp$16_j$$][0]].valuesNew;for($i$$=1;$i$$<$changedData_value$$[$id$jscomp$16_j$$].length;$i$$++){for(var $changeOps_did_indexList_indexListC$$ in $list$$[$changedData_value$$[$id$jscomp$16_j$$][$i$$]].valuesOld)$dataOld$$[$changeOps_did_indexList_indexListC$$]||($dataOld$$[$changeOps_did_indexList_indexListC$$]=$list$$[$changedData_value$$[$id$jscomp$16_j$$][$i$$]].valuesOld[$changeOps_did_indexList_indexListC$$]);
$dataNew$$=Object.assign($dataNew$$,$list$$[$changedData_value$$[$id$jscomp$16_j$$][$i$$]].valuesNew)}}for($i$$=0;$i$$<$list$$.length;$i$$++)if("overlayAdded"==$list$$[$i$$].operation&&($infos_len$$[$list$$[$i$$].id]&&delete $infos_len$$[$list$$[$i$$].id],$changeOps_did_indexList_indexListC$$=$changedData_value$$[$list$$[$i$$].id])){for($id$jscomp$16_j$$=0;$id$jscomp$16_j$$<$changeOps_did_indexList_indexListC$$.length;$id$jscomp$16_j$$++)$list$$[$i$$].valuesNew=Object.assign($list$$[$i$$].valuesNew,
$list$$[$changeOps_did_indexList_indexListC$$[$id$jscomp$16_j$$]].valuesNew);delete $changedData_value$$[$list$$[$i$$].id]}$id$jscomp$16_j$$=[];for($i$$=0;$i$$<$list$$.length;$i$$++)"markerMoved"==$list$$[$i$$].operation?($changeOps_did_indexList_indexListC$$=$infos_len$$[$list$$[$i$$].id],void 0!=$changeOps_did_indexList_indexListC$$&&$i$$==$changeOps_did_indexList_indexListC$$[$changeOps_did_indexList_indexListC$$.length-1]&&($list$$[$i$$].oldPosition=$list$$[$changeOps_did_indexList_indexListC$$[0]].oldPosition,
$id$jscomp$16_j$$.push($list$$[$i$$]))):"dataChanged"==$list$$[$i$$].operation?($changeOps_did_indexList_indexListC$$=$changedData_value$$[$list$$[$i$$].id],void 0!=$changeOps_did_indexList_indexListC$$&&0==$changeOps_did_indexList_indexListC$$.indexOf($i$$)&&$id$jscomp$16_j$$.push($list$$[$i$$])):$id$jscomp$16_j$$.push($list$$[$i$$]);$list$$=$id$jscomp$16_j$$;for($i$$=0;$i$$<$list$$.length;$i$$++)if("overlayAdded"==$list$$[$i$$].operation||"dataChanged"==$list$$[$i$$].operation)for($infos_len$$=
categoryManager.getEditFields($list$$[$i$$].category,$list$$[$i$$].type),$id$jscomp$16_j$$=0;$id$jscomp$16_j$$<$infos_len$$.length;$id$jscomp$16_j$$++)if($infos_len$$[$id$jscomp$16_j$$].name in $list$$[$i$$].valuesNew&&($changedData_value$$=$list$$[$i$$].valuesNew[$infos_len$$[$id$jscomp$16_j$$].name],$infos_len$$[$id$jscomp$16_j$$].required&&$infos_len$$[$id$jscomp$16_j$$].type.isEmpty($changedData_value$$)))throw TRANSLATIONS.FIELD_IS_EMPTY.replace("%s",$infos_len$$[$id$jscomp$16_j$$].name);return $list$$};
this.categoryForAdding=-1;this.addOption=function $this$addOption$($key$$,$option$$){this.options[$key$$]=$option$$};this.setOption=function $this$setOption$($key$jscomp$67_option$$,$value$$,$details$$){this.state[$key$jscomp$67_option$$]=$value$$;$key$jscomp$67_option$$=this.options[$key$jscomp$67_option$$];null!=$key$jscomp$67_option$$&&$key$jscomp$67_option$$.applyState($value$$,$details$$)};this.getOptionState=function $this$getOptionState$($key$$){return this.state[$key$$]};this.setOptionState=
function $this$setOptionState$($key$$,$val$$){this.state[$key$$]=$val$$};this.optionsEnabled=!0;this.enableOptions=function $this$enableOptions$($val$$){if(this.optionsEnabled!=$val$$){this.optionsEnabled=$val$$;for(var $key$$ in this.options)this.options[$key$$].setEnabled($val$$)}};this.setEditMode=function $this$setEditMode$($activate$$){if(this.editMode!=$activate$$){jQuery("#IM_Syn_Map_Cotainer").toggle(!$activate$$);if($activate$$){var $cQuantify_options$$=symbolClusterer.checkQuantify();!1!==
$cQuantify_options$$&&(symbolClusterer.toggleQuantifyMode(),symbolClusterer.quantify($cQuantify_options$$,!1));mapInterface.removeOptionElement();mapInterface.addUndoComponent({name:TRANSLATIONS.LEAVE_EDIT_MODE,img:PATH.Delete,callback:function(){this.redoHistory();this.setOption("editMode",!1)}.bind(this),show:!0},{name:TRANSLATIONS.UNDO_CHANGE,img:PATH.Undo,callback:this.undoChange.bind(this,!1),show:!1},{name:TRANSLATIONS.COMMIT_CHANGES,img:PATH.Commit,callback:function(){try{var $changeList$$=
this.getChangeList()}catch($e$$){alert($e$$);return}jQuery.post(ajaxurl,{action:"im_u",namespace:"edit_mode",changes:$changeList$$},function($response$$){alert($response$$);optionManager.redoHistory();optionManager.setOption("editMode",!1)})}.bind(this),show:!1});$cQuantify_options$$=[];for(var $i$$=0;$i$$<this.editableCategories.length;$i$$++)!1!==categoryManager.categoryAllowsNewElements(this.editableCategories[$i$$])&&$cQuantify_options$$.push({id:this.editableCategories[$i$$],name:categoryManager.getCategoryName(this.editableCategories[$i$$]),
allowedOverlays:categoryManager.getOverlayTypes(this.editableCategories[$i$$])});0<$cQuantify_options$$.length&&mapInterface.addNewOverlaysComponent($cQuantify_options$$,this.overlayFinished.bind(this));jQuery(document).trigger("im_edit_mode_started");jQuery("#IM_Syn_Map_Selection").chosen("destroy")}else{mapInterface.removeUndoComponent();mapInterface.removeNewOverlaysComponent();mapInterface.addOptionElement(this.optionsElement);this.categoryForAdding=-1;jQuery("#IM_OptionsPane").toggle(!1);for($i$$=
0;$i$$<legend.getLength();$i$$++)legend.getElement($i$$).visible(!0);jQuery("#IM_Syn_Map_Selection").chosen({allow_single_deselect:!0});jQuery(document).trigger("im_edit_mode_stopped");jQuery(".im_loc_nav").css("bottom","127px")}this.editMode=$activate$$;legend.reloadOverlays()}};this.overlayFinished=function $this$overlayFinished$($categoryID$$,$overlayType$$,$overlay$$){var $infoWin$$=new EditableInfoWindowContent($categoryID$$,"XXX",$overlayType$$);if($overlayType$$==OverlayType.PointSymbol){var $mapSymbol$$=
new MapSymbol([$infoWin$$],null,-1,-1);$mapSymbol$$.setMarker($overlay$$);$mapSymbol$$.openInfoWindow(0);$categoryID$$=new OverlayAddedOperation($overlay$$,$categoryID$$,$overlayType$$,$mapSymbol$$.infoWindow);this.addChange($categoryID$$);$infoWin$$.markerID=$categoryID$$.overlayID;return $mapSymbol$$}return null};this.createOptionsDiv=function $this$createOptionsDiv$(){this.optionsElement=mapInterface.createOptionElement();var $optionsDiv$$=document.createElement("div");$optionsDiv$$.id="IM_Options_Div";
$optionsDiv$$.appendChild(this.optionsElement);$optionsDiv$$.index=1;jQuery(document).trigger("im_add_options");this.addOptionPane()};this.addOptionPane=function $this$addOptionPane$(){var $optionPane$$=document.createElement("div");$optionPane$$.id="IM_OptionsPane";$optionPane$$.className="custom_option_pane custom_control_shadow";this.editableCategories=categoryManager.getEditableCategories();var $option$$={result:!0};jQuery(document).trigger("im_show_edit_mode",[$option$$]);$option$$.result&&"1"==
PATH.userCanEditMapData&&0<this.editableCategories.length&&this.addOption("editMode",new BoolOption(!1,TRANSLATIONS.EDIT_MODE,this.setEditMode,!1));for(var $key$$ in this.options)$option$$=this.options[$key$$],void 0===this.state[$key$$]&&(this.state[$key$$]=$option$$.getDefaultValue()),$option$$.setKey($key$$),$option$$.applyState(this.state[$key$$],{first:!0}),$option$$.appendHtmlElements($optionPane$$);this.editMode||mapInterface.addOptionElement(this.optionsElement);this.optionsElement.appendChild($optionPane$$);
jQuery(this.optionsElement).off();this.optionsElement.addEventListener("mouseover",function(){$optionPane$$.style.display="block";$optionPane$$.className+="visible"});this.optionsElement.addEventListener("mouseout",function(){$optionPane$$.className="custom_option_pane custom_control_shadow";window.setTimeout(function(){"custom_option_pane custom_control_shadow"==$optionPane$$.className&&($optionPane$$.style.display="none")},100)})}}function GuiOption(){}GuiOption.prototype.setKey=function $GuiOption$$setKey$($key$$){};
GuiOption.prototype.getDefaultValue=function $GuiOption$$getDefaultValue$(){};GuiOption.prototype.appendHtmlElements=function $GuiOption$$appendHtmlElements$($parent$$){};GuiOption.prototype.applyState=function $GuiOption$$applyState$($val$$,$details$$){};GuiOption.prototype.setEnabled=function $GuiOption$$setEnabled$($val$$){};GuiOption.prototype.isSaved=function $GuiOption$$isSaved$(){};
function EditConfiguration(){this.fields=[null,null,null];this.arrNewOverlays=[!1,!1,!1];this.arrChangeData=[!1,!1,!1];this.arrChangeGeoData=[!1,!1,!1];this.setFieldData=function $this$setFieldData$($overlayType$$,$fields$$){this.fields[$overlayType$$]=$fields$$};this.allowDataChange=function $this$allowDataChange$($overlayType$$,$filterFunction$$){this.arrChangeData[$overlayType$$]=void 0===$filterFunction$$?!0:$filterFunction$$};this.allowGeoDataChange=function $this$allowGeoDataChange$($overlayType$$,
$filterFunction$$){this.arrChangeGeoData[$overlayType$$]=void 0===$filterFunction$$?!0:$filterFunction$$};this.allowNewOverlays=function $this$allowNewOverlays$($overlayType$$){this.arrNewOverlays[$overlayType$$]=!0};this.canAddNewOverlays=function $this$canAddNewOverlays$($overlayType$$){return this.arrNewOverlays.reduce(function($a$$,$b$$){return $a$$||$b$$},!1)};this.canEditGeoData=function $this$canEditGeoData$($elementID$$,$overlayType$$){if(void 0===$overlayType$$)return this.arrChangeGeoData.reduce(function($a$$,
$b$$){return $a$$||("function"==typeof $b$$?$b$$($elementID$$):$b$$)},!1);var $arrVal$$=this.arrChangeGeoData[$overlayType$$];return"function"==typeof $arrVal$$?$arrVal$$($elementID$$):$arrVal$$};this.canEditFieldData=function $this$canEditFieldData$($elementID$$,$overlayType$$){if(void 0===$overlayType$$)return this.arrChangeData.reduce(function($a$$,$b$$){return $a$$||("function"==typeof $b$$?$b$$($elementID$$):$b$$)},!1);var $arrVal$$=this.arrChangeData[$overlayType$$];return"function"==typeof $arrVal$$?
$arrVal$$($elementID$$):$arrVal$$};this.getTypesForNewOverlays=function $this$getTypesForNewOverlays$(){return this.arrNewOverlays};this.getEditFields=function $this$getEditFields$($overlayType$$){return this.fields[$overlayType$$]}}function FieldInformation($name$$,$type$$,$required$$,$value$$){this.name=$name$$;this.type=$type$$;this.required=$required$$}function FieldType(){}FieldType.prototype.createInputString=function $FieldType$$createInputString$($startValue$$){};
FieldType.prototype.bindChangeListener=function $FieldType$$bindChangeListener$($content$$,$listener$$){};FieldType.prototype.removeChangeListener=function $FieldType$$removeChangeListener$($content$$){};FieldType.prototype.getSQLType=function $FieldType$$getSQLType$(){};FieldType.prototype.getDefaultValue=function $FieldType$$getDefaultValue$(){};FieldType.prototype.isEmpty=function $FieldType$$isEmpty$($val$$){};FieldType.prototype.setValue=function $FieldType$$setValue$($element$$,$val$$){};
function UndoableOperation(){}UndoableOperation.prototype.undo=function $UndoableOperation$$undo$($undoAll$$){};UndoableOperation.prototype.getCommitInformation=function $UndoableOperation$$getCommitInformation$(){};var DATA=0,COMMENTS=1,KEY=2,EXTRA_DATA=3,DEBUG_DATA=4;
function CategoryManager(){this.additionalAjaxData={};this.tagTranslations={};this.allDistinctNames={};this.infoWindowContentConstructors={simple:SimpleInfoWindowContent,editable:EditableInfoWindowContent,polygon:PolygonInfoWindowContent,lazy:LazyInfoWindowContent};this.categories={};this.categories["-1"]=new CategoryInformation(-1,"?",TRANSLATIONS.ALL_DISTINCT,"");this.categories["-2"]=new CategoryInformation(-2,"!","","");this.categories["-3"]=new CategoryInformation(-3,"#","",TRANSLATIONS.WITHOUT_TAG);
this.categories["-4"]=new CategoryInformation(-4,"$","distinct","");this.categories["-5"]=new CategoryInformation(-5,"§","Dialektometrie","");this.prefixToIdMapping={};this.registerCategory=function $this$registerCategory$($info$$){this.prefixToIdMapping[$info$$.categoryPrefix]=$info$$.categoryID;this.categories[$info$$.categoryID]=$info$$;null!=$info$$.element&&$info$$.element.change(this.handleGuiSelection.bind(this,$info$$.element,$info$$.categoryID,$info$$.filterComponents))};this.categoryFromId=
function $this$categoryFromId$($elementID$$){for(var $prefix$$ in this.prefixToIdMapping)if($elementID$$.startsWith($prefix$$))return this.prefixToIdMapping[$prefix$$];return-1};this.addAjaxData=function $this$addAjaxData$($key$$,$value$$){this.additionalAjaxData[$key$$]=$value$$};this.removeAjaxData=function $this$removeAjaxData$($key$$){var $val$$=this.additionalAjaxData[$key$$];delete this.additionalAjaxData[$key$$];return $val$$};this.addAdditonalAjaxData=function $this$addAdditonalAjaxData$($data$$){for(var $key$$ in this.additionalAjaxData)$data$$[$key$$]=
this.additionalAjaxData[$key$$];return $data$$};this.setElementID=function $this$setElementID$($categoryID$$,$elementID$$){var $info$$=this.categories[$categoryID$$],$oldElement$$=$info$$.element;null!=$oldElement$$&&$oldElement$$.off("change");null!=$elementID$$?($info$$.element=jQuery("#"+$elementID$$),$info$$.element.change(this.handleGuiSelection.bind(this,$info$$.element,$info$$.categoryID,$info$$.filterComponents))):$info$$.element=null};this.forbidRemoving=function $this$forbidRemoving$($categoryID$$,
$key$$){var $info$$=this.categories[$categoryID$$];return $info$$.forbidRemovingFunction?$info$$.forbidRemovingFunction($key$$):!1};this.isSingleSelect=function $this$isSingleSelect$($categoryID$$){return this.categories[$categoryID$$].singleSelect};this.addTagTranslation=function $this$addTagTranslation$($key$$,$name$$){this.tagTranslations[$key$$]=$name$$};this.getTagTranslation=function $this$getTagTranslation$($key$$){return this.tagTranslations[$key$$]?this.tagTranslations[$key$$]:$key$$};this.getEmptyCategoryName=
function $this$getEmptyCategoryName$($categoryID$$){return this.categories[$categoryID$$].nameEmpty};this.getCategoryName=function $this$getCategoryName$($categoryID$$,$emptyPseudoCategories$$){return!0===$emptyPseudoCategories$$&&0>$categoryID$$?"":this.categories[$categoryID$$].name};this.getCategoryNameForSubLegendEntry=function $this$getCategoryNameForSubLegendEntry$($categoryID$$,$cname_filterData$$,$emptyPseudoCategories$$){return this.categories[$categoryID$$].subLegendNameFun&&($cname_filterData$$=
this.categories[$categoryID$$].subLegendNameFun($cname_filterData$$))?$cname_filterData$$:this.getCategoryName($categoryID$$,$emptyPseudoCategories$$)};this.getCategoryPrefix=function $this$getCategoryPrefix$($categoryID$$){return this.categories[$categoryID$$].categoryPrefix};this.getElementName=function $this$getElementName$($categoryID$$,$key$$){var $cat$$=this.categories[$categoryID$$];return void 0==$cat$$.costumGetNameFunction?this.getRegularElementName($cat$$,$key$$):$cat$$.costumGetNameFunction($key$$,
this.getRegularElementName.bind(this,$cat$$))};this.getRegularElementName=function $this$getRegularElementName$($cat$$,$key$$){var $element$$=$cat$$.element;return null==$element$$?$key$$:$element$$.data("getName")($key$$)};this.getAllDistinctElementName=function $this$getAllDistinctElementName$($key$$,$parentKey$$){return this.allDistinctNames[$parentKey$$][$key$$]};this.getLineWidth=function $this$getLineWidth$($categoryID$$,$key$$){var $cat$$=this.categories[$categoryID$$];return void 0===$cat$$.lineWidth?
1:"function"===typeof $cat$$.lineWidth?$cat$$.lineWidth($key$$):$cat$$.lineWidth};this.getNewCommentText=function $this$getNewCommentText$($category$jscomp$9_categoryID$$,$key$$,$addName$$){$category$jscomp$9_categoryID$$=this.categories[$category$jscomp$9_categoryID$$];if($category$jscomp$9_categoryID$$.textForNewComment){var $result$$=$category$jscomp$9_categoryID$$.textForNewComment;$addName$$&&($result$$+=" ("+this.getElementName($category$jscomp$9_categoryID$$.categoryID,$key$$)+")");return $result$$}return null};
this.getListRetrievalText=function $this$getListRetrievalText$($category$jscomp$10_categoryID$$,$key$$,$addName$$){$category$jscomp$10_categoryID$$=this.categories[$category$jscomp$10_categoryID$$];if($category$jscomp$10_categoryID$$.textForListRetrieval){var $result$$=$category$jscomp$10_categoryID$$.textForListRetrieval;$addName$$&&($result$$+=" ("+this.getElementName($category$jscomp$10_categoryID$$.categoryID,$key$$)+")");return $result$$}return null};this.getListBuilder=function $this$getListBuilder$($categoryID$$){return this.categories[$categoryID$$].listBuilder};
this.getCountString=function $this$getCountString$($categoryID$$,$count$$){var $category$$=this.categories[$categoryID$$];return null==$category$$.countNameSingular?"":1==$count$$?" (1 "+$category$$.countNameSingular+")":" ("+$count$$+" "+$category$$.countNamePlural+")"};this.getOverlayTypes=function $this$getOverlayTypes$($category$jscomp$12_categoryID$$){$category$jscomp$12_categoryID$$=this.categories[$category$jscomp$12_categoryID$$];return $category$jscomp$12_categoryID$$.editConfiguration?$category$jscomp$12_categoryID$$.editConfiguration.getTypesForNewOverlays():
[]};this.handleGuiSelection=function $this$handleGuiSelection$($element$$,$categoryID$$,$filterComponents_value$$){$filterComponents_value$$=this.getCategoryPrefix($categoryID$$)+$element$$.data("getSelectedValue")();$element$$.data("reset")();this.showFilterScreen($categoryID$$,$filterComponents_value$$)};this.showFilterScreen=function $this$showFilterScreen$($categoryID$$,$elementID$$,$presetValues$$){if(!(0==$elementID$$||optionManager.inEditMode()&&legend.getMainElement($categoryID$$,$elementID$$))){var $filterComponents$$=
this.categories[$categoryID$$].filterComponents;if(!optionManager.inEditMode()||this.categoryAllowsFieldDataEditingForElement($categoryID$$,$elementID$$)||this.categoryAllowsGeoDataEditingForElement($categoryID$$,$elementID$$)){var $noElements$$=!0;if(void 0!=$filterComponents$$&&0<$filterComponents$$.length){var $thisObject$$=this;jQuery("#IM_filter_popup_content").empty();for(var $filterData$$={id:$elementID$$},$newElements$$=Array($filterComponents$$.length),$i$jscomp$0$$=0;$i$jscomp$0$$<$filterComponents$$.length;$i$jscomp$0$$++)if($newElements$$[$i$jscomp$0$$]=
$filterComponents$$[$i$jscomp$0$$].getFilterScreenElement($categoryID$$,$elementID$$),null!=$newElements$$[$i$jscomp$0$$])if($newElements$$[$i$jscomp$0$$]instanceof FilterComponentDirectResult){for(var $key$$ in $newElements$$[$i$jscomp$0$$].data)$filterData$$[$key$$]=$newElements$$[$i$jscomp$0$$].data[$key$$];$newElements$$[$i$jscomp$0$$]=null}else jQuery("#IM_filter_popup_content").append($newElements$$[$i$jscomp$0$$]),$filterComponents$$[$i$jscomp$0$$].afterAppending($newElements$$[$i$jscomp$0$$],
$categoryID$$,$elementID$$),$presetValues$$&&$filterComponents$$[$i$jscomp$0$$].setValues($presetValues$$,$newElements$$[$i$jscomp$0$$],$categoryID$$,$elementID$$),$noElements$$=!1;if(!$noElements$$){jQuery("#IM_filter_popup_submit").unbind("click");jQuery("#IM_filter_popup_submit").click(function(){for(var $i$$=0;$i$$<$filterComponents$$.length;$i$$++)if(null!=$newElements$$[$i$$]&&!$filterComponents$$[$i$$].storeData($filterData$$,$newElements$$[$i$$],$categoryID$$,$elementID$$)){alert(TRANSLATIONS.FILTER_NOT_POSSIBLE);
return}jQuery("#IM_filter_popup_div").modal("hide");$i$$=$filterData$$.id;delete $filterData$$.id;$thisObject$$.loadData($categoryID$$,$i$$,"menu",$filterData$$,void 0,void 0,!0)});var $that$$=this;jQuery("#IM_filter_popup_div").off("show.bs.modal").on("show.bs.modal",function($e$jscomp$19_m_title$jscomp$1_name$$){$e$jscomp$19_m_title$jscomp$1_name$$=$that$$.getCategoryName($categoryID$$);$e$jscomp$19_m_title$jscomp$1_name$$=jQuery('<span class="im_concept_hl">'+$e$jscomp$19_m_title$jscomp$1_name$$+
'</span><span class="im_name_hl">'+$that$$.getElementName($categoryID$$,$elementID$$)+"</span>");jQuery("#IM_filter_popup_div .modal-title").empty().append($e$jscomp$19_m_title$jscomp$1_name$$)});jQuery("#IM_filter_popup_div").off("shown.bs.modal").on("shown.bs.modal",function(){adjustMapModalContent()});jQuery("#IM_filter_popup_div").modal("show").data("element-id",$elementID$$)}}$noElements$$&&this.loadData($categoryID$$,$elementID$$,"menu",$filterData$$,void 0,void 0,!0)}else alert(TRANSLATIONS.NO_EDITING_CATEGORY)}};
this.loadSynopticMap=function $this$loadSynopticMap$($id$$,$context$$){legend.removeAll();mapState.clean();var $ajaxData$$={action:"im_a",namespace:"load_syn_map",key:$id$$,lang:PATH.language,_wpnonce:jQuery("#_wpnonce").val()},$keyAjax$$;for($keyAjax$$ in this.additionalAjaxData)$ajaxData$$[$keyAjax$$]=this.additionalAjaxData[$keyAjax$$];jQuery.post(ajaxurl,$ajaxData$$,function($data$jscomp$88_response$jscomp$6_state$$){if("NO_MAP"==$data$jscomp$88_response$jscomp$6_state$$)console.error("Map does not exist!");
else{$data$jscomp$88_response$jscomp$6_state$$=JSON.parse($data$jscomp$88_response$jscomp$6_state$$);var $mapInfos$$=$data$jscomp$88_response$jscomp$6_state$$[0];$mapInfos$$["continue"]=!0;$mapInfos$$.context=$context$$;$mapInfos$$.id=$id$$;jQuery(document).trigger("im_syn_map_before_loading",$mapInfos$$,$data$jscomp$88_response$jscomp$6_state$$[1]);if($mapInfos$$["continue"]){for(var $numElements_option$$ in $mapInfos$$.Options)if(!PATH.options[$numElements_option$$]){var $singleCallback_val$$=$mapInfos$$.Options[$numElements_option$$];
"true"===$singleCallback_val$$?$singleCallback_val$$=!0:"false"===$singleCallback_val$$&&($singleCallback_val$$=!1);optionManager.setOption($numElements_option$$,$singleCallback_val$$)}mapInterface.setCenterAndZoom($mapInfos$$.Center_Lat,$mapInfos$$.Center_Lng,1*$mapInfos$$.Zoom);var $notReady$$=$numElements_option$$=$data$jscomp$88_response$jscomp$6_state$$[1].length;$singleCallback_val$$=function $$singleCallback_val$$$(){$notReady$$--;if(0==$notReady$$){$mapInfos$$.Quant&&jQuery("#qbutton_"+$mapInfos$$.Quant).trigger("click");
mapInterface.repaint(!0);for(var $i$19_i$20$$=0;$i$19_i$20$$<$mapInfos$$.Info_Windows.length;$i$19_i$20$$++){var $iWindow$$=$mapInfos$$.Info_Windows[$i$19_i$20$$];if($iWindow$$.legendIndex)var $mapElement$$=symbolClusterer.findMapElement(legend.getElementByIndexes($iWindow$$.legendSubIndex,$iWindow$$.legendIndex),$iWindow$$.elementIndex,$iWindow$$.lat,$iWindow$$.lng);else if(void 0===$iWindow$$.parent_key)for(var $parents$$=legend.getElementsWithKey($iWindow$$.category,$iWindow$$.key),$j$$=0;$j$$<
$parents$$.length&&!($mapElement$$=symbolClusterer.findMapElement($parents$$[$j$$],$iWindow$$.elementIndex,$iWindow$$.lat,$iWindow$$.lng));$j$$++);else $mapElement$$=symbolClusterer.findMapElement(legend.getElementByKey($iWindow$$.category,$iWindow$$.key,$iWindow$$.parent_category,$iWindow$$.parent_key),$iWindow$$.elementIndex,$iWindow$$.lat,$iWindow$$.lng);$mapElement$$?$mapElement$$ instanceof MapSymbol?$mapElement$$.openInfoWindow(1*$iWindow$$.tabIndex):$mapElement$$.openInfoWindow($iWindow$$.lat,
$iWindow$$.lng):console.error("Map element for info window not found: "+JSON.stringify($iWindow$$))}for($i$19_i$20$$=0;$i$19_i$20$$<$mapInfos$$.Location_Markers.length;$i$19_i$20$$++)gotoLocation($mapInfos$$.Location_Markers[$i$19_i$20$$],!1)}};if(0==$numElements_option$$)$notReady$$=1,$singleCallback_val$$();else for(var $i$$=0;$i$$<$numElements_option$$;$i$$++){var $currElement$$=$data$jscomp$88_response$jscomp$6_state$$[1][$i$$],$active$$=Array.isArray($currElement$$.active)?$currElement$$.active.map(function($x$$){return 1*
$x$$}):"true"==$currElement$$.active;categoryManager.loadData(1*$currElement$$.category,$currElement$$.key,"synMap",$currElement$$.filter,$currElement$$.fixedColors,$singleCallback_val$$,void 0,$active$$)}$mapInfos$$.Opened&&categoryManager.showFilterScreen(categoryManager.categoryFromId($mapInfos$$.Opened),$mapInfos$$.Opened);$data$jscomp$88_response$jscomp$6_state$$={tk:$id$$};history.pushState($data$jscomp$88_response$jscomp$6_state$$,"",addParamToUrl(window.location.href,"tk",$id$$+""));jQuery(document).trigger("im_url_changed",
$data$jscomp$88_response$jscomp$6_state$$)}}})};this.loadData=function $this$loadData$($category$$,$key$jscomp$86_keys$$,$trigger$$,$filterData$$,$fixedColors$$,$callback$$,$popState$$,$active$$,$waitingList$$){if(!optionManager.inEditMode()||categoryManager.categoryAllowsFieldDataEditingForElement($category$$,$key$jscomp$86_keys$$)||categoryManager.categoryAllowsGeoDataEditingForElement($category$$,$key$jscomp$86_keys$$))if(-1!=$key$jscomp$86_keys$$.indexOf("+")){var $fixedLegendIndex_prefix$$=$key$jscomp$86_keys$$[0];
$key$jscomp$86_keys$$=$key$jscomp$86_keys$$.substring(1).split("+");for(var $ajaxData$$=[],$eventData$jscomp$1_f$jscomp$1_i$21_keyAjax$$=0;$eventData$jscomp$1_f$jscomp$1_i$21_keyAjax$$<$key$jscomp$86_keys$$.length;$eventData$jscomp$1_f$jscomp$1_i$21_keyAjax$$++)"menu"==$trigger$$&&0<$eventData$jscomp$1_f$jscomp$1_i$21_keyAjax$$&&($trigger$$="repeated"),this.loadData($category$$,$fixedLegendIndex_prefix$$+$key$jscomp$86_keys$$[$eventData$jscomp$1_f$jscomp$1_i$21_keyAjax$$],$trigger$$,void 0===$filterData$$?
void 0:Object.assign({},$filterData$$),$fixedColors$$,$callback$$,$popState$$,$active$$,$ajaxData$$)}else{var $adjustSubSymbols$$=!1;$filterData$$&&$filterData$$.adjustSubElementSymbols&&($adjustSubSymbols$$=!0===$filterData$$.adjustSubElementSymbols,delete $filterData$$.adjustSubElementSymbols);if(void 0!==$waitingList$$){var $indexWaitingList$$=$waitingList$$.length;$waitingList$$.push(null)}var $element$$=legend.getMainElement($category$$,$key$jscomp$86_keys$$);null!=$element$$&&($element$$.setActive(!1),
0==legend.numActive&&symbolClusterer.repaintPointSymbols());null!=$element$$&&null==$fixedColors$$&&($fixedLegendIndex_prefix$$=$element$$.getIndex(),legend.removeElement($element$$,!0),$element$$=null);$ajaxData$$={key:$key$jscomp$86_keys$$};for($eventData$jscomp$1_f$jscomp$1_i$21_keyAjax$$ in this.additionalAjaxData)$ajaxData$$[$eventData$jscomp$1_f$jscomp$1_i$21_keyAjax$$]=this.additionalAjaxData[$eventData$jscomp$1_f$jscomp$1_i$21_keyAjax$$];if(void 0==$filterData$$&&this.categories[$category$$].filterComponents)for($filterData$$=
{},$eventData$jscomp$1_f$jscomp$1_i$21_keyAjax$$=0;$eventData$jscomp$1_f$jscomp$1_i$21_keyAjax$$<this.categories[$category$$].filterComponents.length;$eventData$jscomp$1_f$jscomp$1_i$21_keyAjax$$++)this.categories[$category$$].filterComponents[$eventData$jscomp$1_f$jscomp$1_i$21_keyAjax$$].storeDefaultData($filterData$$,$category$$,$key$jscomp$86_keys$$);$ajaxData$$.filter=$filterData$$;null!=$fixedColors$$&&null!=$element$$&&($ajaxData$$.noComments=!0);optionManager.inEditMode()&&($ajaxData$$.editMode=
!0);$eventData$jscomp$1_f$jscomp$1_i$21_keyAjax$$={category:$category$$,key:$key$jscomp$86_keys$$,ajaxData:$ajaxData$$,trigger:$trigger$$};jQuery(document).trigger("im_before_load_data",$eventData$jscomp$1_f$jscomp$1_i$21_keyAjax$$);var $newLegendElementCreated$$=!1,$singular$$=void 0===$filterData$$||void 0===$filterData$$.subElementCategory||-2==$filterData$$.subElementCategory;null==$element$$&&($element$$=$singular$$?new LegendElement($category$$,$key$jscomp$86_keys$$):new MultiLegendElement($category$$,
$key$jscomp$86_keys$$),categoryManager.isSingleSelect($category$$)&&legend.removeElementsByCategory($category$$),legend.collapseAll(!1),legend.addElement($element$$,$fixedLegendIndex_prefix$$),$newLegendElementCreated$$=!0);legend.update();var $thisObject$$=this;mapSQL($category$$,$ajaxData$$,function($doRest_i$27_idList_response$$){if(-1==$doRest_i$27_idList_response$$)alert("Loading error! No Sever response!"),legend.removeElement($element$$,!0),void 0!==$waitingList$$&&$waitingList$$.splice($indexWaitingList$$,
1);else if("Error"==$doRest_i$27_idList_response$$.substring(0,5))alert($doRest_i$27_idList_response$$),$element$$.setLoading(!1),legend.removeElement($element$$,!0),void 0!==$waitingList$$&&$waitingList$$.splice($indexWaitingList$$,1);else{var $result$$=JSON.parse($doRest_i$27_idList_response$$);if(!$singular$$)var $sortedKeys$$=$thisObject$$.sortSubElementKeys($element$$.category,$result$$[DATA],$filterData$$);$doRest_i$27_idList_response$$=function $$doRest_i$27_idList_response$$$($computedColors$$){$result$$[EXTRA_DATA]&&
0<Object.keys($result$$[EXTRA_DATA]).length&&jQuery(document).trigger("im_server_extra_data",$result$$[EXTRA_DATA]);$result$$[DEBUG_DATA]&&jQuery("#im_debug_area").html($result$$[DEBUG_DATA]);$element$$.key=$result$$[KEY];$element$$.filterData=$filterData$$;$singular$$?$thisObject$$.createSingularLegendEntry($result$$,$element$$,$computedColors$$,!$newLegendElementCreated$$,$active$$):$thisObject$$.createMultiLegendEntry($result$$,$element$$,$sortedKeys$$,$filterData$$,$computedColors$$,!$newLegendElementCreated$$,
$active$$);mapInterface.repaint("synMap"!=$trigger$$&&"reload"!=$trigger$$);jQuery(document).trigger("im_after_load_data");$callback$$&&$callback$$($element$$);$popState$$&&history.pushState({content:legend.getCompleteExport(!0)},"")};if(void 0===$waitingList$$)$doRest_i$27_idList_response$$($fixedColors$$);else if($waitingList$$[$indexWaitingList$$]={fun:$doRest_i$27_idList_response$$,data:$result$$,singular:$singular$$,sortedKeys:$sortedKeys$$},-1==$waitingList$$.indexOf(null)){var $elementCount_k$$=
0;$doRest_i$27_idList_response$$=[];for(var $i$22_i$23_indexes$$=0;$i$22_i$23_indexes$$<num_overlay_types;$i$22_i$23_indexes$$++)$doRest_i$27_idList_response$$[$i$22_i$23_indexes$$]=[];if($adjustSubSymbols$$)for($i$22_i$23_indexes$$=0;$i$22_i$23_indexes$$<$waitingList$$.length;$i$22_i$23_indexes$$++)if(!$waitingList$$[$i$22_i$23_indexes$$].singular){var $i$24_i$25_resultData$$=$waitingList$$[$i$22_i$23_indexes$$].data[DATA];Object.keys($i$24_i$25_resultData$$);for(var $currentSortedKeys_j$26$$=$waitingList$$[$i$22_i$23_indexes$$].sortedKeys,
$j$jscomp$28_key$$=0;$j$jscomp$28_key$$<$currentSortedKeys_j$26$$.length;$j$jscomp$28_key$$++){var $overlayType$$=$i$24_i$25_resultData$$[$currentSortedKeys_j$26$$[$j$jscomp$28_key$$]][0];-1==$doRest_i$27_idList_response$$[$overlayType$$].indexOf($currentSortedKeys_j$26$$[$j$jscomp$28_key$$])&&($doRest_i$27_idList_response$$[$overlayType$$].push($currentSortedKeys_j$26$$[$j$jscomp$28_key$$]),$elementCount_k$$++)}}$i$22_i$23_indexes$$=[];if(1<$elementCount_k$$){for($i$24_i$25_resultData$$=0;$i$24_i$25_resultData$$<
$waitingList$$.length;$i$24_i$25_resultData$$++)try{$i$22_i$23_indexes$$.push($thisObject$$.createIndexesForMultiElement($doRest_i$27_idList_response$$).indexes)}catch($e$$){console.error($e$$);alert(TRANSLATIONS.NO_SYMBOLS_LEFT+" ("+$elementCount_k$$+")");return}for($elementCount_k$$=0;$elementCount_k$$<$waitingList$$.length;$elementCount_k$$++)for($i$24_i$25_resultData$$=0;$i$24_i$25_resultData$$<$doRest_i$27_idList_response$$.length;$i$24_i$25_resultData$$++)for($currentSortedKeys_j$26$$=0;$currentSortedKeys_j$26$$<
$doRest_i$27_idList_response$$[$i$24_i$25_resultData$$].length;$currentSortedKeys_j$26$$++)$j$jscomp$28_key$$=$doRest_i$27_idList_response$$[$i$24_i$25_resultData$$][$currentSortedKeys_j$26$$],$i$24_i$25_resultData$$==OverlayType.PointSymbol?symbolManager.unblockFeatureCombination($i$22_i$23_indexes$$[$elementCount_k$$][$j$jscomp$28_key$$][0],$i$22_i$23_indexes$$[$i$24_i$25_resultData$$][$j$jscomp$28_key$$][1]):symbolManager.unblockColor($element$$.overlayType,$i$22_i$23_indexes$$[$elementCount_k$$][$j$jscomp$28_key$$])}for($doRest_i$27_idList_response$$=
0;$doRest_i$27_idList_response$$<$waitingList$$.length;$doRest_i$27_idList_response$$++)$waitingList$$[$doRest_i$27_idList_response$$].fun($i$22_i$23_indexes$$[$doRest_i$27_idList_response$$])}}})}};this.saveSynopticMap=function $this$saveSynopticMap$(){var $allElements$$="1"==jQuery("input[name='IM_Syn_Map_All']:checked").val(),$allUnChecked_description$$=!0;if(!$allElements$$){for(var $i$$=0;$i$$<legend.getLength();$i$$++)if(legend.getElement($i$$).visible()){$allUnChecked_description$$=!1;break}if($allUnChecked_description$$){alert(TRANSLATIONS.NO_SELECTION);
return}}var $name$$=jQuery("#IM_Syn_Map_Name").val();if(""==$name$$)alert(TRANSLATIONS.ENTER_NAME);else{$allUnChecked_description$$=jQuery("#IM_Syn_Map_Description").val();$i$$=jQuery("#IM_Syn_Map_Release").prop("checked");var $center$$=mapInterface.getCenter(),$id_open$$=jQuery("#IM_filter_popup_div").hasClass("in")?jQuery("#IM_filter_popup_div").data("element-id"):null,$cq$$=symbolClusterer.checkQuantify();jQuery.post(ajaxurl,{action:"im_a",namespace:"save_syn_map",name:$name$$,description:$allUnChecked_description$$,
release:$i$$?"Applied":"Private",zoom:mapInterface.getZoom(),center_lat:$center$$.lat,center_lng:$center$$.lng,author:PATH.userName,colors:colorScheme.exportScheme(),opened:$id_open$$,info_windows:mapState.getOpenInfoWindows(),location_markers:mapState.getLocationMarkers(),options:optionManager.getAllOptionValues(),quant:$cq$$?$cq$$.key:null,data:legend.getCompleteExport($allElements$$),_wpnonce:jQuery("#_wpnonce_syn_map_save").val()},function($id$$){"NAME_EXISTS"==$id$$?alert(TRANSLATIONS.MAP_ALREADY_EXISTS):
(isNaN($id$$)||-1==1*$id$$?alert(TRANSLATIONS.SAVE_MAP_ERROR+" ("+$id$$+")"):alert(TRANSLATIONS.SAVE_MAP_SUCCESS),jQuery("#IM_Save_Syn_Map").modal("hide"),jQuery("#IM_Syn_Map_Selection").append('<option value="'+$id$$+'">'+$name$$+"<option>").trigger("chosen:updated"))})}};this.saveAnonymousMap=function $this$saveAnonymousMap$($callback$$){var $center$$=mapInterface.getCenter(),$cq$$=symbolClusterer.checkQuantify();jQuery.post(ajaxurl,{action:"im_a",namespace:"save_syn_map",name:"Anonymous",description:"",
release:"Private",zoom:mapInterface.getZoom(),center_lat:$center$$.lat,center_lng:$center$$.lng,author:PATH.userName,colors:colorScheme.exportScheme(),data:legend.getCompleteExport(!0),opened:jQuery("#IM_filter_popup_div").hasClass("in")?jQuery("#IM_filter_popup_div").data("element-id"):null,info_windows:mapState.getOpenInfoWindows(),location_markers:mapState.getLocationMarkers(),options:optionManager.getAllOptionValues(),quant:$cq$$?$cq$$.key:null,_wpnonce:jQuery("#_wpnonce_syn_map_save").val()},
function($id$$){isNaN($id$$)?$callback$$(-1):$callback$$(1*$id$$)})};this.produceMapURL=function $this$produceMapURL$($callback$$){this.saveAnonymousMap(function($id$jscomp$20_url$$){-1==$id$jscomp$20_url$$?$callback$$("Error"):($id$jscomp$20_url$$=PATH.tkUrl.replace("§§§",$id$jscomp$20_url$$+""),mapState.currentMapLayer&&0<mapState.currentMapLayer&&($id$jscomp$20_url$$=addParamToUrl($id$jscomp$20_url$$,"layer",mapState.currentMapLayer+"")),$callback$$($id$jscomp$20_url$$))})};this.createSingularLegendEntry=
function $this$createSingularLegendEntry$($result$$,$element$$,$addToMap_fixedColors$$,$dataArray_reload$$,$active$jscomp$9_length$$){if(!$result$$[DATA]||jQuery.isEmptyObject($result$$[DATA]))legend.removeElement($element$$,!0),$element$$.setLoading(!1),alert(TRANSLATIONS.NO_DATA+" ("+categoryManager.getElementName($element$$.category,$element$$.key)+")!");else{$active$jscomp$9_length$$&&$element$$.setActive(!0);var $colorIndex$$;try{null!=$addToMap_fixedColors$$&&($colorIndex$$=$addToMap_fixedColors$$["-1"]),
$colorIndex$$=this.createSingularIndex($result$$[DATA]["-1"][0],$element$$,$colorIndex$$,$dataArray_reload$$)}catch($e$$){console.error($e$$);alert(TRANSLATIONS.NO_SYMBOLS_LEFT);legend.removeElement($element$$,!0);return}$dataArray_reload$$||($element$$.overlayType==OverlayType.PointSymbol?($element$$.symbolStandard=symbolManager.createSymbolURL($colorIndex$$),$element$$.symbolInactive=symbolManager.createSymbolURL($colorIndex$$,void 0,void 0,!1)):$element$$.symbolStandard=symbolManager.createColorURL($colorIndex$$));
$addToMap_fixedColors$$=!$dataArray_reload$$||$element$$.visible();$dataArray_reload$$=$result$$[DATA]["-1"][1];$active$jscomp$9_length$$=$dataArray_reload$$.length;$colorIndex$$=optionManager.inEditMode()&&this.categoryAllowsGeoDataEditingForElement($element$$.category,$element$$.key,$element$$.overlayType);for(var $color$$=$element$$.getColorHex(),$lineWidth$$=$element$$.getLineWidth(),$i$$=0;$i$$<$active$jscomp$9_length$$;$i$$++){var $currentShape$$=$dataArray_reload$$[$i$$];if(null==$currentShape$$[1])console.error("Element "+
JSON.stringify($currentShape$$[0]).substring(0,50)+" has no geo data!"),$i$$++;else{var $infoWindowContents$jscomp$6_quantifyInfo$$=$currentShape$$[3],$qinfo$$;null!=$infoWindowContents$jscomp$6_quantifyInfo$$&&($qinfo$$=$infoWindowContents$jscomp$6_quantifyInfo$$[1]);$infoWindowContents$jscomp$6_quantifyInfo$$=[];for(var $j$$=0;$j$$<$currentShape$$[0].length;$j$$++)$infoWindowContents$jscomp$6_quantifyInfo$$.push(this.createInfoWindowContent($currentShape$$[0][$j$$],$element$$.category,$element$$.key,
$element$$.overlayType));$currentShape$$=new OverlayInfo($infoWindowContents$jscomp$6_quantifyInfo$$,geoManager.parseGeoDataFormated($currentShape$$[1],$currentShape$$[2]),$qinfo$$,$currentShape$$[4],$i$$);$element$$.overlayInfos.push($currentShape$$);$addToMap_fixedColors$$&&null!=$currentShape$$.geomData&&symbolClusterer.addOverlay($currentShape$$,$element$$,$colorIndex$$,$color$$,$lineWidth$$)}}for(var $ckey$$ in $result$$[COMMENTS])commentManager.addComment($ckey$$,$result$$[COMMENTS][$ckey$$]);
symbolClusterer.checkQuantify()&&symbolClusterer.reQuantify();$element$$.setLoading(!1);legend.update()}};this.createInfoWindowContent=function $this$createInfoWindowContent$($data$$,$category$$,$key$$,$overlayType$$){var $type$$=$data$$.elementType,$constr$$=this.infoWindowContentConstructors[$type$$];delete $data$$.elementType;if(void 0==$constr$$)throw"InfoWindow type not found: "+$type$$;return new $constr$$($category$$,$key$$,$overlayType$$,$data$$)};this.createSingularIndex=function $this$createSingularIndex$($overlayType$$,
$element$$,$colorIndex$jscomp$2_index$$,$reload$$){null==$colorIndex$jscomp$2_index$$?$overlayType$$==OverlayType.PointSymbol?($colorIndex$jscomp$2_index$$=symbolManager.blockFeatureCombinations(1,!0)[0],$element$$.overlayType=OverlayType.PointSymbol):$overlayType$$==OverlayType.Polygon?($colorIndex$jscomp$2_index$$=symbolManager.blockColor(OverlayType.Polygon),$element$$.overlayType=OverlayType.Polygon):($colorIndex$jscomp$2_index$$=symbolManager.blockColor(OverlayType.LineString),$element$$.overlayType=
OverlayType.LineString):$reload$$?$colorIndex$jscomp$2_index$$=symbolManager.blockExplicitSingularIndex($colorIndex$jscomp$2_index$$):($colorIndex$jscomp$2_index$$=symbolManager.blockExplicitSingularIndex($colorIndex$jscomp$2_index$$),$element$$.overlayType=$overlayType$$);return $element$$.colorIndex=$colorIndex$jscomp$2_index$$};this.createMultiLegendEntry=function $this$createMultiLegendEntry$($result$$,$element$$,$sortedKeys$$,$filterData$$,$fixedColors$jscomp$2_overlaysMovable$$,$reload$$,$active$$){for(var $color$$=
{},$numSubElements_si$$=0;$numSubElements_si$$<$element$$.getNumSubElements();$numSubElements_si$$++){var $ce_mainIndex$$=$element$$.getSubElement($numSubElements_si$$);$color$$[$ce_mainIndex$$.key]=$ce_mainIndex$$.visible()}$element$$.removeSubElements();$numSubElements_si$$=Object.keys($result$$[DATA]).length;if(0<$numSubElements_si$$){$ce_mainIndex$$=void 0;for(var $addToMap$$=[],$id$$=0;$id$$<num_overlay_types;$id$$++)$addToMap$$[$id$$]=[];for(var $dataArray$$=0;$dataArray$$<$numSubElements_si$$;$dataArray$$++){$id$$=
$sortedKeys$$[$dataArray$$];var $numRecords$jscomp$1_overlayType$$=$result$$[DATA][$id$$][0],$currentElement$$=new LegendElement($filterData$$.subElementCategory,$id$$,$element$$);if(void 0!=$fixedColors$jscomp$2_overlaysMovable$$){var $currentIndex_j$$=$fixedColors$jscomp$2_overlaysMovable$$[$id$$];void 0!==$currentIndex_j$$?($currentElement$$.colorIndex=symbolManager.blockExplicitIndex($fixedColors$jscomp$2_overlaysMovable$$[$id$$]),$numRecords$jscomp$1_overlayType$$==OverlayType.PointSymbol&&($ce_mainIndex$$=
$currentIndex_j$$[features_classes.main])):$addToMap$$[$numRecords$jscomp$1_overlayType$$].push($id$$)}else $addToMap$$[$numRecords$jscomp$1_overlayType$$].push($id$$);$currentElement$$.overlayType=$numRecords$jscomp$1_overlayType$$;$currentElement$$.visible($color$$[$id$$]);$element$$.addSubElement($currentElement$$);$element$$.subElementsVisible++;$active$$&&-1!=$active$$.indexOf($dataArray$$)&&$currentElement$$.setActive(!0)}try{var $$jscomp$destructuring$var0_lineWidth$$=this.createIndexesForMultiElement($addToMap$$,
$ce_mainIndex$$);var $indexes$$=$$jscomp$destructuring$var0_lineWidth$$.indexes;$ce_mainIndex$$=$$jscomp$destructuring$var0_lineWidth$$.mainIndex}catch($e$$){console.error($e$$);alert(TRANSLATIONS.NO_SYMBOLS_LEFT+" ("+$numSubElements_si$$+")");legend.removeElement($element$$,!0);return}$fixedColors$jscomp$2_overlaysMovable$$=optionManager.inEditMode()&&this.categoryAllowsGeoDataEditingForElement($element$$.category,$element$$.key,$numRecords$jscomp$1_overlayType$$);for($active$$=0;$active$$<$numSubElements_si$$;$active$$++){$id$$=
$sortedKeys$$[$active$$];$currentElement$$=$element$$.getSubElement($active$$);$numRecords$jscomp$1_overlayType$$=$result$$[DATA][$id$$][0];void 0==$currentElement$$.colorIndex&&($currentElement$$.colorIndex=$indexes$$[$id$$]);$color$$=$currentElement$$.getColorHex();$$jscomp$destructuring$var0_lineWidth$$=$currentElement$$.getLineWidth();$numRecords$jscomp$1_overlayType$$==OverlayType.PointSymbol?($currentElement$$.symbolStandard=symbolManager.createSymbolURL($currentElement$$.colorIndex),$currentElement$$.symbolInactive=
symbolManager.createSymbolURL($currentElement$$.colorIndex,void 0,void 0,!1)):$currentElement$$.symbolStandard=symbolManager.createColorURL($currentElement$$.colorIndex);$numRecords$jscomp$1_overlayType$$=$result$$[DATA][$id$$][1].length;$addToMap$$=!$reload$$||$currentElement$$.visible();$dataArray$$=$result$$[DATA][$id$$][1];for($currentIndex_j$$=0;$currentIndex_j$$<$numRecords$jscomp$1_overlayType$$;$currentIndex_j$$++){var $currentShape$$=$dataArray$$[$currentIndex_j$$];if(null==$currentShape$$[1])console.error("Element "+
JSON.stringify($currentShape$$[0]).substring(0,50)+" has no geo data!");else{var $geoObject_overlayInfo$$=geoManager.parseGeoDataFormated($currentShape$$[1],$currentShape$$[2]),$infoWindowContents$jscomp$7_quantifyInfo$$=$currentShape$$[3],$qinfo$$;null!=$infoWindowContents$jscomp$7_quantifyInfo$$&&($qinfo$$=$infoWindowContents$jscomp$7_quantifyInfo$$[1]);$infoWindowContents$jscomp$7_quantifyInfo$$=[];for(var $k$$=0;$k$$<$currentShape$$[0].length;$k$$++)$infoWindowContents$jscomp$7_quantifyInfo$$.push(this.createInfoWindowContent($currentShape$$[0][$k$$],
$currentElement$$.category,$element$$.key,$currentElement$$.overlayType));$geoObject_overlayInfo$$=new OverlayInfo($infoWindowContents$jscomp$7_quantifyInfo$$,$geoObject_overlayInfo$$,$qinfo$$,$currentShape$$[4],$currentIndex_j$$);$currentElement$$.overlayInfos.push($geoObject_overlayInfo$$);-1==$filterData$$.subElementCategory&&(void 0===this.allDistinctNames[$element$$.key]&&(this.allDistinctNames[$element$$.key]={}),this.allDistinctNames[$element$$.key][$id$$]=$currentShape$$[0][0].name);$addToMap$$&&
null!=$geoObject_overlayInfo$$.geomData&&symbolClusterer.addOverlay($geoObject_overlayInfo$$,$currentElement$$,$fixedColors$jscomp$2_overlaysMovable$$,$color$$,$$jscomp$destructuring$var0_lineWidth$$)}}$currentElement$$.setLoading(!1)}$reload$$||void 0==$ce_mainIndex$$||($element$$.symbolStandard=symbolManager.createSymbolURLForMainIndex($ce_mainIndex$$),$element$$.mainColorIndex=$ce_mainIndex$$);for(var $ckey$$ in $result$$[COMMENTS])commentManager.addComment($ckey$$,$result$$[COMMENTS][$ckey$$]);
symbolClusterer.checkQuantify()&&symbolClusterer.reQuantify();$element$$.setLoading(!1);legend.update()}else $element$$.setLoading(!1),legend.removeElement($element$$,!0),alert(TRANSLATIONS.NO_DATA+" ("+categoryManager.getElementName($element$$.category,$element$$.key)+")!")};this.sortSubElementKeys=function $this$sortSubElementKeys$($categoryID$$,$data$$,$filterData$$){$categoryID$$=categoryManager.getSorter($categoryID$$);return void 0==$categoryID$$?-3==$filterData$$.subElementCategory?(new Sorter([new AlphabetSorter])).getSortedKeys($data$$,
0,0,-3):Object.keys($data$$):$categoryID$$.getSortedKeys($data$$,$filterData$$.sorter.sortType,$filterData$$.sorter.sortOrder,$filterData$$.subElementCategory)};this.createIndexesForMultiElement=function $this$createIndexesForMultiElement$($idList$$,$mainIndex$$){var $indexes$$={},$lineStringColors_polygonColors_symbolIndexes$$=symbolManager.blockFeatureCombinations($idList$$[OverlayType.PointSymbol].length,!1,$mainIndex$$);void 0==$mainIndex$$&&0<$lineStringColors_polygonColors_symbolIndexes$$.length&&
($mainIndex$$=$lineStringColors_polygonColors_symbolIndexes$$[0][features_classes.main]);for(var $i$28_i$29_i$30$$=0;$i$28_i$29_i$30$$<$idList$$[OverlayType.PointSymbol].length;$i$28_i$29_i$30$$++)$indexes$$[$idList$$[OverlayType.PointSymbol][$i$28_i$29_i$30$$]]=$lineStringColors_polygonColors_symbolIndexes$$[$i$28_i$29_i$30$$];$lineStringColors_polygonColors_symbolIndexes$$=symbolManager.blockColors(OverlayType.Polygon,$idList$$[OverlayType.Polygon].length);for($i$28_i$29_i$30$$=0;$i$28_i$29_i$30$$<
$idList$$[OverlayType.Polygon].length;$i$28_i$29_i$30$$++)$indexes$$[$idList$$[OverlayType.Polygon][$i$28_i$29_i$30$$]]=$lineStringColors_polygonColors_symbolIndexes$$[$i$28_i$29_i$30$$];$lineStringColors_polygonColors_symbolIndexes$$=symbolManager.blockColors(OverlayType.LineString,$idList$$[OverlayType.LineString].length);for($i$28_i$29_i$30$$=0;$i$28_i$29_i$30$$<$idList$$[OverlayType.LineString].length;$i$28_i$29_i$30$$++)$indexes$$[$idList$$[OverlayType.LineString][$i$28_i$29_i$30$$]]=$lineStringColors_polygonColors_symbolIndexes$$[$i$28_i$29_i$30$$];
return{indexes:$indexes$$,mainIndex:$mainIndex$$}};this.getCategoryFromPrefix=function $this$getCategoryFromPrefix$($prefix$$){for(var $id$$ in this.categories)if(this.categories[1*$id$$].categoryPrefix==$prefix$$)return 1*$id$$;return-1};this.getSorter=function $this$getSorter$($categoryID$jscomp$20_filterComponents$$){$categoryID$jscomp$20_filterComponents$$=this.categories[$categoryID$jscomp$20_filterComponents$$].filterComponents;if(null!=$categoryID$jscomp$20_filterComponents$$&&0!=$categoryID$jscomp$20_filterComponents$$.length)for(var $i$$=
0;$i$$<$categoryID$jscomp$20_filterComponents$$.length;$i$$++)if($categoryID$jscomp$20_filterComponents$$[$i$$]instanceof GroupingComponent)return $categoryID$jscomp$20_filterComponents$$[$i$$].sorter};this.addInfoWindowContentConstructor=function $this$addInfoWindowContentConstructor$($elementType$$,$constr$$){this.infoWindowContentConstructors[$elementType$$]=$constr$$};this.getEditableCategories=function $this$getEditableCategories$(){var $result$$=[],$cid$$;for($cid$$ in this.categories)this.categories[1*
$cid$$].editConfiguration&&$result$$.push(1*$cid$$);return $result$$};this.categoryAllowsNewElements=function $this$categoryAllowsNewElements$($categoryID$$,$overlayType$$){var $category$$=this.categories[$categoryID$$];return void 0!=$category$$.editConfiguration&&$category$$.editConfiguration.canAddNewOverlays($overlayType$$)};this.categoryAllowsFieldDataEditingForElement=function $this$categoryAllowsFieldDataEditingForElement$($category$jscomp$16_categoryID$$,$elementID$$,$overlayType$$){$category$jscomp$16_categoryID$$=
this.categories[$category$jscomp$16_categoryID$$];return void 0!=$category$jscomp$16_categoryID$$.editConfiguration&&$category$jscomp$16_categoryID$$.editConfiguration.canEditFieldData($elementID$$,$overlayType$$)};this.categoryAllowsGeoDataEditingForElement=function $this$categoryAllowsGeoDataEditingForElement$($category$jscomp$17_categoryID$$,$elementID$$,$overlayType$$){$category$jscomp$17_categoryID$$=this.categories[$category$jscomp$17_categoryID$$];return void 0!=$category$jscomp$17_categoryID$$.editConfiguration&&
$category$jscomp$17_categoryID$$.editConfiguration.canEditGeoData($elementID$$,$overlayType$$)};this.getEditFields=function $this$getEditFields$($categoryID$$,$overlayType$$){var $category$$=this.categories[$categoryID$$];return $category$$.editConfiguration?$category$$.editConfiguration.getEditFields($overlayType$$):[]}}
function CategoryInformation($categoryID$jscomp$25_i$$,$categoryPrefix$$,$name$$,$nameEmpty$$,$elementID$$,$filterComponents$$,$countNames$$,$textForNewComment$$,$textForListRetrieval$$,$listBuilder$$,$costumGetNameFunction$$,$editConfiguration$$,$singleSelect$$,$forbidRemovingFunction$$,$lineWidth$$,$subLegendNameFun$$){this.categoryID=$categoryID$jscomp$25_i$$;this.listBuilder="object"==typeof $listBuilder$$&&null!=$listBuilder$$?$listBuilder$$:null;this.categoryPrefix=$categoryPrefix$$.charAt(0);
this.name=$name$$;this.nameEmpty=void 0===$nameEmpty$$?"":$nameEmpty$$;this.element=null;null!=$elementID$$&&(this.element=jQuery("#"+$elementID$$));this.filterComponents=$filterComponents$$;this.countNamePlural=this.countNameSingular=void 0;null!=$countNames$$&&2<=$countNames$$.length&&(this.countNameSingular=$countNames$$[0],this.countNamePlural=$countNames$$[1]);this.costumGetNameFunction=$costumGetNameFunction$$;this.subLegendNameFun=$subLegendNameFun$$;this.textForNewComment=$textForNewComment$$;
this.singular=!0;if(void 0!=$filterComponents$$)for($categoryID$jscomp$25_i$$=0;$categoryID$jscomp$25_i$$<$filterComponents$$.length;$categoryID$jscomp$25_i$$++)if($filterComponents$$[$categoryID$jscomp$25_i$$]instanceof GroupingComponent){this.singular=!1;break}this.textForListRetrieval=$textForListRetrieval$$;this.editConfiguration=$editConfiguration$$;this.singleSelect=!0===$singleSelect$$;this.forbidRemovingFunction=$forbidRemovingFunction$$;this.lineWidth=$lineWidth$$}
function buildCategoryInformation($data$$){return new CategoryInformation($data$$.categoryID,$data$$.categoryPrefix,$data$$.name,$data$$.nameEmpty,$data$$.elementID,$data$$.filterComponents,$data$$.countNames,$data$$.textForNewComment,$data$$.textForListRetrieval,$data$$.listBuilder,$data$$.costumGetNameFunction,$data$$.editConfiguration,$data$$.singleSelect,$data$$.forbidRemovingFunction,$data$$.lineWidth,$data$$.subLegendNameFun)}function FilterComponent(){}
FilterComponent.prototype.getFilterScreenElement=function $FilterComponent$$getFilterScreenElement$($categoryId$$,$elementId$$){};FilterComponent.prototype.storeData=function $FilterComponent$$storeData$($data$$,$element$$,$categoryId$$,$elementId$$){};FilterComponent.prototype.storeDefaultData=function $FilterComponent$$storeDefaultData$($data$$,$categoryId$$,$elementId$$){};FilterComponent.prototype.setValues=function $FilterComponent$$setValues$($data$$,$element$$,$categoryId$$,$elementId$$){};
FilterComponent.prototype.afterAppending=function $FilterComponent$$afterAppending$($element$$,$categoryId$$,$elementId$$){};function FilterComponentDirectResult($data$$){this.data=$data$$};function IMGeometry(){}IMGeometry.prototype.getGeometry=function $IMGeometry$$getGeometry$(){};IMGeometry.prototype.getType=function $IMGeometry$$getType$(){};IMGeometry.prototype.isPolygon=function $IMGeometry$$isPolygon$(){};function IMPoint($geoData$$){this.geoData=$geoData$$;this.type=IMGeoType.Point;this.getGeometry=function $this$getGeometry$(){return this.geoData};this.getType=function $this$getType$(){return this.type};this.isPolygon=function $this$isPolygon$(){return!1}}
function IMPolygon($geoData$$,$boundingBox$$){this.geoData=$geoData$$;this.boundingBox=$boundingBox$$;this.type=IMGeoType.Polygon;this.getGeometry=function $this$getGeometry$(){return this.geoData};this.getBoundingBox=function $this$getBoundingBox$(){return this.boundingBox};this.getType=function $this$getType$(){return this.type};this.isPolygon=function $this$isPolygon$(){return!0}}
function IMMultiPolygon($geoData$$,$boundingBox$$){this.geoData=$geoData$$;this.boundingBox=$boundingBox$$;this.type=IMGeoType.MultiPolygon;this.getGeometry=function $this$getGeometry$(){return this.geoData};this.getBoundingBox=function $this$getBoundingBox$(){return this.boundingBox};this.getType=function $this$getType$(){return this.type};this.isPolygon=function $this$isPolygon$(){return!0}}
function IMMultiLineString($geoData$$){this.geoData=$geoData$$;this.type=IMGeoType.MultiLineString;this.getGeometry=function $this$getGeometry$(){return this.geoData};this.getType=function $this$getType$(){return this.type};this.isPolygon=function $this$isPolygon$(){return!1}}
function IMLineString($geoData$$){this.geoData=$geoData$$;this.type=IMGeoType.LineString;this.getGeometry=function $this$getGeometry$(){return this.geoData};this.getType=function $this$getType$(){return this.type};this.isPolygon=function $this$isPolygon$(){return!1}}
function GeoManager(){this.geoDataToStrictFormat=function $this$geoDataToStrictFormat$($string$$){$string$$=$string$$.trim();$string$$=$string$$.replace(/, /g,",");$string$$=$string$$.replace(/\) /g,")");$string$$=$string$$.replace(/\( /g,"(");return $string$$=$string$$.replace(/([A-Z]*) \(/g,"$1(")};this.parseGeoDataFormated=function $this$parseGeoDataFormated$($string$$,$boundingBox$$){return-1!=$string$$.indexOf("MULTIPOLYGON")?this.parseMultiPolygon($string$$,$boundingBox$$):-1!=$string$$.indexOf("POLYGON")?
this.parsePolygon($string$$,$boundingBox$$):-1!=$string$$.indexOf("MULTILINESTRING")?this.parseMultiLineString($string$$):-1!=$string$$.indexOf("LINESTRING")?this.parseLineString($string$$):-1!=$string$$.indexOf("POINT")?this.parsePoint($string$$):null};this.parseGeoDataUnformated=function $this$parseGeoDataUnformated$($string$$){return this.parseGeoDataFormated(this.geoDataToStrictFormat($string$$),void 0)};this.parsePoint=function $this$parsePoint$($result$jscomp$22_string$$){$result$jscomp$22_string$$=
$result$jscomp$22_string$$.replace("POINT(","");$result$jscomp$22_string$$=$result$jscomp$22_string$$.replace(")","");$result$jscomp$22_string$$=$result$jscomp$22_string$$.split(" ");return 2!=$result$jscomp$22_string$$.length?null:new IMPoint({lat:1*$result$jscomp$22_string$$[1],lng:1*$result$jscomp$22_string$$[0]})};this.parsePolygon=function $this$parsePolygon$($string$$,$boundingBox$$){$string$$=$string$$.replace("POLYGON((","");$string$$=$string$$.replace("))","");return new IMPolygon(this.parsePolygonCoords($string$$),
$boundingBox$$)};this.parseMultiPolygon=function $this$parseMultiPolygon$($string$$,$boundingBox$$){$string$$=$string$$.replace("MULTIPOLYGON(((","");$string$$=$string$$.replace(")))","");var $polygons$$=$string$$.split(")),((");$polygons$$[0].replace("((","");$polygons$$[$polygons$$.length-1].replace("))","");for(var $resultList$$=[],$i$$=0;$i$$<$polygons$$.length;$i$$++)$resultList$$.push(this.parsePolygonCoords($polygons$$[$i$$]));return new IMMultiPolygon($resultList$$,$boundingBox$$)};this.parsePolygonCoords=
function $this$parsePolygonCoords$($polygons$jscomp$1_string$$){var $coords$$=[];$polygons$jscomp$1_string$$=$polygons$jscomp$1_string$$.split("),(");for(var $i$$=0;$i$$<$polygons$jscomp$1_string$$.length;$i$$++){$coords$$[$i$$]=[];for(var $values$$=$polygons$jscomp$1_string$$[$i$$].split(","),$j$$=0;$j$$<$values$$.length;$j$$++){var $coord$$=$values$$[$j$$].split(" ");$coords$$[$i$$].push({lat:1*$coord$$[1],lng:1*$coord$$[0]})}}return $coords$$};this.parseLineCoords=function $this$parseLineCoords$($string$jscomp$11_values$$){var $coords$$=
[];$string$jscomp$11_values$$=$string$jscomp$11_values$$.split(",");for(var $j$$=0;$j$$<$string$jscomp$11_values$$.length;$j$$++){var $coord$$=$string$jscomp$11_values$$[$j$$].split(" ");$coords$$.push({lat:1*$coord$$[1],lng:1*$coord$$[0]})}return $coords$$};this.parseMultiLineString=function $this$parseMultiLineString$($polylines_string$$){$polylines_string$$=$polylines_string$$.replace("MULTILINESTRING((","");$polylines_string$$=$polylines_string$$.replace("))","");$polylines_string$$=$polylines_string$$.split("),(");
var $resultList$$=Array($polylines_string$$.length);$polylines_string$$[0].replace("(","");$polylines_string$$[$polylines_string$$.length-1].replace(")","");for(var $i$$=0;$i$$<$polylines_string$$.length;$i$$++)$resultList$$[$i$$]=this.parseLineCoords($polylines_string$$[$i$$]);return new IMMultiLineString($resultList$$)};this.parseLineString=function $this$parseLineString$($string$$){$string$$=$string$$.replace("LINESTRING(","");$string$$=$string$$.replace(")","");return new IMLineString(this.parseLineCoords($string$$))};
this.pointInPolygon=function $this$pointInPolygon$($point$$,$polygon$$){console.log($point$$);console.log($polygon$$);var $geoDataPoint$$=$point$$.getGeometry();switch($polygon$$.getType()){case IMGeoType.Polygon:var $geoDataMultiPolygon_geoDataPolygon$$=$polygon$$.getGeometry();return this.generalPolygonTest($geoDataPoint$$,$geoDataMultiPolygon_geoDataPolygon$$);case IMGeoType.MultiPolygon:$geoDataMultiPolygon_geoDataPolygon$$=$polygon$$.getGeometry();for(var $len$$=$geoDataMultiPolygon_geoDataPolygon$$.length,
$i$$=0;$i$$<$len$$;$i$$++)if(this.generalPolygonTest($geoDataPoint$$,$geoDataMultiPolygon_geoDataPolygon$$[$i$$]))return!0}return!1};this.generalPolygonTest=function $this$generalPolygonTest$($pointData$$,$polygonData$$){if(!this.simplePolygonTest($pointData$$,$polygonData$$[0]))return!1;for(var $len$$=$polygonData$$.length,$i$$=1;$i$$<$len$$;$i$$++)if(this.simplePolygonTest($pointData$$,$polygonData$$[$i$$]))return!1;return!0};this.simplePolygonTest=function $this$simplePolygonTest$($pointData$$,
$polygonData$$){for(var $x$$=$pointData$$.lat,$y$$=$pointData$$.lng,$inside$$=!1,$i$$=0,$j$$=$polygonData$$.length-1;$i$$<$polygonData$$.length;$j$$=$i$$++){var $xi$$=$polygonData$$[$i$$].lat,$yi$$=$polygonData$$[$i$$].lng,$xj$$=$polygonData$$[$j$$].lat;$j$$=$polygonData$$[$j$$].lng;$yi$$>$y$$!=$j$$>$y$$&&$x$$<($xj$$-$xi$$)*($y$$-$yi$$)/($j$$-$yi$$)+$xi$$&&($inside$$=!$inside$$)}return $inside$$}};function openSaveDialog(){0==legend.getLength()?alert(TRANSLATIONS.NO_SELECTION):(jQuery("#nameTK").val(""),jQuery("#beschreibungTK").val(""),jQuery("#karteSpeichern").dialog({minWidth:500}))}function mapSQL($id$$,$args$$,$callback$$){jQuery.post(ajaxurl,jQuery.extend({action:"im_a",namespace:"load_data",category:$id$$,lang:PATH.language,_wpnonce:jQuery("#_wpnonce").val()},$args$$),function($response$$){$callback$$($response$$)})}
function arrayIndexOf($arr$$,$value$$){for(var $i$$=0;$i$$<$arr$$.length;$i$$++){for(var $eq$$=!0,$j$$=0;$j$$<$arr$$[$i$$].length;$j$$++)if($arr$$[$i$$][$j$$]!=$value$$[$j$$]){$eq$$=!1;break}if($eq$$)return $i$$}return-1}function linkifyF($id$$){jQuery("#content"+$id$$).linkify()}function decimalToHex($d$$,$padding$$){var $hex$$=$d$$.toString(16);for($padding$$="undefined"===typeof $padding$$||null===$padding$$?$padding$$=2:$padding$$;$hex$$.length<$padding$$;)$hex$$="0"+$hex$$;return $hex$$}
function addParamToUrl($url$$,$param$$,$value$$){$url$$=new URL($url$$);var $params$$=new URLSearchParams($url$$.search);$params$$.set($param$$,$value$$);$url$$.search=$params$$.toString();return $url$$.toString()}function getKeyByValue($object$$,$value$$){return Object.keys($object$$).find(function($key$$){return $object$$[$key$$]===$value$$})}
function im_addMouseOverHelp($element$$,$content$$){$element$$.qtip({content:{text:$content$$,title:{button:!0}},show:{event:"mouseenter",solo:!0},style:{classes:"qtip-grey"},events:{render:function($event$$,$api$$){$api$$.elements.target.bind("click",function(){$api$$.set("hide.event",!1)})},hide:function($event$$,$api$$){$api$$.set("hide.event","mouseleave")}},position:{viewport:jQuery(window),adjust:{method:"flip"}}})}
function getInfoWindowContentSeparator(){return"<br/><hr style='width: 100%; height: 3px; margin: 0 auto;'><br />"};var selectModes={Chosen:0,Select2:1};
function addNewEnumValueScript($selector$$,$mode$$,$dbName$$,$callback$$){void 0==$selector$$&&($selector$$=".im_enum_select");void 0==$mode$$&&($mode$$=selectModes.Chosen);jQuery($selector$$).change(function(){var $selectObject$$=jQuery(this);"###NEW###"==$selectObject$$.val()&&(updateSelect($selectObject$$,"",$mode$$),newEnumEntry(this,$selectObject$$.data("table"),$selectObject$$.data("column"),$selectObject$$.data("nonce"),$mode$$,$dbName$$,$callback$$))})}
function addNewValueScript($selector$$,$callback$$,$mode$$){jQuery($selector$$).change(function(){var $selectObject$$=jQuery(this);"###NEW###"==$selectObject$$.val()&&(updateSelect($selectObject$$,"",$mode$$),showTableEntryDialog("TEB_"+$selectObject$$.prop("id"),$callback$$,$mode$$))})}
function initGuiElements(){jQuery(".im_table_select:visible").val("").chosen(chosenSettings);jQuery(".im_table_select").each(function(){jQuery(this).data("getSelectedValue",function(){return jQuery(this).val()}.bind(this));jQuery(this).data("getName",function($key$$){$key$$=$key$$.substring(1);return jQuery(this).children("option[value='"+$key$$+"']").first().text()}.bind(this));jQuery(this).data("reset",function(){jQuery(this).val("0").trigger("chosen:updated")}.bind(this))});jQuery(".editCommentLink").click(commentManager.editComment);
jQuery(".saveCommentButton").click(function(){commentManager.saveComment()});jQuery(".sf-menu-toplevel").superfish();jQuery(".sf-tree-leaf").click(function(){var $topLevel$$=jQuery(this).closest(".sf-menu-toplevel");$topLevel$$.data("lastValue",jQuery(this).data("id"));$topLevel$$.trigger("change");jQuery($topLevel$$).superfish("hide")});jQuery(".sf-menu-toplevel").each(function(){jQuery(this).data("getSelectedValue",function(){return jQuery(this).data("lastValue")}.bind(this));jQuery(this).data("getName",
function($key$$){$key$$=$key$$.substring(1);return jQuery(this).find("a[data-id="+$key$$+"]").text()}.bind(this));jQuery(this).data("reset",function(){})});var $synMap$$=jQuery("#IM_Syn_Map_Selection");$synMap$$.val("").trigger("chosen:updated");$synMap$$.change(function(){!1!==symbolClusterer.checkQuantify()&&symbolClusterer.toggleQuantifyMode();categoryManager.loadSynopticMap(1*$synMap$$.val(),"USER");jQuery(document).trigger("im_load_syn_map");$synMap$$.val("").trigger("chosen:updated")});jQuery("#IM_Save_Syn_Map_Button").click(function(){0==
legend.getLength()?alert(TRANSLATIONS.NO_SELECTION):(jQuery("#IM_Syn_Map_Name").val(""),jQuery("#IM_Syn_Map_Description").val(""),jQuery("#IM_Save_Syn_Map").modal())});jQuery("#IM_Save_Syn_Map_Final_Button").click(categoryManager.saveSynopticMap);jQuery("#helpRelease").qtip({content:{text:TRANSLATIONS.HELP_RELEASE},style:{classes:"qtip-blue"}});initCanvasMenu();createLocNavigationDiv();addSelect2ToSearchField();window.onpopstate=function $window$onpopstate$($event$$){$event$$.state&&$event$$.state.tk?
categoryManager.loadSynopticMap($event$$.state.tk,"URL"):$event$$.state&&$event$$.state.content?legend.switchToState($event$$.state.content):$event$$.state&&$event$$.state.layer?mapInterface.setLayer($event$$.state.layer):(legend.switchToState([]),mapInterface.setLayer(0))};jQuery(".leafletcustom").on("click",function($e$$){$e$$.stopPropagation()});jQuery(document).on("click",".similarity_button",function(){var $id$$=jQuery(this).data("id"),$data$$={action:"im_a",namespace:"get_similarity_data",id_polygon:$id$$,
_wpnonce:jQuery("#_wpnonce").val()};jQuery.post(ajaxurl,$data$$,function($data$jscomp$97_response$$){$data$jscomp$97_response$$=JSON.parse($data$jscomp$97_response$$);var $mapShape$$=symbolClusterer.showSimilarity($id$$,$data$jscomp$97_response$$.similarities);$mapShape$$.infoWindowContent=new SimpleInfoWindowContent(-99,"",OverlayType.Polygon,{name:"Test",description:$data$jscomp$97_response$$.html});$mapShape$$.updateInfoWindow()})})}
function showTableEntryDialog($id$$,$callback$$,$mode$$,$dbName$$,$suppressUserName$$,$primaryKeyField$$,$updateId$$,$values$$){var $divObject$$=jQuery("#"+$id$$);jQuery("#error"+$id$$).html("");$divObject$$.dialog({minWidth:700,modal:!0});if(void 0!==$values$$)for(var $key$$ in $values$$)$divObject$$.find("form[name=inputNewConceptForTree] [name="+$key$$+"]").val($values$$[$key$$]);$mode$$==selectModes.Chosen?($divObject$$.find("select").chosen("destroy"),$divObject$$.find("select").chosen({allow_single_deselect:!0})):
$mode$$==selectModes.Select2&&($divObject$$.find("select").select2("destroy"),$divObject$$.find("select").select2());$primaryKeyField$$&&$updateId$$?jQuery("#save"+$id$$).val(jQuery("#save"+$id$$).data("update-value")):jQuery("#save"+$id$$).val(jQuery("#save"+$id$$).data("insert-value"));jQuery("#save"+$id$$).unbind("click");jQuery("#save"+$id$$).click(function(){addEntryToTable($divObject$$.data("table"),$id$$,$callback$$,$mode$$,$dbName$$,$suppressUserName$$,$primaryKeyField$$,$updateId$$)})}
function addEntryToTable($table$$,$selectId$$,$callback$$,$mode$$,$dbName$$,$suppressUserName$$,$primaryKeyField$$,$updateId$$){for(var $e$$=document.forms["input"+$selectId$$].elements,$elementArray$$=[],$nonce$$,$i$jscomp$0$$=0;$i$jscomp$0$$<$e$$.length;$i$jscomp$0$$++)"_wpnonce"==$e$$[$i$jscomp$0$$].name?$nonce$$=$e$$[$i$jscomp$0$$].value:"chosen-search"!=$e$$[$i$jscomp$0$$].parentNode.className&&$elementArray$$.push($e$$[$i$jscomp$0$$]);var $data$$=getJSONDataFromInputWindow($elementArray$$,$table$$,
$suppressUserName$$,$primaryKeyField$$,$updateId$$);null!=$data$$&&($data$$._wpnonce=$nonce$$,void 0!=$dbName$$&&($data$$.dbname=$dbName$$),jQuery.post(ajaxurl,$data$$,function($response$$){if("-1"==$response$$)jQuery("#error"+$selectId$$).html("Not allowed!");else if(0===$response$$.indexOf("Error: "))jQuery("#error"+$selectId$$).html($response$$);else{resetFields($e$$,$mode$$);jQuery("#"+$selectId$$).dialog("close");for(var $paramData$$={},$rows$$=JSON.parse($data$$.rows),$values$$=JSON.parse($data$$.values),
$i$$=0;$i$$<$rows$$.length;$i$$++)$paramData$$[$rows$$[$i$$]]=$values$$[$i$$];$paramData$$.id=$response$$;if("string"==typeof $callback$$)switch($callback$$){case "reload":location.reload();break;default:alert("Unknown callback shortcut!")}else null!=$callback$$&&$callback$$($paramData$$)}}))}
function resetFields($e$$,$mode$$){for(var $i$$=0;$i$$<$e$$.length;$i$$++)if("hidden"!=$e$$[$i$$].type){var $currentE$$=jQuery($e$$[$i$$]),$currentType$$=$currentE$$.prop("tagName").toLowerCase();"select"===$currentType$$?($currentE$$[0].selectedIndex=0,$mode$$==selectModes.Chosen?$currentE$$.trigger("chosen:update"):$mode$$==selectModes.Select2&&-1!==$e$$[$i$$].className.indexOf("select2-hidden-accessible")&&$currentE$$.trigger("change")):"input"===$currentType$$&&"checkbox"===$currentE$$.prop("type")?
$currentE$$.prop("checked",!1):$currentE$$.val("")}}
function getJSONDataFromInputWindow($data$jscomp$99_elements$$,$table$$,$suppressUserName$$,$primaryKeyField$$,$updateId$$){for(var $rows$$=[],$values$$=[],$format$$=[],$defaultFields$$=[],$i$$=0;$i$$<$data$jscomp$99_elements$$.length;$i$$++)if(!$suppressUserName$$||"user"!=$data$jscomp$99_elements$$[$i$$].dataset.meta){if((""==$data$jscomp$99_elements$$[$i$$].value||null==$data$jscomp$99_elements$$[$i$$].value)&&"1"==$data$jscomp$99_elements$$[$i$$].dataset.nonempty)return alert('Das Feld "'+$data$jscomp$99_elements$$[$i$$].name+
'" darf nicht leer sein!'),null;var $indexName$$=$rows$$.indexOf($data$jscomp$99_elements$$[$i$$].name);if(-1===$indexName$$)if("1"==$data$jscomp$99_elements$$[$i$$].dataset.emptydefault&&""==$data$jscomp$99_elements$$[$i$$].value)$updateId$$&&$defaultFields$$.push($data$jscomp$99_elements$$[$i$$].name);else{if("B"==$data$jscomp$99_elements$$[$i$$].dataset.type)$values$$.push($data$jscomp$99_elements$$[$i$$].checked?"1":"0"),$format$$.push("%d");else if("S"==$data$jscomp$99_elements$$[$i$$].dataset.type)$values$$.push($data$jscomp$99_elements$$[$i$$].checked?
$data$jscomp$99_elements$$[$i$$].value:""),$format$$.push("%s");else if("N"==$data$jscomp$99_elements$$[$i$$].dataset.type){if(isNaN($data$jscomp$99_elements$$[$i$$].value))return alert("Im Feld '"+$data$jscomp$99_elements$$[$i$$].name+"' muss eine Nummer stehen!"),null;$values$$.push($data$jscomp$99_elements$$[$i$$].value);$format$$.push("%d")}else $values$$.push($data$jscomp$99_elements$$[$i$$].value),$format$$.push("%s");$rows$$.push($data$jscomp$99_elements$$[$i$$].name)}else $data$jscomp$99_elements$$[$i$$].checked&&
($values$$[$indexName$$]=""==$values$$[$indexName$$]?$data$jscomp$99_elements$$[$i$$].value:$values$$[$indexName$$]+("+"+$data$jscomp$99_elements$$[$i$$].value))}$data$jscomp$99_elements$$={action:"im_u",namespace:"gui_elements",query:$updateId$$?"update_table_value":"add_new_entry_to_table",table:$table$$,rows:JSON.stringify($rows$$),values:JSON.stringify($values$$),format:JSON.stringify($format$$)};$updateId$$&&$primaryKeyField$$&&($data$jscomp$99_elements$$.id=$updateId$$,$data$jscomp$99_elements$$.key_field=
$primaryKeyField$$);$updateId$$&&($data$jscomp$99_elements$$.defaultFields=$defaultFields$$);return $data$jscomp$99_elements$$}
function newEnumEntry($caller_data$$,$table$$,$col$$,$nonce$$,$mode$$,$dbName$$,$callback$$){var $selectObject$$=jQuery($caller_data$$),$newVal$$=prompt(TRANSLATIONS.NEW_ENTRY,"");null!=$newVal$$&&""!=$newVal$$?($caller_data$$={action:"im_u",namespace:"gui_elements",query:"add_enum_value",table:$table$$,col:$col$$,val:$newVal$$,_wpnonce:$nonce$$},$dbName$$&&($caller_data$$.dbname=$dbName$$),jQuery.post(ajaxurl,$caller_data$$,function($response$$){"-1"==$response$$?alert("Not allowed!"):0===$response$$.indexOf("Error: ")?
alert($response$$):($selectObject$$.append("<option value='"+$newVal$$+"'>"+$newVal$$+"</option>"),updateSelect($selectObject$$,$newVal$$,$mode$$),$callback$$&&$callback$$({newValue:$newVal$$}),alert(TRANSLATIONS.VALUE_ADDED))})):updateSelect($selectObject$$,[],$mode$$)}function updateSelect($element$$,$value$$,$mode$$){$element$$.val($value$$);switch($mode$$){case selectModes.Chosen:$element$$.trigger("chosen:updated");case selectModes.Select2:$element$$.trigger("change")}}
function createLocNavigationDiv(){mapInterface.addLocationDiv(function($e$$){jQuery("#IM_loc_nav_popup").modal()},function(){jQuery("#IM_loc_nav_popup").one("shown.bs.modal",function(){var $ajax_data_loc$$=getAjaxData("load_loc_data"),$select2_lang$$=PATH.language;"si"==$select2_lang$$&&($select2_lang$$="sl");jQuery(".loc_data_select").select2({ajax:$ajax_data_loc$$,minimumInputLength:3,placeholder:TRANSLATIONS.SEARCH_PLACEHOLDER,escapeMarkup:function($markup$$){return $markup$$},delay:250,templateResult:formatLocResults,
width:"100%",language:$select2_lang$$}).on("select2:select",function($e$$){jQuery("#IM_loc_nav_popup").modal("hide");gotoLocation($e$$.params.data.id,!0)});getAjaxData("global_search")});jQuery("#IM_loc_nav_popup").on("show.bs.modal",function(){try{jQuery(".loc_data_select").val("").trigger("change")}catch($e$$){}})})}
function addSelect2ToSearchField(){getAjaxData("load_loc_data");var $select2_lang$$=PATH.language;"si"==$select2_lang$$&&($select2_lang$$="sl");var $ajax_data_lang$$=getAjaxData("global_search"),$lang_select2$$=jQuery(".global_search").select2({ajax:$ajax_data_lang$$,minimumInputLength:3,placeholder:TRANSLATIONS.SEARCH_PLACEHOLDER,escapeMarkup:function($markup$$){return $markup$$},templateResult:formatLocResults,width:"100%",language:$select2_lang$$});$lang_select2$$.on("select2:select",function($e$jscomp$29_id$$){jQuery("#IM_lang_search_modal").modal("hide");
$e$jscomp$29_id$$=$e$jscomp$29_id$$.params.data.id;$e$jscomp$29_id$$.startsWith("SYN")?categoryManager.loadSynopticMap($e$jscomp$29_id$$.substring(3),"USER"):$e$jscomp$29_id$$.startsWith("LOC")?gotoLocation($e$jscomp$29_id$$.substring(3),!0):categoryManager.showFilterScreen(categoryManager.categoryFromId($e$jscomp$29_id$$),$e$jscomp$29_id$$);$lang_select2$$.val(null).trigger("change")});$lang_select2$$.on("select2:open",function($dropdown_e$jscomp$30_id$$){$dropdown_e$jscomp$30_id$$=jQuery(this).parent().find(".select2-selection.select2-selection--multiple").attr("aria-owns");
$dropdown_e$jscomp$30_id$$=jQuery("#"+$dropdown_e$jscomp$30_id$$).parent().parent().parent();$dropdown_e$jscomp$30_id$$.attr("id","global_search_dropdown");var $height$$=jQuery("#leftTable").height();300>$height$$&&($height$$=300);$dropdown_e$jscomp$30_id$$.find("ul.select2-results__options").css("max-height",$height$$+"px")})}
function getAjaxData($namespace$$){return{dataType:"json",type:"POST",url:ajaxurl,delay:250,data:function($params$$){return{search:$params$$.term,action:"im_a",namespace:$namespace$$,lang:PATH.language,_wpnonce:jQuery("#_wpnonce").val()}},processResults:function($data$$,$params$$){var $results_by_categories$$={};$params$$.page=$params$$.page||1;for(var $key$$ in $data$$.results){var $item$$=$data$$.results[$key$$],$desc$$=$item$$.description;null==$results_by_categories$$[$desc$$]&&($results_by_categories$$[$desc$$]=
[]);$results_by_categories$$[$desc$$].push($item$$)}$item$$=[];for($key$$ in $results_by_categories$$){$desc$$={};var $obj$$=$results_by_categories$$[$key$$];$desc$$.text=$key$$;$desc$$.children=$obj$$;$item$$.push($desc$$)}return{results:$item$$,pagination:{more:30*$params$$.page<$data$$.total_count}}}}}function formatLocResults($data$$){return $data$$.loading?TRANSLATIONS.SEARCH_LOADING:"<div>"+$data$$.text+"</div>"}
function gotoLocation($id$$,$zoom$$){var $data$$={action:"im_a",namespace:"goto_loc",loc_id:$id$$,_wpnonce:jQuery("#_wpnonce").val()};jQuery.post(ajaxurl,$data$$,function($marker$jscomp$2_response$jscomp$12_text$$){if("-1"==$marker$jscomp$2_response$jscomp$12_text$$)alert("Not allowed!");else{var $res$$=JSON.parse($marker$jscomp$2_response$jscomp$12_text$$);$marker$jscomp$2_response$jscomp$12_text$$=$res$$.text;$res$$=$res$$.point.match(/\(\(\s*(.*?)\s*,/)[1].split(" ");$marker$jscomp$2_response$jscomp$12_text$$=
mapInterface.addLocationMarker(parseFloat($res$$[1]),parseFloat($res$$[0]),$marker$jscomp$2_response$jscomp$12_text$$,$id$$,$zoom$$);mapState.addLocationMarker($id$$,$marker$jscomp$2_response$jscomp$12_text$$)}})}
function adjustMapModalContent(){var $remaining_height_window_height$$=window.innerHeight;jQuery(".im_map_modal_body").css("height","auto");var $current_height$$=jQuery(".im_map_modal_body").height();$remaining_height_window_height$$=$remaining_height_window_height$$-jQuery(".im_map_modal_body").offset().top-jQuery(".modal-footer.im_custom_footer_big").outerHeight()-25;$remaining_height_window_height$$<$current_height$$&&jQuery(".im_map_modal_body").height($remaining_height_window_height$$-30)}
function initCanvasMenu(){jQuery.ajax({dataType:"json",url:PATH.gradientFile,success:function($data$$){createCanvasMenu($data$$)}})}
function createCanvasMenu($gradients_help_symbol$$){var $container$jscomp$3_i$$=jQuery('<div id="listcontainer"></div>');jQuery("body").append($container$jscomp$3_i$$);var $listout$$=!1,$gradient_icon$jscomp$1_list$$=jQuery('<ul class="canvas_list"></ul>');$container$jscomp$3_i$$.append($gradient_icon$jscomp$1_list$$);$gradient_icon$jscomp$1_list$$=jQuery('<i style="display:none" class="fas fa-long-arrow-alt-up canvas_icon" aria-hidden="true"></i>');$container$jscomp$3_i$$.append($gradient_icon$jscomp$1_list$$);
$container$jscomp$3_i$$.append(jQuery('<div id="activediv"></div>'));$gradient_icon$jscomp$1_list$$=jQuery('<div id="gradient_startblock"></div>');$container$jscomp$3_i$$.append($gradient_icon$jscomp$1_list$$);for($container$jscomp$3_i$$=0;$container$jscomp$3_i$$<$gradients_help_symbol$$.length;$container$jscomp$3_i$$++){$gradient_icon$jscomp$1_list$$=$gradients_help_symbol$$[$container$jscomp$3_i$$];var $canvastextdiv_gdiv_hoverdiv$$=jQuery('<canvas id="barcanvas_'+$container$jscomp$3_i$$+'" class="barcanvas" width=256" height="35" ></canvas>');
if(0==$container$jscomp$3_i$$){var $active$$=jQuery("#activediv"),$canvas$jscomp$0$$=jQuery('<div class="exchangeparent"></div>'),$legend_0$$=jQuery('<div id="colorbarlegend_left" class="colorbarlegenditem">0</div>'),$legend_max$$=jQuery('<div id="colorbarlegend_right" class="colorbarlegenditem">142</div>');$active$$.append($legend_0$$);$active$$.append($legend_max$$);$active$$.append($canvas$jscomp$0$$);$canvas$jscomp$0$$.append($canvastextdiv_gdiv_hoverdiv$$);$canvastextdiv_gdiv_hoverdiv$$=jQuery('<div class="hoverdiv"></div>');
$canvas$jscomp$0$$.append($canvastextdiv_gdiv_hoverdiv$$);$canvastextdiv_gdiv_hoverdiv$$=jQuery('<div class="canvastext">'+$gradient_icon$jscomp$1_list$$.name+"</div>");$canvas$jscomp$0$$.append($canvastextdiv_gdiv_hoverdiv$$);$canvas$jscomp$0$$=document.getElementById("barcanvas_"+$container$jscomp$3_i$$)}else $canvas$jscomp$0$$=jQuery("<li></li>"),$canvas$jscomp$0$$.append($canvastextdiv_gdiv_hoverdiv$$),jQuery(".canvas_list").prepend($canvas$jscomp$0$$),$canvastextdiv_gdiv_hoverdiv$$=jQuery('<div class="hoverdiv"></div>'),
$canvas$jscomp$0$$.append($canvastextdiv_gdiv_hoverdiv$$),$canvastextdiv_gdiv_hoverdiv$$=jQuery('<div class="canvastext">'+$gradient_icon$jscomp$1_list$$.name+"</div>"),$canvas$jscomp$0$$.append($canvastextdiv_gdiv_hoverdiv$$),$canvas$jscomp$0$$=document.getElementById("barcanvas_"+$container$jscomp$3_i$$);createCanvas($canvas$jscomp$0$$,$gradient_icon$jscomp$1_list$$,256)}jQuery(".canvas_list li").hover(function(){jQuery(this).find(".hoverdiv").show();jQuery(this).find(".canvastext").show()},function(){jQuery(this).find(".hoverdiv").hide();
jQuery(this).find(".canvastext").hide()});jQuery("#activediv").hover(function(){jQuery(this).find(".hoverdiv").show();jQuery(this).find(".canvastext").show();jQuery("#listcontainer").find(".canvas_icon").show();jQuery(".gradient_help").hide()},function(){jQuery(this).find(".hoverdiv").hide();jQuery(this).find(".canvastext").hide();jQuery("#listcontainer").find(".canvas_icon").hide();jQuery(".gradient_help").show()});jQuery("#activediv").click(function(){$listout$$=adjustCanvasList($listout$$,!0)});
jQuery("#gradient_startblock").on("click",function(){$listout$$&&($listout$$=adjustCanvasList($listout$$,!1))});jQuery(".canvas_list li").click(function(){jQuery(".hoverdiv").hide();jQuery(".canvastext").hide();var $clicked_canvas$$=jQuery(this).children(),$old_active$$=jQuery(".exchangeparent").children();jQuery(".canvas_list").slideToggle();jQuery(".colorbarlegenditem").css("display","none")&&setTimeout(function(){jQuery(".colorbarlegenditem").fadeIn("slow")},200);jQuery(".canvas_icon").toggleClass("fas fa-long-arrow-alt-up fas fa-long-arrow-alt-down");
jQuery(".exchangeparent").append($clicked_canvas$$);jQuery(this).prepend($old_active$$);$listout$$=!1;symbolClusterer.changePolygonColor(!1);mapInterface.repaint(!0)});jQuery("#gradient_startblock").colorPicker({doRender:!1,opacity:!0,buildCallback:function($elm$$){jQuery("#listcontainer").append(jQuery(".cp-color-picker"))},renderCallback:function($elm$$,$toggled$$){var $alpha$jscomp$3_colors$$=this.color.colors,$rgb$$=$alpha$jscomp$3_colors$$.RND.rgb;$alpha$jscomp$3_colors$$=$alpha$jscomp$3_colors$$.alpha;
var $canvas$$=document.querySelector("#activediv canvas");if($toggled$$){var $initial_color$$=jQuery("#gradient_startblock").css("background-color");this.color.setColor($initial_color$$);this.render()}else symbolClusterer.changePolygonColor(!1);$toggled$$||changeStartColor($rgb$$,$alpha$jscomp$3_colors$$,$canvas$$,!1)}});$gradients_help_symbol$$=jQuery('<i class="gradient_help far fa-question-circle aria-hidden="true"></i>');jQuery("#listcontainer").append($gradients_help_symbol$$);im_addMouseOverHelp($gradients_help_symbol$$,
TRANSLATIONS.GRADIENT_HELP);document.getElementById("listcontainer");jQuery("#listcontainer").hide()}
function adjustCanvasList($listout$$,$keep_overlay$$){$listout$$=!$listout$$;jQuery(".canvas_list").slideToggle();jQuery(".canvas_icon").toggleClass("fas fa-long-arrow-alt-up fas fa-long-arrow-alt-down");jQuery(".colorbarlegenditem").hide();$listout$$||setTimeout(function(){jQuery(".colorbarlegenditem").fadeIn("slow")},200);$keep_overlay$$||(jQuery(".hoverdiv").hide(),jQuery(".canvastext").hide());return $listout$$}
function createCanvas($canvas$$,$gradient$$,$canvas_size$$){var $ctx$$=$canvas$$.getContext("2d");$ctx$$.rect(0,0,$canvas$$.width,$canvas$$.height);$canvas$$=$ctx$$.createLinearGradient(0,0,$canvas_size$$,0);for(var $i$$=0;$i$$<$gradient$$.stops.length;$i$$++)$canvas$$.addColorStop($gradient$$.stops[$i$$].value,$gradient$$.stops[$i$$].color);$ctx$$.fillStyle=$canvas$$;$ctx$$.fillRect(0,0,$canvas_size$$,35)}
function changeStartColor($rgb$$,$alpha_in$$,$canvas$$,$global_alpha$$){jQuery("#gradient_startblock").css("background-color","rgba("+$rgb$$.r+","+$rgb$$.g+","+$rgb$$.b+","+$alpha_in$$+")")}function parseColor($input$$){return $input$$.split("(")[1].split(")")[0].split(",")};function AbstractListBuilder($elements$$){}AbstractListBuilder.prototype.addListPrinter=function $AbstractListBuilder$$addListPrinter$($printer$$){};AbstractListBuilder.prototype.getListPrinters=function $AbstractListBuilder$$getListPrinters$(){};AbstractListBuilder.prototype.retrieveList=function $AbstractListBuilder$$retrieveList$($printerID$$,$elementsParam$$){};function ListPrinter(){}ListPrinter.prototype.getName=function $ListPrinter$$getName$(){};ListPrinter.prototype.getType=function $ListPrinter$$getType$(){};
ListPrinter.prototype.buildList=function $ListPrinter$$buildList$($data$$){};ListPrinter.prototype.isDownload=function $ListPrinter$$isDownload$(){};ListPrinter.prototype.downloadName=function $ListPrinter$$downloadName$(){};
function PrinterManager(){this.printers=[];this.addPrinter=function $this$addPrinter$($printer$$){this.printers.push($printer$$)};this.getPrinters=function $this$getPrinters$(){for(var $result$$=[],$i$$=0;$i$$<this.printers.length;$i$$++)$result$$.push(this.printers[$i$$].getName());return $result$$};this.getSinglePrinter=function $this$getSinglePrinter$($printerID$$){return this.printers[$printerID$$]}};function ListManager($listBuilderParam$$,$elementParam$$){this.listBuilder=$listBuilderParam$$;this.element=$elementParam$$;this.dialog=null;var $self$$=this;this.buildDialog=function $this$buildDialog$(){var $listDialog$$=document.createElement("div"),$table$$=document.createElement("table"),$tr1$$=document.createElement("tr"),$tdLabel_tdSelect$$=document.createElement("td");$tdLabel_tdSelect$$.appendChild(document.createTextNode(TRANSLATIONS.SELECT_LIST_TYPE));$tr1$$.appendChild($tdLabel_tdSelect$$);
$tdLabel_tdSelect$$=document.createElement("td");var $select$$=document.createElement("select");$select$$.id="listManagerPrinterSelection";for(var $printers$$=this.listBuilder.getListPrinters(),$i$$=0;$i$$<$printers$$.length;$i$$++){var $option$$=document.createElement("option");$option$$.value=$i$$;$option$$.appendChild(document.createTextNode($printers$$[$i$$]));$select$$.appendChild($option$$)}$tdLabel_tdSelect$$.appendChild($select$$);$tr1$$.appendChild($tdLabel_tdSelect$$);$table$$.appendChild($tr1$$);
$listDialog$$.appendChild($table$$);return $listDialog$$};this.showResult=function $this$showResult$(){var $jQueryElement_printerID$$=document.getElementById("listManagerPrinterSelection").value;$jQueryElement_printerID$$=$self$$.listBuilder.retrieveList($jQueryElement_printerID$$,$self$$.element);if(1==$jQueryElement_printerID$$[2]){var $blob$$=new Blob([$jQueryElement_printerID$$[1]],{type:$jQueryElement_printerID$$[0]}),$a$$=window.document.createElement("a");$a$$.href=window.URL.createObjectURL($blob$$);
$a$$.download=$jQueryElement_printerID$$[3];document.body.appendChild($a$$);$a$$.click();document.body.removeChild($a$$);$a$$.href=null}else $jQueryElement_printerID$$=-1!=$jQueryElement_printerID$$[0].indexOf("text/html")?jQuery("<div class='htmlTypeListView'>"+$jQueryElement_printerID$$[1]+"</div>"):jQuery("<div class='customTypeListView'><pre>"+$jQueryElement_printerID$$[1]+"</pre></div>"),jQuery(".export_list_popup .modal-body").empty().append($jQueryElement_printerID$$),jQuery(".export_list_popup").modal()};
this.showSelectionDialog=function $this$showSelectionDialog$(){var $options$$={resizable:!1,minHeight:180,modal:!0,buttons:{Cancel:function(){jQuery(this).dialog("close")}}};$options$$.buttons[TRANSLATIONS.PRINT_LIST]=this.showResult;this.dialog=jQuery(this.buildDialog()).dialog($options$$)}};function MapInterface($position$$,$options$$){}MapInterface.prototype.init=function $MapInterface$$init$($mapDiv$$,$callback$$,$polygonOptions$$,$baseLayerIndex$$){};MapInterface.prototype.createMarker=function $MapInterface$$createMarker$($latlng$$,$icon$$,$size$$,$movable$$,$mapSymbol$$,$zIndex$$){};MapInterface.prototype.updateMarker=function $MapInterface$$updateMarker$($marker$$,$icons$$,$mapSymbol$$,$zIndex$$){};
MapInterface.prototype.setMarkerVisible=function $MapInterface$$setMarkerVisible$($marker$$,$show$$){};MapInterface.prototype.getMarkerPosition=function $MapInterface$$getMarkerPosition$($marker$$){};MapInterface.prototype.getInfoWindowPosition=function $MapInterface$$getInfoWindowPosition$($infoWindow$$){};MapInterface.prototype.destroyOverlay=function $MapInterface$$destroyOverlay$($overlay$$){};MapInterface.prototype.moveMarker=function $MapInterface$$moveMarker$($marker$$,$newLat$$,$newLng$$){};
MapInterface.prototype.addMarkerListeners=function $MapInterface$$addMarkerListeners$($clickFun$$,$rightClickFun$$,$dragFun$$,$mouseOverFun$$,$mouseOutFun$$){};MapInterface.prototype.createShape=function $MapInterface$$createShape$($geoData$$,$mapShape$$,$id$$,$color$$,$lineWidth$$){};MapInterface.prototype.addShape=function $MapInterface$$addShape$($shapeObject$$){};MapInterface.prototype.removeShape=function $MapInterface$$removeShape$($shapeObject$$){};
MapInterface.prototype.addShapeListeners=function $MapInterface$$addShapeListeners$($clickFun$$){};MapInterface.prototype.createInfoWindow=function $MapInterface$$createInfoWindow$($anchorElement$$,$symbols$$,$elements$$,$mapElement$$){};MapInterface.prototype.openInfoWindow=function $MapInterface$$openInfoWindow$($anchorElement$$,$infoWindow$$,$tabIndex$$,$lat$$,$lng$$,$mapElement$$){};
MapInterface.prototype.updateInfoWindowContent=function $MapInterface$$updateInfoWindowContent$($infoWindow$$,$tabIndex$$,$newContent$$){};MapInterface.prototype.destroyInfoWindow=function $MapInterface$$destroyInfoWindow$($infoWindow$$){};MapInterface.prototype.addInfoWindowListeners=function $MapInterface$$addInfoWindowListeners$($tabOpenedFun$$,$tabClosedFun$$,$windowClosedFun$$,$locationWindowOpenedFun$$,$locationWindowClosedFun$$){};
MapInterface.prototype.addNewOverlaysComponent=function $MapInterface$$addNewOverlaysComponent$($list$$,$overlayAddedCallback$$){};MapInterface.prototype.removeNewOverlaysComponent=function $MapInterface$$removeNewOverlaysComponent$(){};MapInterface.prototype.addUndoComponent=function $MapInterface$$addUndoComponent$($revertInfo$$,$undoInfo$$,$commitInfo$$){};MapInterface.prototype.updateUndoComponent=function $MapInterface$$updateUndoComponent$($showRevert$$,$showUndo$$,$showCommit$$){};
MapInterface.prototype.removeUndoComponent=function $MapInterface$$removeUndoComponent$(){};MapInterface.prototype.createOptionElement=function $MapInterface$$createOptionElement$(){};MapInterface.prototype.removeOptionElement=function $MapInterface$$removeOptionElement$(){};MapInterface.prototype.addOptionElement=function $MapInterface$$addOptionElement$($element$$){};MapInterface.prototype.centerOnOverlay=function $MapInterface$$centerOnOverlay$($overlay$$){};
MapInterface.prototype.setCenter=function $MapInterface$$setCenter$($lat$$,$lng$$){};MapInterface.prototype.setZoom=function $MapInterface$$setZoom$($zoom$$){};MapInterface.prototype.setCenterAndZoom=function $MapInterface$$setCenterAndZoom$($lat$$,$lng$$,$zoom$$){};MapInterface.prototype.getZoom=function $MapInterface$$getZoom$(){};MapInterface.prototype.getWKTStringForOverlay=function $MapInterface$$getWKTStringForOverlay$($overlay$$){};
MapInterface.prototype.zoomToBounds=function $MapInterface$$zoomToBounds$($lat1$$,$lng1$$,$lat2$$,$lng2$$){};MapInterface.prototype.addLocationMarker=function $MapInterface$$addLocationMarker$($lat$$,$lng$$,$text$$,$id$$,$zoom$$){};MapInterface.prototype.changePolygonAppearance=function $MapInterface$$changePolygonAppearance$($polygon$$,$fillColor$$,$strokeColor$$,$fillOpacity$$,$strokeOpacity$$,$zIndex$$){};MapInterface.prototype.revertChangedOverlays=function $MapInterface$$revertChangedOverlays$(){};
MapInterface.prototype.updateMapStyle=function $MapInterface$$updateMapStyle$($quantifyMode$$){};MapInterface.prototype.showPrintVersion=function $MapInterface$$showPrintVersion$($print$$){};MapInterface.prototype.addLocationDiv=function $MapInterface$$addLocationDiv$($clickFunction$$,$callback$$){};MapInterface.prototype.getCenter=function $MapInterface$$getCenter$(){};MapInterface.prototype.repaint=function $MapInterface$$repaint$($ready$$){};MapInterface.prototype.setLayer=function $MapInterface$$setLayer$($index$$){};
MapInterface.prototype.addMapListeners=function $MapInterface$$addMapListeners$($baseLayerFun$$){};function MapState(){this.currentMapLayer=void 0;this.currentLocationMarkers={};this.currentInfowindowOwners=[];this.removeInfoWindowOwnerFromList=function $this$removeInfoWindowOwnerFromList$($idx$jscomp$3_mapElement$$){$idx$jscomp$3_mapElement$$=this.currentInfowindowOwners.indexOf($idx$jscomp$3_mapElement$$);-1!=$idx$jscomp$3_mapElement$$&&this.currentInfowindowOwners.splice($idx$jscomp$3_mapElement$$,1)};this.addInfoWindowOwnerToList=function $this$addInfoWindowOwnerToList$($mapElement$$){return-1==
this.currentInfowindowOwners.indexOf($mapElement$$)?(this.currentInfowindowOwners.push($mapElement$$),!0):!1};this.getInfoWindowCount=function $this$getInfoWindowCount$(){return this.currentInfowindowOwners.length};this.getInfoWindowOwner=function $this$getInfoWindowOwner$($index$$){return this.currentInfowindowOwners[$index$$]};this.getOpenInfoWindows=function $this$getOpenInfoWindows$(){for(var $result$$=[],$i$$=0;$i$$<this.currentInfowindowOwners.length;$i$$++){var $element$$=this.currentInfowindowOwners[$i$$],
$legendElement$$=$element$$.getLegendElement($element$$.currentTabIndex);if($element$$ instanceof MapShape){var $data$31_data$jscomp$108_latlng$$=mapInterface.getInfoWindowPosition($element$$.infoWindow);$data$31_data$jscomp$108_latlng$$={elementIndex:$element$$.index,lat:$data$31_data$jscomp$108_latlng$$.lat,lng:$data$31_data$jscomp$108_latlng$$.lng};$data$31_data$jscomp$108_latlng$$.key=$element$$.owner.key;$data$31_data$jscomp$108_latlng$$.category=$element$$.owner.category;$data$31_data$jscomp$108_latlng$$.parent_key=
$legendElement$$.parent?$legendElement$$.parent.key:null;$data$31_data$jscomp$108_latlng$$.parent_category=$legendElement$$.parent?$legendElement$$.parent.category:null;$result$$.push($data$31_data$jscomp$108_latlng$$)}else $data$31_data$jscomp$108_latlng$$=mapInterface.getMarkerPosition($element$$.getMarker()),$data$31_data$jscomp$108_latlng$$.key=$legendElement$$.key,$data$31_data$jscomp$108_latlng$$.category=$legendElement$$.category,$data$31_data$jscomp$108_latlng$$.parent_key=$legendElement$$.parent?
$legendElement$$.parent.key:null,$data$31_data$jscomp$108_latlng$$.parent_category=$legendElement$$.parent?$legendElement$$.parent.category:null,$data$31_data$jscomp$108_latlng$$.elementIndex=$element$$.parts[$element$$.currentTabIndex].indexes[0],$data$31_data$jscomp$108_latlng$$.tabIndex=$element$$.currentTabIndex,$result$$.push($data$31_data$jscomp$108_latlng$$)}return $result$$};this.addLocationMarker=function $this$addLocationMarker$($id$$,$marker$$){this.currentLocationMarkers[$id$$]=$marker$$};
this.removeLocationMarker=function $this$removeLocationMarker$($id$$){delete this.currentLocationMarkers[$id$$]};this.getLocationMarkers=function $this$getLocationMarkers$(){return Object.keys(this.currentLocationMarkers)};this.clean=function $this$clean$(){for(var $id$$ in this.currentLocationMarkers)this.currentLocationMarkers[$id$$].setMap(null)}};function MultiSymbolLayout($symbols$$){this.symbols=$symbols$$;this.rowHeights=[];this.colWidths=[];this.xvals=[];this.yvals=[];for(var $size$$=$symbols$$.length,$root$$=Math.ceil(Math.sqrt($size$$)),$numRows$$=$root$$*$root$$-$size$$<$root$$?$root$$:$root$$-1,$i$$=0;$i$$<$numRows$$;$i$$++)this.rowHeights[$i$$]=0;for($i$$=0;$i$$<$root$$;$i$$++)this.colWidths[$i$$]=0;var $acc_rowIndex$$=0,$colIndex$$=0;for($i$$=0;$i$$<$size$$;$i$$++){var $currSize$$=$symbols$$[$i$$].size;this.colWidths[$colIndex$$]<
$currSize$$&&(this.colWidths[$colIndex$$]=$currSize$$);this.rowHeights[$acc_rowIndex$$]<$currSize$$&&(this.rowHeights[$acc_rowIndex$$]=$currSize$$);$colIndex$$=($colIndex$$+1)%$root$$;0==$colIndex$$&&$acc_rowIndex$$++}for($i$$=$acc_rowIndex$$=0;$i$$<$numRows$$;$i$$++)$acc_rowIndex$$+=this.rowHeights[$i$$],this.rowHeights[$i$$]=$acc_rowIndex$$;for($i$$=$acc_rowIndex$$=0;$i$$<$root$$;$i$$++)$acc_rowIndex$$+=this.colWidths[$i$$],this.colWidths[$i$$]=$acc_rowIndex$$;$colIndex$$=$acc_rowIndex$$=0;if(2==
$size$$)this.xvals[0]=this.colWidths[0]-$symbols$$[0].size,this.yvals[0]=Math.floor(this.rowHeights[0]-$symbols$$[0].size)/2,this.xvals[1]=this.colWidths[0],this.yvals[1]=Math.floor(this.rowHeights[0]-$symbols$$[1].size)/2;else for($i$$=0;$i$$<$size$$;$i$$++)$currSize$$=$symbols$$[$i$$].size,this.xvals[$i$$]=0==$colIndex$$?this.colWidths[0]-$currSize$$:$colIndex$$==$root$$-1?this.colWidths[$colIndex$$-1]:this.colWidths[$colIndex$$]-$currSize$$-Math.floor((this.colWidths[$colIndex$$]-this.colWidths[$colIndex$$-
1]-$currSize$$)/2),this.yvals[$i$$]=0==$acc_rowIndex$$?this.rowHeights[0]-$currSize$$:$acc_rowIndex$$==$numRows$$-1?this.rowHeights[$acc_rowIndex$$-1]:this.rowHeights[$acc_rowIndex$$]-$currSize$$-Math.floor((this.rowHeights[$acc_rowIndex$$]-this.rowHeights[$acc_rowIndex$$-1]-$currSize$$)/2),$colIndex$$=($colIndex$$+1)%$root$$,0==$colIndex$$&&$acc_rowIndex$$++;this.getIcon=function $this$getIcon$($index$$){return this.symbols[$index$$].canvas};this.getWidth=function $this$getWidth$($scaleFactor$$){return this.colWidths[$root$$-
1]*(void 0===$scaleFactor$$?1:1*symbolRescaleFactor*$scaleFactor$$)};this.getHeight=function $this$getHeight$($scaleFactor$$){return this.rowHeights[$numRows$$-1]*(void 0===$scaleFactor$$?1:1*symbolRescaleFactor*$scaleFactor$$)};this.getXPosition=function $this$getXPosition$($index$$,$scaleFactor$$){return this.xvals[$index$$]*(void 0===$scaleFactor$$?1:1*symbolRescaleFactor*$scaleFactor$$)};this.getYPosition=function $this$getYPosition$($index$$,$scaleFactor$$){return this.yvals[$index$$]*(void 0===
$scaleFactor$$?1:1*symbolRescaleFactor*$scaleFactor$$)};this.createMultiSymbol=function $this$createMultiSymbol$(){var $canvas$$=document.createElement("canvas");$canvas$$.width=this.getWidth()*symbolRescaleFactor;$canvas$$.height=this.getHeight()*symbolRescaleFactor;for(var $context$$=$canvas$$.getContext("2d"),$i$32$$=0;$i$32$$<this.symbols.length;$i$32$$++)$context$$.drawImage(this.symbols[$i$32$$].canvas,this.getXPosition($i$32$$)*symbolRescaleFactor,this.getYPosition($i$32$$)*symbolRescaleFactor);
return{canvas:$canvas$$,width:this.getWidth(),height:this.getHeight()}};this.getMarkerShape=function $this$getMarkerShape$(){if(0==$size$$%$root$$)return{type:"rect",coords:[0,0,this.getWidth(),this.getHeight()]};var $fullLengthX$$=this.getWidth(),$fullLengthY$$=this.getHeight(),$shortLengthY$$=this.rowHeights[$numRows$$-2],$shortLengthX$$=this.colWidths[$size$$%$root$$-1];return{type:"poly",coords:[0,0,$fullLengthX$$,0,$fullLengthX$$,$shortLengthY$$,$shortLengthX$$,$shortLengthY$$,$shortLengthX$$,
$fullLengthY$$,0,$fullLengthY$$]}};this.computeIndexFromMousePosition=function $this$computeIndexFromMousePosition$($markerCenterX_xval$$,$markerCenterY_yval$$,$mousePositionX$$,$indexX_mousePositionY$$,$effScaleFactor$jscomp$4_result$jscomp$25_scaleFactor$$){$effScaleFactor$jscomp$4_result$jscomp$25_scaleFactor$$=void 0===$effScaleFactor$jscomp$4_result$jscomp$25_scaleFactor$$?1:1*symbolRescaleFactor*$effScaleFactor$jscomp$4_result$jscomp$25_scaleFactor$$;var $indexY_width$$=this.getWidth()*$effScaleFactor$jscomp$4_result$jscomp$25_scaleFactor$$,
$height$jscomp$27_i$$=this.getHeight()*$effScaleFactor$jscomp$4_result$jscomp$25_scaleFactor$$;$markerCenterX_xval$$=$mousePositionX$$-$markerCenterX_xval$$+$indexY_width$$/2;$markerCenterY_yval$$=$indexX_mousePositionY$$-$markerCenterY_yval$$+$height$jscomp$27_i$$/2;if(-5>$markerCenterX_xval$$||-5>$markerCenterY_yval$$||$markerCenterX_xval$$>=$indexY_width$$+5||$markerCenterY_yval$$>=$height$jscomp$27_i$$+5)return"out";if(1<$numRows$$&&$markerCenterY_yval$$>this.rowHeights[$numRows$$-2]+5&&$markerCenterX_xval$$>
this.colWidths[(this.symbols.length-1)%$root$$]+5)return!1;$indexX_mousePositionY$$=$root$$-1;$indexY_width$$=$numRows$$-1;for($height$jscomp$27_i$$=0;$height$jscomp$27_i$$<$root$$;$height$jscomp$27_i$$++)if($markerCenterX_xval$$<this.colWidths[$height$jscomp$27_i$$]*$effScaleFactor$jscomp$4_result$jscomp$25_scaleFactor$$){$indexX_mousePositionY$$=$height$jscomp$27_i$$;break}for($height$jscomp$27_i$$=0;$height$jscomp$27_i$$<$numRows$$;$height$jscomp$27_i$$++)if($markerCenterY_yval$$<this.rowHeights[$height$jscomp$27_i$$]*
$effScaleFactor$jscomp$4_result$jscomp$25_scaleFactor$$){$indexY_width$$=$height$jscomp$27_i$$;break}$effScaleFactor$jscomp$4_result$jscomp$25_scaleFactor$$=$indexX_mousePositionY$$+$indexY_width$$*$root$$;$effScaleFactor$jscomp$4_result$jscomp$25_scaleFactor$$>$size$$-1&&($effScaleFactor$jscomp$4_result$jscomp$25_scaleFactor$$=$size$$-1);return $effScaleFactor$jscomp$4_result$jscomp$25_scaleFactor$$}};function GroupingComponent($categoryList$$,$defaultValue$jscomp$0$$,$addEmptyValue$$,$sorter$$,$sorterApplicable$$,$tagList$$){this.categoryList=$categoryList$$;this.defaultValue=$defaultValue$jscomp$0$$;this.addEmptyValue=void 0!==$addEmptyValue$$?$addEmptyValue$$:!0;this.tagList=[];void 0!==$tagList$$&&(this.tagList=$tagList$$);this.sorter=$sorter$$;this.sorterApplicable=void 0==$sorterApplicable$$?function(){return!0}:$sorterApplicable$$;this.getFilterScreenElement=function $this$getFilterScreenElement$($categoryId$$,
$elementId$$){var $defaultValue$$="function"==typeof this.defaultValue?this.defaultValue($categoryId$$,$elementId$$):this.defaultValue;var $result$$=document.createElement("div");$result$$.className="filterComponent";$result$$.id="groupingComponent";var $capGroup_radioNoGroups$$=document.createElement("h2");$capGroup_radioNoGroups$$.appendChild(document.createTextNode(TRANSLATIONS.GROUPING));$result$$.appendChild($capGroup_radioNoGroups$$);$capGroup_radioNoGroups$$=document.createElement("input");
$capGroup_radioNoGroups$$.type="radio";$capGroup_radioNoGroups$$.name="subElementCategory";$capGroup_radioNoGroups$$.value="-2";void 0==$defaultValue$$&&($capGroup_radioNoGroups$$.checked=!0);if(this.addEmptyValue){var $radio_span_tagList$$=document.createElement("span");$radio_span_tagList$$.appendChild($capGroup_radioNoGroups$$);$radio_span_tagList$$.appendChild(document.createTextNode(TRANSLATIONS.NO_GROUPING));$result$$.appendChild($radio_span_tagList$$)}var $categoryList$jscomp$1_tag$$="function"===
typeof this.categoryList?this.categoryList($categoryId$$,$elementId$$):this.categoryList;for(var $defaultSet$$=!1,$i$$=0;$i$$<$categoryList$jscomp$1_tag$$.length;$i$$++){var $categoryID$$=$categoryList$jscomp$1_tag$$[$i$$],$radio$$=document.createElement("input");$radio$$.type="radio";$radio$$.name="subElementCategory";$radio$$.value=$categoryID$$;$categoryList$jscomp$1_tag$$[$i$$]==$defaultValue$$&&($defaultSet$$=$radio$$.checked=!0);$radio_span_tagList$$=document.createElement("span");$radio_span_tagList$$.appendChild($radio$$);
$radio_span_tagList$$.appendChild(document.createTextNode(categoryManager.getCategoryName($categoryID$$)+" "));$result$$.appendChild($radio_span_tagList$$)}$radio_span_tagList$$="function"===typeof this.tagList?this.tagList($categoryId$$,$elementId$$):this.tagList;if(!(0!=$categoryList$jscomp$1_tag$$.length&&null!=$categoryList$jscomp$1_tag$$.length||void 0!=$radio_span_tagList$$&&0!=$radio_span_tagList$$.length))return null;if(1==$categoryList$jscomp$1_tag$$.length+$radio_span_tagList$$.length)return 1==
$categoryList$jscomp$1_tag$$.length?new FilterComponentDirectResult({subElementCategory:$categoryList$jscomp$1_tag$$[0]}):new FilterComponentDirectResult({subElementCategory:"-3",selectedTag:$radio_span_tagList$$[0].tag});for($i$$=0;$i$$<$radio_span_tagList$$.length;$i$$++)$categoryList$jscomp$1_tag$$=$radio_span_tagList$$[$i$$].tag,$radio$$=document.createElement("input"),$radio$$.type="radio",$radio$$.name="subElementCategory",$radio$$.value=$categoryList$jscomp$1_tag$$,$categoryList$jscomp$1_tag$$==
$defaultValue$$&&($defaultSet$$=$radio$$.checked=!0),$result$$.appendChild($radio$$),$result$$.appendChild(document.createTextNode($radio_span_tagList$$[$i$$].name+" "));null!=this.sorter&&$result$$.appendChild(this.sorter.getFilterScreenElement($categoryId$$,$elementId$$));$defaultSet$$||($capGroup_radioNoGroups$$.checked=!0);return $result$$};this.storeData=function $this$storeData$($data$$){var $selectedValue$$=jQuery("#groupingComponent input[name=subElementCategory]:checked").val();isNaN($selectedValue$$)?
($data$$.subElementCategory="-3",$data$$.selectedTag=$selectedValue$$):$data$$.subElementCategory=$selectedValue$$;this.sorter&&this.sorter.storeData($data$$);return!0};this.storeDefaultData=function $this$storeDefaultData$($data$$,$categoryId$jscomp$6_val$$,$elementId$$){void 0!==this.defaultValue&&($categoryId$jscomp$6_val$$="function"==typeof this.defaultValue?this.defaultValue($categoryId$jscomp$6_val$$,$elementId$$):this.defaultValue,void 0!==$categoryId$jscomp$6_val$$&&(isNaN($categoryId$jscomp$6_val$$)?
($data$$.subElementCategory="-3",$data$$.selectedTag=$categoryId$jscomp$6_val$$):$data$$.subElementCategory=$categoryId$jscomp$6_val$$));this.sorter&&this.sorter.storeDefaultData($data$$)};this.setValues=function $this$setValues$($data$$,$element$$,$categoryId$$,$elementId$$){-3==$data$$.subElementCategory?jQuery("#groupingComponent input[name=subElementCategory][value="+$data$$.selectedTag+"]").prop("checked",!0):jQuery("#groupingComponent input[name=subElementCategory][value="+$data$$.subElementCategory+
"]").prop("checked",!0);this.sorter&&this.sorter.setValues($data$$,$element$$,$categoryId$$,$elementId$$)};this.afterAppending=function $this$afterAppending$($element$$,$mainCategoryId$$,$elementId$$){if(null!=this.sorter){var $numSorters$$=this.sorter.sortTypes.length,$applFunc$$=this.sorterApplicable,$filerSortComponents$$=function $$filerSortComponents$$$($subCategoryId$$){for(var $i$$=0;$i$$<$numSorters$$;$i$$++){var $applicable_otherRadio$$=$applFunc$$($mainCategoryId$$,$elementId$$,$subCategoryId$$,
$i$$),$radio$$=jQuery("#sortingComponent input[name=sortName][value="+$i$$+"]");$radio$$.prop("disabled",!$applicable_otherRadio$$);!$applicable_otherRadio$$&&$radio$$.is(":checked")&&1<$numSorters$$&&($applicable_otherRadio$$=0==$i$$?jQuery("#sortingComponent input[name=sortName][value=1]"):jQuery("#sortingComponent input[name=sortName][value=0]"),$applicable_otherRadio$$.prop("checked",!0),$applicable_otherRadio$$.trigger("click"))}};$filerSortComponents$$(jQuery($element$$).find("input[name=subElementCategory]:checked").val());
jQuery($element$$).find("input[name=subElementCategory]").on("change",function(){this.checked&&$filerSortComponents$$(this.value)})}}};function Sorter($sortTypes$$){this.sortTypes=$sortTypes$$;this.getSortedKeys=function $this$getSortedKeys$($data$$,$sortType_sortTypeIndex$$,$sortOrder$$,$subElementCategory$$){var $keyArray$$=Object.keys($data$$);$sortType_sortTypeIndex$$=$sortTypes$$[$sortType_sortTypeIndex$$];$sortType_sortTypeIndex$$.sortOrder=$sortOrder$$;$sortType_sortTypeIndex$$.initFields($keyArray$$,$data$$,$subElementCategory$$);return $keyArray$$.sort($sortType_sortTypeIndex$$.compareFunction.bind($sortType_sortTypeIndex$$))};
this.getFilterScreenElement=function $this$getFilterScreenElement$($categoryId$$,$elementId$$){var $result$$=document.createElement("div");$result$$.className="filterComponent";$result$$.id="sortingComponent";var $capSort_orderDiv$$=document.createElement("h2");$capSort_orderDiv$$.appendChild(document.createTextNode(TRANSLATIONS.SORTING));$result$$.appendChild($capSort_orderDiv$$);$capSort_orderDiv$$=document.createElement("div");for(var $i$$=0;$i$$<this.sortTypes.length;$i$$++){var $sortType$$=this.sortTypes[$i$$],
$radio$$=document.createElement("input");$radio$$.type="radio";$radio$$.name="sortName";$radio$$.value=$i$$;0==$i$$&&($radio$$.checked=!0);$radio$$.addEventListener("click",function($sel$$,$e$$){jQuery(".sortOrderDiv").toggle(!1);jQuery($sel$$).toggle(!0)}.bind(this,"#sortOrder"+$i$$));var $divSortOrder_radio_span$$=document.createElement("span");$divSortOrder_radio_span$$.appendChild($radio$$);$divSortOrder_radio_span$$.appendChild(document.createTextNode($sortType$$.getName()+" "));$result$$.appendChild($divSortOrder_radio_span$$);
$divSortOrder_radio_span$$=document.createElement("div");$divSortOrder_radio_span$$.className="sortOrderDiv";$divSortOrder_radio_span$$.id="sortOrder"+$i$$;$divSortOrder_radio_span$$.style.marginLeft="20px";0<$i$$&&($divSortOrder_radio_span$$.style.display="none");for(var $numOrders$$=$sortType$$.getNumSortOrders(),$j$$=0;$j$$<$numOrders$$;$j$$++){var $sortOrder$$=$sortType$$.getSortOrderName($j$$);$radio$$=document.createElement("input");$radio$$.type="radio";$radio$$.name="sortOrder"+$i$$;$radio$$.value=
$j$$;$j$$==$sortType$$.getDefaultSortOrder()&&($radio$$.checked=!0);var $divSubOrder$$=document.createElement("div");$divSubOrder$$.appendChild($radio$$);$divSubOrder$$.appendChild(document.createTextNode($sortOrder$$+" "));$divSortOrder_radio_span$$.appendChild($divSubOrder$$)}$capSort_orderDiv$$.appendChild($divSortOrder_radio_span$$)}$result$$.appendChild($capSort_orderDiv$$);return $result$$};this.storeData=function $this$storeData$($data$$){var $sortData_sortTypeInput$$=jQuery("#sortingComponent input[name=sortName]:checked");
$sortData_sortTypeInput$$={sortType:$sortData_sortTypeInput$$.val(),sortOrder:jQuery("#sortingComponent input[name=sortOrder"+$sortData_sortTypeInput$$.val()+"]:checked").val()};$data$$.sorter=$sortData_sortTypeInput$$;return!0};this.storeDefaultData=function $this$storeDefaultData$($data$$){var $sortData$$={sortType:0,sortOrder:this.sortTypes[0].getDefaultSortOrder()};$data$$.sorter=$sortData$$};this.setValues=function $this$setValues$($data$$,$element$$,$categoryId$$,$elementId$$){jQuery("#sortingComponent input[name=sortName][value="+
$data$$.sorter.sortType+"]").prop("checked",!0);jQuery(".sortOrderDiv").toggle(!1);jQuery("#sortOrder"+$data$$.sorter.sortType).toggle(!0);jQuery("#sortingComponent input[name=sortOrder"+$data$$.sorter.sortType+"][value="+$data$$.sorter.sortOrder+"]").prop("checked",!0)};this.afterAppending=function $this$afterAppending$(){}}
Sorter.createNameMapping=function $Sorter$createNameMapping$($keyArray$$,$subElementCategory$$){for(var $nameMapping$$={},$i$$=0;$i$$<$keyArray$$.length;$i$$++){var $key$$=$keyArray$$[$i$$];$nameMapping$$[$key$$]=-3==$subElementCategory$$?-1==$key$$?"":categoryManager.getTagTranslation($key$$.substring(1)):-1==$key$$?"":categoryManager.getElementName($subElementCategory$$,$key$$)}return $nameMapping$$};
Sorter.createCountMapping=function $Sorter$createCountMapping$($keyArray$$,$data$$){for(var $countMapping$$={},$i$$=0;$i$$<$keyArray$$.length;$i$$++){var $key$$=$keyArray$$[$i$$];$countMapping$$[$key$$]=$data$$[$key$$][1].length}return $countMapping$$};function SortType(){}SortType.prototype.compareFunction=function $SortType$$compareFunction$($a$$,$b$$){};SortType.prototype.initFields=function $SortType$$initFields$($keyArray$$,$data$$,$subElementCategory$$){};SortType.prototype.getName=function $SortType$$getName$(){};
SortType.prototype.getNumSortOrders=function $SortType$$getNumSortOrders$(){};SortType.prototype.getSortOrderName=function $SortType$$getSortOrderName$($index$$){};SortType.prototype.getDefaultSortOrder=function $SortType$$getDefaultSortOrder$(){};function FlexSearchComponent($optionsParam$$){this.options=$optionsParam$$;this.options.activeSearch=!1;this.elementId="flexSearchFilterComponent";var $self$$=this;this.getFilterScreenElement=function $this$getFilterScreenElement$($categoryId$$,$elementId$$){var $divContainer$$=document.createElement("div");$divContainer$$.id=this.elementId;$divContainer$$.setAttribute("class","flexSearchFilterComponent");this.options.node=$divContainer$$;var $originalFields_str$$=this.options.fields;"function"===
typeof this.options.fields&&(this.options.fields=this.options.fields($categoryId$$,$elementId$$));QB.init(this.options);this.options.node=null;this.options.fields=$originalFields_str$$;$originalFields_str$$=jQuery.param({categoryId:$categoryId$$,elementId:$elementId$$});Autocomplete.setAdditionalRequestParams($originalFields_str$$);return $divContainer$$};this.storeData=function $this$storeData$($data$$){var $searchRequest$$=QB.getRequestData();$data$$.flexSearch=$searchRequest$$.request;$data$$.flexSearchPostId=
$self$$.options.postID;return!0};this.storeDefaultData=function $this$storeDefaultData$($data$$){};this.afterAppending=function $this$afterAppending$($element$$,$categoryId$$,$elementId$$){};this.setValues=function $this$setValues$($data$$,$element$$,$categoryId$$,$elementId$$){}};function TagComponent($tags$$){this.tags=$tags$$;this.getFilterScreenElement=function $this$getFilterScreenElement$($categoryId$$,$elementId$$){var $currentTags$$="function"===typeof this.tags?this.tags($categoryId$$,$elementId$$):this.tags;if(null==$currentTags$$||0===Object.keys($currentTags$$).length)return null;var $result$$=document.createElement("div");$result$$.className="filterComponent";$result$$.id="tagComponent";for(var $key$jscomp$0$$ in $currentTags$$){var $values$$=$currentTags$$[$key$jscomp$0$$],
$cb$$=categoryManager.getTagTranslation($key$jscomp$0$$),$caption_i$$=document.createElement("h2");$caption_i$$.appendChild(document.createTextNode($cb$$));$result$$.appendChild($caption_i$$);$caption_i$$=document.createElement("span");$caption_i$$.style.color="LightSlateGray";$cb$$=document.createElement("input");$cb$$.type="checkbox";$cb$$.name="ignore";$cb$$.className="ignore";$cb$$.checked="checked";$cb$$.style.opacity=".50";$cb$$.addEventListener("change",function($key$$){return function(){jQuery("#tagComponent input[name="+
$key$$+"]").prop("checked",jQuery(this).prop("checked"))}}($key$jscomp$0$$));$caption_i$$.appendChild($cb$$);$caption_i$$.appendChild(document.createTextNode(TRANSLATIONS.SELECT_ALL));$result$$.appendChild($caption_i$$);$result$$.appendChild(document.createElement("br"));var $translatedValues$$={};for($caption_i$$=0;$caption_i$$<$values$$.length;$caption_i$$++)$translatedValues$$[$values$$[$caption_i$$]]=categoryManager.getTagTranslation($values$$[$caption_i$$]);$values$$.sort(function($a$$,$b$$){return $translatedValues$$[$a$$].localeCompare($translatedValues$$[$b$$])});
for($caption_i$$=0;$caption_i$$<$values$$.length;$caption_i$$++)$cb$$=document.createElement("input"),$cb$$.type="checkbox",$cb$$.name=$key$jscomp$0$$,$cb$$.value=$values$$[$caption_i$$],$cb$$.checked="checked",$cb$$.style["margin-left"]="10px",$result$$.appendChild($cb$$),$result$$.appendChild(document.createTextNode($translatedValues$$[$values$$[$caption_i$$]])),$result$$.appendChild(document.createElement("br"))}return $result$$};this.storeData=function $this$storeData$($data$$){var $res$$={},
$all$$=!0;jQuery("#tagComponent input:not(.ignore)").each(function(){var $e$$=jQuery(this),$name$$=$e$$.prop("name");void 0===$res$$[$name$$]&&($res$$[$name$$]=[]);$e$$.is(":checked")?$res$$[$name$$].push($e$$.prop("value")):$all$$=!1});for(var $key$$ in $res$$)if(0==$res$$[$key$$].length)return!1;$all$$||($data$$.tags=$res$$);return!0};this.storeDefaultData=function $this$storeDefaultData$($data$$,$categoryId$$,$elementId$$){};this.setValues=function $this$setValues$($data$$,$element$$,$categoryId$$,
$elementId$$){if($data$$.tags){jQuery("#tagComponent input:not(.ignore)").prop("checked",!1);for(var $tagName$$ in $data$$.tags)for($element$$=0;$element$$<$data$$.tags[$tagName$$].length;$element$$++)jQuery("#tagComponent input:not(.ignore)[name="+$tagName$$+"][value="+$data$$.tags[$tagName$$][$element$$]+"]").prop("checked",!0)}};this.afterAppending=function $this$afterAppending$($element$$,$mainCategoryId$$,$elementId$$){}};function MarkingComponent($tags$jscomp$0$$){this.tags=$tags$jscomp$0$$;this.getFilterScreenElement=function $this$getFilterScreenElement$($categoryId$$,$elementId$$){var $thisObject$$=this,$result$$=document.createElement("div");$result$$.className="filterComponent";$result$$.id="markingComponent";var $capMark_link_table$$=document.createElement("h2");$capMark_link_table$$.appendChild(document.createTextNode(TRANSLATIONS.MARKING));$result$$.appendChild($capMark_link_table$$);var $currentTags$$="function"===
typeof this.tags?this.tags($categoryId$$,$elementId$$):this.tags;$capMark_link_table$$=document.createElement("span");$capMark_link_table$$.className="IM_Pseudo_Link";$capMark_link_table$$.style.marginLeft="20px";var $icon$$=document.createElement("i");$icon$$.className="fa fa-plus-circle";$icon$$.ariaHidden="true";$capMark_link_table$$.appendChild($icon$$);$capMark_link_table$$.appendChild(document.createTextNode(" "+TRANSLATIONS.ADD_MARKING));$capMark_link_table$$.addEventListener("click",function(){if(jQuery("#IM_Marking_Table .IM_Marking_Color_Select").length<
symbolManager.getNumMarkingColors()){var $restrictedColors$$=jQuery(".IM_Marking_Color_Select").get().map(function($element$$){return 1*$element$$.value});jQuery("#IM_Marking_Table").append($thisObject$$.getNewTableRow($currentTags$$,$restrictedColors$$,0==jQuery("#IM_Marking_Table .markingRow").length))}});$result$$.appendChild($capMark_link_table$$);$capMark_link_table$$=document.createElement("div");$capMark_link_table$$.style.marginTop="1em";$capMark_link_table$$.id="IM_Marking_Table";$result$$.appendChild($capMark_link_table$$);
return $result$$};this.getNewTableRow=function $this$getNewTableRow$($tags$$,$blockedColors_deleteLink$$,$firstRow$$,$colorSelect_tagNameSelected$$,$first$$,$blockedTags_i$$,$color$$){var $thisObject$$=this,$result$$=document.createElement("div");$result$$.className="markingRow";$result$$.style.width="100%";if($firstRow$$){var $tagNameSelect_tagValueSelect$$=document.createElement("select");$tagNameSelect_tagValueSelect$$.className="tagNameSelect";$tagNameSelect_tagValueSelect$$.style.width="40%";
var $defaultOption_tagNameOption$$=document.createElement("option");$defaultOption_tagNameOption$$.value="-1";$defaultOption_tagNameOption$$.appendChild(document.createTextNode(" --- "+TRANSLATIONS.SELECT_TAG+" --- "));$tagNameSelect_tagValueSelect$$.appendChild($defaultOption_tagNameOption$$);for(var $tagName$$ in $tags$$)$defaultOption_tagNameOption$$=document.createElement("option"),$defaultOption_tagNameOption$$.value=$tagName$$,$defaultOption_tagNameOption$$.appendChild(document.createTextNode(categoryManager.getTagTranslation($tagName$$))),
$tagNameSelect_tagValueSelect$$.appendChild($defaultOption_tagNameOption$$);$tagNameSelect_tagValueSelect$$.addEventListener("change",function(){$thisObject$$.setTagValueOptions(jQuery("#IM_Marking_Table .tagValueSelect"),$tags$$[this.value])});$colorSelect_tagNameSelected$$&&($tagNameSelect_tagValueSelect$$.value=$colorSelect_tagNameSelected$$);$result$$.appendChild($tagNameSelect_tagValueSelect$$)}$tagNameSelect_tagValueSelect$$=document.createElement("select");$tagNameSelect_tagValueSelect$$.className=
"tagValueSelect";$tagNameSelect_tagValueSelect$$.dataset.oldval="-1";$tagNameSelect_tagValueSelect$$.style.width="40%";$firstRow$$||($tagNameSelect_tagValueSelect$$.style["margin-left"]="40%");$tagNameSelect_tagValueSelect$$.addEventListener("change",function($e$jscomp$33_oldValue$$){$e$jscomp$33_oldValue$$=jQuery(this).data("oldval");var $otherValueLists$$=jQuery("#IM_Marking_Table .tagValueSelect").not(this);"-1"!=$e$jscomp$33_oldValue$$&&$otherValueLists$$.find("option[value="+$e$jscomp$33_oldValue$$+
"]").prop("disabled",!1);"-1"!=this.value&&$otherValueLists$$.find("option[value="+this.value+"]").prop("disabled",!0);jQuery(this).data("oldval",this.value)});void 0!==$colorSelect_tagNameSelected$$?this.setTagValueOptions(jQuery($tagNameSelect_tagValueSelect$$),$tags$$[$colorSelect_tagNameSelected$$],$blockedTags_i$$):$firstRow$$||"-1"==jQuery("#IM_Marking_Table .tagNameSelect").val()?this.setTagValueOptions(jQuery($tagNameSelect_tagValueSelect$$)):this.setTagValueOptions(jQuery($tagNameSelect_tagValueSelect$$),
$tags$$[jQuery("#IM_Marking_Table .tagNameSelect").val()]);$first$$&&($tagNameSelect_tagValueSelect$$.value=$first$$);$result$$.appendChild($tagNameSelect_tagValueSelect$$);$colorSelect_tagNameSelected$$=document.createElement("select");$colorSelect_tagNameSelected$$.style.width="150px";$colorSelect_tagNameSelected$$.className="#IM_Marking_Table IM_Marking_Color_Select";$colorSelect_tagNameSelected$$.style.width="15%";$first$$=!0;for($blockedTags_i$$=0;$blockedTags_i$$<symbolManager.getNumMarkingColors();$blockedTags_i$$++)-1===
$blockedColors_deleteLink$$.indexOf($blockedTags_i$$)&&($colorSelect_tagNameSelected$$.appendChild(this.getColorOption($blockedTags_i$$)),void 0===$color$$&&$first$$||void 0!==$color$$&&$color$$==$blockedTags_i$$)&&($colorSelect_tagNameSelected$$.value=$blockedTags_i$$,$colorSelect_tagNameSelected$$.style.background=symbolManager.getMarkingColorString($blockedTags_i$$),$colorSelect_tagNameSelected$$.dataset.lastColor=$blockedTags_i$$,jQuery("#IM_Marking_Table .IM_Marking_Color_Select option[value='"+
$blockedTags_i$$+"']").remove(),$first$$=!1);$colorSelect_tagNameSelected$$.addEventListener("change",function(){this.style.background=symbolManager.getMarkingColorString(this.value);jQuery("#IM_Marking_Table .IM_Marking_Color_Select").not(this).append($thisObject$$.getColorOption(this.dataset.lastColor));jQuery("#IM_Marking_Table .IM_Marking_Color_Select").not(this).find("option[value='"+this.value+"']").remove();this.dataset.lastColor=this.value});$result$$.appendChild($colorSelect_tagNameSelected$$);
$blockedColors_deleteLink$$=document.createElement("i");$blockedColors_deleteLink$$.className="fa fa-minus-circle";$blockedColors_deleteLink$$.ariaHidden=!0;$blockedColors_deleteLink$$.style["padding-left"]="1em";$blockedColors_deleteLink$$.style.width="5%";$blockedColors_deleteLink$$.style.cursor="pointer";$blockedColors_deleteLink$$.title=TRANSLATIONS.REMOVE;$blockedColors_deleteLink$$.addEventListener("click",function(){jQuery(".IM_Marking_Color_Select").append($thisObject$$.getColorOption(jQuery(this).parent().find(".IM_Marking_Color_Select").val()));
jQuery("#IM_Marking_Table .tagValueSelect").find("option[value="+jQuery(this).parent().find(".tagValueSelect").val()+"]").prop("disabled",!1);jQuery(this).parent().remove();1==jQuery("#IM_Marking_Table .fa-minus-circle").length&&jQuery("#IM_Marking_Table .fa-minus-circle").toggle(!0)});$result$$.appendChild($blockedColors_deleteLink$$);$firstRow$$||jQuery("#IM_Marking_Table .fa-minus-circle").first().toggle(!1);return $result$$};this.getColorOption=function $this$getColorOption$($colorIndex$$){var $colorOption$$=
document.createElement("option");$colorOption$$.value=$colorIndex$$;$colorOption$$.style.height="1.5em";$colorOption$$.style.background=symbolManager.getMarkingColorString($colorIndex$$);return $colorOption$$};this.setTagValueOptions=function $this$setTagValueOptions$($elements$$,$tagValues$$,$restrictedValues$$){$elements$$.empty();var $defaultOption$jscomp$1_i$$=document.createElement("option");$defaultOption$jscomp$1_i$$.value="-1";$defaultOption$jscomp$1_i$$.appendChild(document.createTextNode(" --- "+
TRANSLATIONS.SELECT_TAG_VAL+" --- "));$elements$$.append($defaultOption$jscomp$1_i$$);if($tagValues$$)for($restrictedValues$$||($restrictedValues$$=jQuery("#IM_Marking_Table .tagValueSelect").get().map(function($element$$){return jQuery($element$$).val()})),$defaultOption$jscomp$1_i$$=0;$defaultOption$jscomp$1_i$$<$tagValues$$.length;$defaultOption$jscomp$1_i$$++){var $option$$=document.createElement("option");$option$$.value=$tagValues$$[$defaultOption$jscomp$1_i$$];-1!==$restrictedValues$$.indexOf($tagValues$$[$defaultOption$jscomp$1_i$$])&&
($option$$.disabled=!0);$option$$.appendChild(document.createTextNode($tagValues$$[$defaultOption$jscomp$1_i$$]));$elements$$.append($option$$)}};this.storeData=function $this$storeData$($data$$){var $tagNameSelect$$=jQuery("#IM_Marking_Table .tagNameSelect");if(0<$tagNameSelect$$.length&&"-1"!=$tagNameSelect$$.val()){var $tagVals$$={};jQuery("#IM_Marking_Table .tagValueSelect").each(function(){"-1"!=this.value&&($tagVals$$[this.value]=jQuery(this).next().val())});0<Object.keys($tagVals$$).length&&
($data$$.markings={tagName:$tagNameSelect$$.val(),tagValues:$tagVals$$})}return!0};this.storeDefaultData=function $this$storeDefaultData$($data$$,$categoryId$$,$elementId$$){};this.setValues=function $this$setValues$($data$$,$currentTags$jscomp$2_element$$,$$jscomp$loop$48_categoryId$$,$elementId$jscomp$20_restrictedColors$$){if($data$$.markings){$currentTags$jscomp$2_element$$="function"===typeof this.tags?this.tags($$jscomp$loop$48_categoryId$$,$elementId$jscomp$20_restrictedColors$$):this.tags;
$$jscomp$loop$48_categoryId$$={};for(var $tagValue$$ in $data$$.markings.tagValues){$$jscomp$loop$48_categoryId$$.$jscomp$loop$prop$tagValue$50=$tagValue$$;$$jscomp$loop$48_categoryId$$.$jscomp$loop$prop$color$49=$data$$.markings.tagValues[$$jscomp$loop$48_categoryId$$.$jscomp$loop$prop$tagValue$50];$elementId$jscomp$20_restrictedColors$$=Object.values($data$$.markings.tagValues).map(function($element$$){return 1*$element$$}).filter(function($$jscomp$loop$48$$){return function($element$$){return $element$$!=
$$jscomp$loop$48$$.$jscomp$loop$prop$color$49}}($$jscomp$loop$48_categoryId$$));var $restrictedTags$$=Object.keys($data$$.markings.tagValues).filter(function($$jscomp$loop$48$$){return function($element$$){return $element$$!=$$jscomp$loop$48$$.$jscomp$loop$prop$tagValue$50}}($$jscomp$loop$48_categoryId$$));jQuery("#IM_Marking_Table").append(this.getNewTableRow($currentTags$jscomp$2_element$$,$elementId$jscomp$20_restrictedColors$$,0==jQuery("#IM_Marking_Table .markingRow").length,$data$$.markings.tagName,
$$jscomp$loop$48_categoryId$$.$jscomp$loop$prop$tagValue$50,$restrictedTags$$,$$jscomp$loop$48_categoryId$$.$jscomp$loop$prop$color$49));$$jscomp$loop$48_categoryId$$={$jscomp$loop$prop$color$49:$$jscomp$loop$48_categoryId$$.$jscomp$loop$prop$color$49,$jscomp$loop$prop$tagValue$50:$$jscomp$loop$48_categoryId$$.$jscomp$loop$prop$tagValue$50}}}};this.afterAppending=function $this$afterAppending$($element$$,$mainCategoryId$$,$elementId$$){}};function SimpleInfoWindowContent($categoryID$$,$elementID$$,$overlayType$$,$data$$){this.data=$data$$;this.contentString='<div style="max-height: 300px; max-width: 600px;"><div style="max-height: 300px; max-width: 600px; overflow: auto; line-height: 1.35;"><h2>'+$data$$.name+"</h2><br />"+$data$$.description+"</div></div>";this.getHtml=function $this$getHtml$($index$$){return this.contentString};this.tryMerge=function $this$tryMerge$($oldContent$$){return!1};this.resetState=function $this$resetState$(){};
this.onOpen=function $this$onOpen$($content$$){};this.onClose=function $this$onClose$($content$$){};this.getData=function $this$getData$(){return[this.data]};this.getName=function $this$getName$(){return this.data.name};this.getNumElements=function $this$getNumElements$(){return 1}};function PolygonInfoWindowContent($categoryID$$,$elementID$jscomp$0$$,$overlayType$$,$data$$){this.data=$data$$;this.getHtml=function $this$getHtml$($index$$){var $container$$=$data$$.id_polygon;$index$$={};for(var $inner_container_markers$$,$i$jscomp$107_table$$=0;$i$jscomp$107_table$$<legend.getLength();$i$jscomp$107_table$$++){var $element_l$$=legend.getElement($i$jscomp$107_table$$);if($element_l$$ instanceof MultiLegendElement)for(var $j$$=0;$j$$<$element_l$$.getNumSubElements();$j$$++){var $cnt_subelement$$=
$element_l$$.getSubElement($j$$);$inner_container_markers$$=$cnt_subelement$$.getOverlayInfos();this.buildKeysToCount($inner_container_markers$$,$cnt_subelement$$,$elementID$jscomp$0$$,$container$$,$index$$)}else $inner_container_markers$$=$element_l$$.getOverlayInfos(),this.buildKeysToCount($inner_container_markers$$,$element_l$$,$elementID$jscomp$0$$,$container$$,$index$$)}$container$$=jQuery('<div class="outer_ifw_container"></div>');$inner_container_markers$$=jQuery('<div class="inner_ifw_container"></div>');
$i$jscomp$107_table$$=jQuery('<table class="table"></table>');$inner_container_markers$$.append($i$jscomp$107_table$$);$element_l$$=0;if(0<Object.keys($index$$).length){$j$$=jQuery("<tr></tr>");$cnt_subelement$$=0;for($headline_key$$ in $index$$){var $obj$jscomp$39_row$$=$index$$[$headline_key$$],$count$$=$obj$jscomp$39_row$$.count;$element_l$$+=$count$$;$obj$jscomp$39_row$$=jQuery('<td data-key="'+$headline_key$$+'" class="ifw_row"><img style = "vertical-align: middle; margin-right: 5px;" src="'+
$obj$jscomp$39_row$$.symbol+'"/><span>'+$count$$+"</span></td>");$j$$.append($obj$jscomp$39_row$$);$cnt_subelement$$++;4==$cnt_subelement$$&&($i$jscomp$107_table$$.append($j$$),$j$$=jQuery("<tr></tr>"),$cnt_subelement$$=0)}4>$cnt_subelement$$&&$i$jscomp$107_table$$.append($j$$);var $headline_key$$=jQuery('<div style="line-height: 1.35;"><h2 class="inf_gemeinde_hl">'+$data$$.name+" ("+$element_l$$+")</h2>"+$data$$.description+"</div>");$container$$.append($inner_container_markers$$)}else $headline_key$$=
jQuery('<div style="line-height: 1.35;"><h2  class="inf_gemeinde_hl">'+$data$$.name+"</h2>"+$data$$.description+"</div>");$container$$.prepend($headline_key$$);$data$$.comparable&&$container$$.append(jQuery("<input type='button' value='compare' class='similarity_button' data-id='"+$data$$.id_polygon+"' />"));return $container$$.prop("outerHTML")};this.buildKeysToCount=function $this$buildKeysToCount$($markers$$,$legendElement$$,$elementID$$,$polygonID$$,$_keys_to_count$$){for(var $k$$=0;$k$$<$markers$$.length;$k$$++){var $marker$$=
$markers$$[$k$$];if($marker$$.geomData.type==IMGeoType.Point&&$marker$$.getQuantifyInfo($elementID$$)==$polygonID$$){var $numData$$=$marker$$.infoWindowContents.length;var $symbol$$=0<legend.numActive?$legendElement$$.active?$legendElement$$.symbolStandard:$legendElement$$.symbolInactive:$legendElement$$.symbolStandard;void 0==$_keys_to_count$$[$legendElement$$.key]?$_keys_to_count$$[$legendElement$$.key]={count:$numData$$,markers:[$marker$$],symbol:$symbol$$.toDataURL()}:($_keys_to_count$$[$legendElement$$.key].count+=
$numData$$,$_keys_to_count$$[$legendElement$$.key].markers.push($marker$$))}}};this.tryMerge=function $this$tryMerge$($oldContent$$){return!1};this.resetState=function $this$resetState$(){};this.onOpen=function $this$onOpen$($content$$){var $outer_gm_style$$=jQuery($content$$).parent().parent().parent();$outer_gm_style$$.addClass("custom_gm_map_width");jQuery($content$$).parent().css("overflow","hidden");$outer_gm_style$$.parent().addClass("ifw_parent");$outer_gm_style$$.parent().find("div").first().addClass("ifw_first_child");
$outer_gm_style$$.parent().find("div").find("div:nth-child(2)").addClass("ifw_second_sub_child");$outer_gm_style$$.parent().find("div").find("div:nth-child(4)").addClass("ifw_forth_sub_child");jQuery($content$$).on("click",".ifw_row",function(){for(var $l_key$$=jQuery(this).attr("data-key"),$l_element$$,$i$$=0;$i$$<legend.getLength();$i$$++){var $element_l$$=legend.getElement($i$$);if($element_l$$ instanceof MultiLegendElement)for(var $j$$=0;$j$$<$element_l$$.getNumSubElements();$j$$++){var $subelement$$=
$element_l$$.getSubElement($j$$);if($subelement$$.key==$l_key$$){$l_element$$=$subelement$$;break}}else if($element_l$$.key==$l_key$$){$l_element$$=$element_l$$;break}}$l_element$$.highlight();setTimeout(function(){$l_element$$.unhighlight()},1E3)})};this.onClose=function $this$onClose$($content$$){};this.getData=function $this$getData$(){return[this.data]};this.getName=function $this$getName$(){return this.data.name};this.getNumElements=function $this$getNumElements$(){return 1}};function EditableInfoWindowContent($categoryID$jscomp$29_i$$,$elementID$$,$overlayType$$,$fieldValues$$){void 0!=$fieldValues$$&&(this.markerID=$fieldValues$$.id);this.fields=categoryManager.getEditFields($categoryID$jscomp$29_i$$,$overlayType$$);this.categoryID=$categoryID$jscomp$29_i$$;this.values=[];for($categoryID$jscomp$29_i$$=0;$categoryID$jscomp$29_i$$<this.fields.length;$categoryID$jscomp$29_i$$++)this.values[$categoryID$jscomp$29_i$$]=void 0!==$fieldValues$$&&void 0!=$fieldValues$$[this.fields[$categoryID$jscomp$29_i$$].name]?
$fieldValues$$[this.fields[$categoryID$jscomp$29_i$$].name]:this.fields[$categoryID$jscomp$29_i$$].type.getDefaultValue();this.overlayType=$overlayType$$;this.getHtml=function $this$getHtml$($index$jscomp$110_result$$){$index$jscomp$110_result$$="<div><table>";for(var $i$$=0;$i$$<this.fields.length;$i$$++){var $field$$=this.fields[$i$$];$index$jscomp$110_result$$+="<tr><td style='padding-right : 10px'>"+$field$$.name+"</td><td class='inputTD"+$i$$+"'>"+$field$$.type.createInputString(this.values[$i$$])+
"</td></tr>"}return jQuery.parseHTML($index$jscomp$110_result$$+"</table></div>")[0]};this.tryMerge=function $this$tryMerge$($oldContent$$){return!1};this.resetState=function $this$resetState$(){};this.onOpen=function $this$onOpen$($content$$,$tabIndex$$,$infoWindow$$,$overlay$$){for(var $i$$=0;$i$$<this.fields.length;$i$$++)this.fields[$i$$].type.bindChangeListener(jQuery($content$$).find(".inputTD"+$i$$),function($name$$,$type$$,$element$$,$oldValue$$,$newValue$$){optionManager.addChange(new OverlayDataChangedOperation(this.markerID,
this.categoryID,this.overlayType,$overlay$$,$infoWindow$$,$tabIndex$$,$name$$,$type$$,$element$$,$oldValue$$,$newValue$$))}.bind(this,this.fields[$i$$].name,this.fields[$i$$].type))};this.onClose=function $this$onClose$($content$$){for(var $i$$=0;$i$$<this.fields.length;$i$$++)this.fields[$i$$].type.removeChangeListener(jQuery($content$$).find(".inputTD"+$i$$))};this.getData=function $this$getData$(){return null};this.getName=function $this$getName$(){return""};this.getNumElements=function $this$getNumElements$(){return 1}}
;function LazyInfoWindowContent($categoryID$$,$elementID$$,$overlayType$$,$data$$){this.ids=[$data$$.overlay_id];this.category=1*$data$$.category;this.elementID=$data$$.element_id;this.overlayType=$overlayType$$;this.realContents=null;this.getHtml=function $this$getHtml$($index$jscomp$111_res$$){if(this.realContents){$index$jscomp$111_res$$="";for(var $i$34$$=0;$i$34$$<this.realContents.length;$i$34$$++)0<$i$34$$&&($index$jscomp$111_res$$+=getInfoWindowContentSeparator()),$index$jscomp$111_res$$+=
this.realContents[$i$34$$].getHtml($i$34$$);return $index$jscomp$111_res$$}return"<img src='"+PATH.Loading+"' />"};this.tryMerge=function $this$tryMerge$($oldContent$$){if(!this.realContents&&$oldContent$$ instanceof LazyInfoWindowContent){for(var $i$35$$=0;$i$35$$<this.ids.length;$i$35$$++)$oldContent$$.ids.push(this.ids[$i$35$$]);return!0}return!1};this.resetState=function $this$resetState$(){if(this.realContents)for(var $i$36$$=0;$i$36$$<this.realContents.length;$i$36$$++)this.realContents[$i$36$$].resetState()};
this.onOpen=function $this$onOpen$($ajaxData$jscomp$2_tabContent$$,$tabIndex$$,$infoWindow$$,$overlay$$){if(this.realContents)for(var $i$37$$=0;$i$37$$<this.realContents.length;$i$37$$++)this.realContents[$i$37$$].onOpen($ajaxData$jscomp$2_tabContent$$,$tabIndex$$,$infoWindow$$,$overlay$$);else{$ajaxData$jscomp$2_tabContent$$={action:"im_a",namespace:"load_lazy_infowindow",category:this.category,element_id:this.elementID,overlay_ids:this.ids.join(","),lang:PATH.language,_wpnonce:jQuery("#_wpnonce").val()};
$ajaxData$jscomp$2_tabContent$$=categoryManager.addAdditonalAjaxData($ajaxData$jscomp$2_tabContent$$);var $thisObject$$=this;jQuery.post(ajaxurl,$ajaxData$jscomp$2_tabContent$$,function($data$jscomp$130_newContent$jscomp$2_response$$){$data$jscomp$130_newContent$jscomp$2_response$$=JSON.parse($data$jscomp$130_newContent$jscomp$2_response$$);$thisObject$$.realContents=[];for(var $i$38$$=0;$i$38$$<$data$jscomp$130_newContent$jscomp$2_response$$.length;$i$38$$++)$thisObject$$.realContents.push(categoryManager.createInfoWindowContent($data$jscomp$130_newContent$jscomp$2_response$$[$i$38$$],
$thisObject$$.category,$thisObject$$.elementID,$thisObject$$.overlayType));$data$jscomp$130_newContent$jscomp$2_response$$=mapInterface.updateInfoWindowContent($infoWindow$$,$tabIndex$$,$thisObject$$.getHtml($tabIndex$$));$thisObject$$.onOpen($data$jscomp$130_newContent$jscomp$2_response$$,$tabIndex$$,$infoWindow$$,$overlay$$)})}};this.onClose=function $this$onClose$($content$$){if(this.realContents)for(var $i$39$$=0;$i$39$$<this.realContents.length;$i$39$$++)this.realContents[$i$39$$].onClose($content$$)};
this.getData=function $this$getData$(){return[]};this.getName=function $this$getName$(){return""};this.getNumElements=function $this$getNumElements$(){return this.ids.length}};function AlphabetSorter(){this.initFields=function $this$initFields$($keyArray$$,$data$$,$subElementCategory$$){this.nameMapping=Sorter.createNameMapping($keyArray$$,$subElementCategory$$)};this.compareFunction=function $this$compareFunction$($a$$,$b$$){return-1==$a$$?-1:-1==$b$$?1:0==this.sortOrder?this.nameMapping[$a$$].localeCompare(this.nameMapping[$b$$]):this.nameMapping[$b$$].localeCompare(this.nameMapping[$a$$])};this.getName=function $this$getName$(){return TRANSLATIONS.ALPHABETICAL};this.getNumSortOrders=
function $this$getNumSortOrders$(){return 2};this.getSortOrderName=function $this$getSortOrderName$($index$$){return 0==$index$$?TRANSLATIONS.ASC:TRANSLATIONS.DESC};this.getDefaultSortOrder=function $this$getDefaultSortOrder$(){return 0}};function RecordNumberSorter(){this.initFields=function $this$initFields$($keyArray$$,$data$$,$subElementCategory$$){this.countMapping=Sorter.createCountMapping($keyArray$$,$data$$);this.nameMapping=Sorter.createNameMapping($keyArray$$,$subElementCategory$$)};this.compareFunction=function $this$compareFunction$($a$$,$b$$){var $countA$$=this.countMapping[$a$$],$countB$$=this.countMapping[$b$$];return $countA$$==$countB$$?-1==$a$$?-1:-1==$b$$?1:this.nameMapping[$a$$].localeCompare(this.nameMapping[$b$$]):
0==this.sortOrder?$countA$$-$countB$$:$countB$$-$countA$$};this.getName=function $this$getName$(){return TRANSLATIONS.NUM_RECORDS};this.getNumSortOrders=function $this$getNumSortOrders$(){return 2};this.getSortOrderName=function $this$getSortOrderName$($index$$){return 0==$index$$?TRANSLATIONS.ASC:TRANSLATIONS.DESC};this.getDefaultSortOrder=function $this$getDefaultSortOrder$(){return 1}};function HtmlListPrinter(){this.getName=function $this$getName$(){return"Tabelle anzeigen"};this.getType=function $this$getType$(){return"text/html;charset=utf8"};this.buildList=function $this$buildList$($data$$){var $result$$="<table>";if(0<$data$$.length){var $keys$$=[];for($datalen_key$$ in $data$$[0])$keys$$.push($datalen_key$$);var $datalen_key$$=$data$$.length;var $keyslen$$=$keys$$.length;$result$$+="<thead><tr>";for(var $i$$=0;$i$$<$keyslen$$;$i$$++)$result$$+="<th>"+$keys$$[$i$$]+"</th>";
$result$$+="</tr></thead><tbody>";for($i$$=0;$i$$<$datalen_key$$;$i$$++){$result$$+="<tr>";for(var $j$$=0;$j$$<$keyslen$$;$j$$++)$result$$+="<td>"+$data$$[$i$$][$keys$$[$j$$]]+"</td>";$result$$+="</tr>"}}return $result$$+"</tbody></table>"};this.isDownload=function $this$isDownload$(){return!1};this.downloadName=function $this$downloadName$(){return""}};function JsonListPrinter(){this.getName=function $this$getName$(){return"JSON-Format"};this.getType=function $this$getType$(){return"application/json;charset=utf8"};this.buildList=function $this$buildList$($data$$){return JSON.stringify($data$$)};this.isDownload=function $this$isDownload$(){return!0};this.downloadName=function $this$downloadName$(){return"list.json"}};function CsvListPrinter(){this.getName=function $this$getName$(){return"CSV-Format (Standard)"};this.getType=function $this$getType$(){return"text/csv;charset=utf8"};this.buildList=function $this$buildList$($data$$){return CsvBuildList($data$$,"\t","")};this.isDownload=function $this$isDownload$(){return!0};this.downloadName=function $this$downloadName$(){return"list.csv"}}
function ExcelCsvListPrinter(){this.getName=function $this$getName$(){return"CSV-Format (Excel-Kompatibel)"};this.getType=function $this$getType$(){return"text/csv;charset=utf-16"};this.buildList=function $this$buildList$($data$$){return"﻿"+CsvBuildList($data$$,";",'"')};this.isDownload=function $this$isDownload$(){return!0};this.downloadName=function $this$downloadName$(){return"list.csv"}}
function CsvBuildList($data$$,$delimiter$$,$fieldEscape$$){var $result$$="";if(0<$data$$.length){var $keys$$=[];for($datalen$jscomp$1_key$$ in $data$$[0])$keys$$.push($datalen$jscomp$1_key$$);var $datalen$jscomp$1_key$$=$data$$.length;for(var $keyslen$$=$keys$$.length,$i$$=0;$i$$<$keyslen$$;$i$$++)$result$$+=0<$i$$?$delimiter$$:"",$result$$+=$fieldEscape$$+$keys$$[$i$$]+$fieldEscape$$;$result$$+="\n";for($i$$=0;$i$$<$datalen$jscomp$1_key$$;$i$$++){for(var $j$$=0;$j$$<$keyslen$$;$j$$++)$result$$+=
0<$j$$?$delimiter$$:"",$result$$+=$fieldEscape$$+$data$$[$i$$][$keys$$[$j$$]]+$fieldEscape$$;$result$$+=$j$$!=$datalen$jscomp$1_key$$-1?"\n":""}}return $result$$};function SimpleListBuilder($customListFieldsParam$$){this.customListFieldsParam=$customListFieldsParam$$;this.printerManager=new PrinterManager;this.getListPrinters=function $this$getListPrinters$(){return this.printerManager.getPrinters()};this.retrieveList=function $this$retrieveList$($printerID$$,$elementsParam$$){var $curOverlayInfos$$=$elementsParam$$.getOverlayInfos(),$curPrinter$$=this.printerManager.getSinglePrinter($printerID$$),$printerInput$$=[];if("undefined"===typeof this.customListFieldsParam){var $customListFields$$=
[];for(var $i$$=0;$i$$<$curOverlayInfos$$.length;$i$$++)for(var $u$$=0;$u$$<$curOverlayInfos$$[$i$$].infoWindowContents.length;$u$$++)for(var $tokens$$=$curOverlayInfos$$[$i$$].infoWindowContents[$u$$].getData(),$k$$=0;$k$$<$tokens$$.length;$k$$++)for(var $curObj_key$$ in $tokens$$[$k$$])$customListFields$$.push($curObj_key$$)}else $customListFields$$="function"===typeof this.customListFieldsParam?this.customListFieldsParam($printerID$$):this.customListFieldsParam;for($i$$=0;$i$$<$curOverlayInfos$$.length;$i$$++)for($u$$=
0;$u$$<$curOverlayInfos$$[$i$$].infoWindowContents.length;$u$$++)for($tokens$$=$curOverlayInfos$$[$i$$].infoWindowContents[$u$$].getData(),$k$$=0;$k$$<$tokens$$.length;$k$$++){$curObj_key$$={};for(var $j$$=0;$j$$<$customListFields$$.length;$j$$++)$curObj_key$$[$customListFields$$[$j$$]]=$tokens$$[$k$$][$customListFields$$[$j$$]];$printerInput$$.push($curObj_key$$)}return[$curPrinter$$.getType(),$curPrinter$$.buildList($printerInput$$),$curPrinter$$.isDownload(),$curPrinter$$.downloadName()]}}
SimpleListBuilder.prototype.addListPrinter=function $SimpleListBuilder$$addListPrinter$($printer$$){this.printerManager.addPrinter($printer$$)};function StringInputType(){this.createInputString=function $this$createInputString$($startValue$jscomp$1_val$$){$startValue$jscomp$1_val$$=$startValue$jscomp$1_val$$.replace(StringInputType.regex,"&#39;");return"<input type='text' class='IM_StringInput' data-last='"+$startValue$jscomp$1_val$$+"' value='"+$startValue$jscomp$1_val$$+"'></input>"};this.bindChangeListener=function $this$bindChangeListener$($content$$,$listener$$){$content$$.on("change",".IM_StringInput",function($event$$){var $input$$=
jQuery($event$$.target),$newVal$$=$input$$.val();$listener$$($event$$.target,$input$$.data("last"),$newVal$$);$input$$.data("last",$newVal$$)})};this.removeChangeListener=function $this$removeChangeListener$($content$$){$content$$.off("change",".IM_StringInput")};this.setValue=function $this$setValue$($element$$,$str$$){$element$$.value=$str$$;jQuery($element$$).data("last",$str$$)};this.getSQLType=function $this$getSQLType$(){return"%s"};this.getDefaultValue=function $this$getDefaultValue$(){return""};
this.isEmpty=function $this$isEmpty$($val$$){return!$val$$||0===$val$$.trim().length}}StringInputType.regex=/'/g;function MarkerDragOperation($mapSymbol$$,$oldLat$$,$oldLng$$){this.mapSymbol=$mapSymbol$$;this.oldLat=$oldLat$$;this.oldLng=$oldLng$$;this.undo=function $this$undo$($marker$jscomp$9_undoAll$$){$marker$jscomp$9_undoAll$$=this.mapSymbol.getMarker();mapInterface.moveMarker($marker$jscomp$9_undoAll$$,this.oldLat,this.oldLng);mapInterface.centerOnOverlay($marker$jscomp$9_undoAll$$)};this.getCommitInformation=function $this$getCommitInformation$(){for(var $result$$=[],$i$$=0;$i$$<this.mapSymbol.parts.length;$i$$++)for(var $part$$=
$mapSymbol$$.parts[$i$$],$owner$$=$part$$.owner,$j$$=0;$j$$<$part$$.infoWindows.length;$j$$++)$result$$.push({operation:"markerMoved",id:$part$$.infoWindows[$j$$].markerID,category:$owner$$?$owner$$.category:-1,newPosition:mapInterface.getWKTStringForOverlay(this.mapSymbol.getMarker()),oldPosition:"POINT("+this.oldLng+" "+this.oldLat+")"});return $result$$}};function SplitMarkerOperation($originalSymbol$$,$index$$,$infoSplittedSymbol$$,$ownerSplittedSymbol$$,$newSymbol$$){this.originalSymbol=$originalSymbol$$;this.oldPosition=mapInterface.getWKTStringForOverlay($originalSymbol$$.getMarker());this.index=$index$$;this.infoSplittedSymbol=$infoSplittedSymbol$$;this.ownerSplittedSymbol=$ownerSplittedSymbol$$;this.newSymbol=$newSymbol$$;this.undo=function $this$undo$($undoAll$$){mapInterface.centerOnOverlay($originalSymbol$$.getMarker());this.originalSymbol.appendSymbol(this.infoSplittedSymbol,
this.ownerSplittedSymbol,this.index);symbolClusterer.removeSingleMapSymbol($newSymbol$$)};this.getCommitInformation=function $this$getCommitInformation$(){return[{operation:"markerMoved",id:this.newSymbol.parts[0].infoWindows[0].markerID,category:this.ownerSplittedSymbol.category,newPosition:mapInterface.getWKTStringForOverlay(this.newSymbol.getMarker()),oldPosition:this.oldPosition}]}};function OverlayAddedOperation($overlay$$,$categoryID$$,$overlayType$$,$infoWindow$$){this.overlayID=OverlayAddedOperation.getNextID();this.overlay=$overlay$$;this.categoryID=$categoryID$$;this.overlayType=$overlayType$$;this.infoWindow=$infoWindow$$;this.undo=function $this$undo$($undoAll$$){mapInterface.centerOnOverlay(this.overlay);mapInterface.destroyOverlay(this.overlay);void 0!=this.infoWindow&&mapInterface.destroyInfoWindow(this.infoWindow)};this.getCommitInformation=function $this$getCommitInformation$(){for(var $editFields$$=
categoryManager.getEditFields(this.categoryID,this.overlayType),$data$$={},$i$$=0;$i$$<$editFields$$.length;$i$$++)$data$$[$editFields$$[$i$$].name]=$editFields$$[$i$$].type.getDefaultValue();return[{operation:"overlayAdded",id:this.overlayID,category:this.categoryID,type:this.overlayType,geoData:mapInterface.getWKTStringForOverlay(this.overlay),valuesNew:$data$$}]}}OverlayAddedOperation.currentID=0;OverlayAddedOperation.getNextID=function $OverlayAddedOperation$getNextID$(){return"NEW"+OverlayAddedOperation.currentID++};function OverlayDataChangedOperation($overlayID$$,$categoryID$$,$overlayType$$,$overlay$$,$infoWindow$$,$tabIndex$$,$name$$,$type$$,$element$$,$oldValue$$,$newValue$$){this.overlayID=$overlayID$$;this.categoryID=$categoryID$$;this.overlayType=$overlayType$$;this.overlay=$overlay$$;this.infoWindow=$infoWindow$$;this.name=$name$$;this.type=$type$$;this.element=$element$$;this.oldValue=$oldValue$$;this.newValue=$newValue$$;this.undo=function $this$undo$($undoAll$$){$undoAll$$||mapInterface.openInfoWindow(this.overlay,
this.infoWindow,this.tabIndex);this.type.setValue($element$$,$oldValue$$)};this.getCommitInformation=function $this$getCommitInformation$(){var $newVals$$={};$newVals$$[this.name]=this.newValue;var $oldVals$$={};$oldVals$$[this.name]=this.oldValue;return[{operation:"dataChanged",id:this.overlayID,category:this.categoryID,type:this.overlayType,valuesOld:$oldVals$$,valuesNew:$newVals$$}]}};function BoolOption($checkbox_defaultValue$$,$name$$,$changeListener$$,$isSaved$$){this.defaultValue=$checkbox_defaultValue$$;this.save=$isSaved$$;$checkbox_defaultValue$$=document.createElement("input");$checkbox_defaultValue$$.type="checkbox";var $thisObject$$=this;$checkbox_defaultValue$$.addEventListener("change",function(){var $checked$$=jQuery(this).is(":checked");optionManager.setOptionState($thisObject$$.key,$checked$$);$changeListener$$.bind(optionManager)($checked$$)});this.elements=[];
this.elements.push($checkbox_defaultValue$$);this.elements.push(document.createTextNode($name$$));this.elements.push(document.createElement("br"));this.isSaved=function $this$isSaved$(){return this.save};this.appendHtmlElements=function $this$appendHtmlElements$($parent$$){for(var $i$$=0;$i$$<this.elements.length;$i$$++)$parent$$.appendChild(this.elements[$i$$])};this.setEnabled=function $this$setEnabled$($val$$){$val$$?this.elements[0].removeAttribute("disabled"):this.elements[0].disabled="disabled"};
this.applyState=function $this$applyState$($val$$,$details$$){"1"==$val$$&&($val$$=!0);"0"==$val$$&&($val$$=!1);"true"==$val$$&&($val$$=!0);"false"==$val$$&&($val$$=!1);this.elements[0].checked=$val$$?!0:!1;$changeListener$$.bind(optionManager)($val$$,$details$$)};this.setKey=function $this$setKey$($key$$){this.key=$key$$};this.getDefaultValue=function $this$getDefaultValue$(){return this.defaultValue}};function ClickOption($name$$,$clickListener$$){var $button$$=document.createElement("input");$button$$.type="button";$button$$.value=$name$$;$button$$.addEventListener("click",function(){$clickListener$$.call(optionManager)});this.elements=[];this.elements.push($button$$);this.elements.push(document.createElement("br"));this.appendHtmlElements=function $this$appendHtmlElements$($parent$$){for(var $i$$=0;$i$$<this.elements.length;$i$$++)$parent$$.appendChild(this.elements[$i$$])};this.isSaved=function $this$isSaved$(){return!1};
this.setEnabled=function $this$setEnabled$($val$$){$val$$?this.elements[0].removeAttribute("disabled"):this.elements[0].disabled="disabled"};this.applyState=function $this$applyState$($val$$,$details$$){};this.setKey=function $this$setKey$($key$$){this.key=$key$$};this.getDefaultValue=function $this$getDefaultValue$(){return""}};function HiddenOption($defaultValue$$,$isSaved$$){this.defaultValue=$defaultValue$$;this.save=$isSaved$$;this.isSaved=function $this$isSaved$(){return this.save};this.appendHtmlElements=function $this$appendHtmlElements$($parent$$){};this.setEnabled=function $this$setEnabled$($val$$){};this.applyState=function $this$applyState$($val$$,$details$$){};this.setKey=function $this$setKey$($key$$){this.key=$key$$};this.getDefaultValue=function $this$getDefaultValue$(){return this.defaultValue}};function PixiWebGLInterface($position$$,$options$$){function $getPopupContentWithTabs$$($elements$$,$symbols$$){if(1!=$symbols$$.length||$symbols$$[0].canvas){for(var $res$$='<div class="ifw_total_content">',$header$$='<ul class="nav nav-pills ifw_nav_tabs">',$content$$='<div class="tab-content">',$i$$=0;$i$$<$elements$$.length;$i$$++){var $img$$='<img class="ifw_tab_img" src="'+$symbols$$[$i$$].canvas.toDataURL()+'">';$header$$+='<li class="nav-item">';$header$$+='<a class="nav-link" data-toggle="tab" data-id="'+
$i$$+'" href="#tab_'+$i$$+'" role="tab" aria-expanded="true">'+$img$$+"</a>";$header$$+="</li>";$img$$="tab-pane";0==$i$$&&($img$$="tab-pane active");$content$$+='<div class="'+$img$$+'" id="tab_'+$i$$+'" role="tabpanel" aria-expanded="true">';$content$$+="</div>"}$res$$=$res$$+($header$$+"</ul>")+($content$$+"</div></div>");$res$$=jQuery($res$$);for($i$$=0;$i$$<$elements$$.length;$i$$++)$res$$.find("#tab_"+$i$$).append($elements$$[$i$$]);return $res$$}return jQuery($elements$$[0])}function $rgb2hex$$($rgb$$){$rgb$$=
$rgb$$.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return($rgb$$&&4===$rgb$$.length?"#"+("0"+parseInt($rgb$$[1],10).toString(16)).slice(-2)+("0"+parseInt($rgb$$[2],10).toString(16)).slice(-2)+("0"+parseInt($rgb$$[3],10).toString(16)).slice(-2):"").replace("#","0x")}this.currentbasemap;this.savedmapstyle;this.base_map_1;this.base_map_2;this.base_map_3;this.base_map_4;this.base_map_5;this.base_map_6;this.ignoreCloseEvent=!1;var $that$$=this;this.init=function $this$init$($mapDiv$jscomp$2_overlays$$,
$callback$$,$baseMapKeys_polygonOptions$$,$baseLayerIndex$$){this.map=L.map("IM_map_div",{doubleClickZoom:!1}).setView([$position$$.lat,$position$$.lng],$position$$.zoom);this.base_map_1=L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors'});this.base_map_2=L.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://cartodb.com/attributions">CartoDB</a>'});
this.base_map_3=L.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',subdomains:"abcd",maxZoom:19});this.base_map_4=L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'Map data: &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'});
this.base_map_5=L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-background/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",minZoom:0,maxZoom:18,ext:"png"});this.base_map_6=L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"});this.base_map_7=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"});$mapDiv$jscomp$2_overlays$$={"Stamen Labels":L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-labels/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png",opacity:.9})};this.base_maps={"Stamen : Terrain":this.base_map_5,"OSM    : Open Street Map":this.base_map_1,"OpenTopo : OpenTopoMap":this.base_map_4,"Stamen  : Toner Light":this.base_map_6,"CartoDB  : Carto Light":this.base_map_2,"CartoDB  : Carto Dark":this.base_map_3,"ESRI  :  Esri.WorldImagery":this.base_map_7};$baseMapKeys_polygonOptions$$=Object.keys(this.base_maps);this.currentbasemap=$baseLayerIndex$$&&$baseMapKeys_polygonOptions$$[$baseLayerIndex$$]?
$baseMapKeys_polygonOptions$$[$baseLayerIndex$$]:"Stamen : Terrain";$baseLayerIndex$$=this.base_maps[this.currentbasemap];$baseLayerIndex$$.addTo(this.map);L.control.layers($that$$.base_maps,$mapDiv$jscomp$2_overlays$$,{position:"topright"}).addTo(this.map);this.map.attributionControl.setPosition("bottomleft");this.map.zoomControl.setPosition("bottomright");this.pixioverlay=new LeafletPixiOverlay(this.map,!0,!0);$that$$.pixioverlay.LpixiOverlay.addTo($that$$.map);$that$$.map.on("popupopen",function($e$jscomp$34_popup$$){$e$jscomp$34_popup$$=
$e$jscomp$34_popup$$.popup;var $content$$=$e$jscomp$34_popup$$._contentNode;"gl_Polygon"==$e$jscomp$34_popup$$.owner.type&&$that$$.ifwTabOpened($content$$,-1,$e$jscomp$34_popup$$.map_element,$e$jscomp$34_popup$$,$e$jscomp$34_popup$$.owner)});$that$$.map.on("popupclose",function($e$jscomp$35_popup$$){$e$jscomp$35_popup$$=$e$jscomp$35_popup$$.popup;var $content$$=$e$jscomp$35_popup$$._contentNode,$ifid$$=$e$jscomp$35_popup$$._leaflet_id;$that$$.ifwTabClosed(jQuery($content$$).find("div#tab_"+$e$jscomp$35_popup$$.tab_index+
"_"+$ifid$$)[0],$e$jscomp$35_popup$$.tab_index,$e$jscomp$35_popup$$.map_element);$that$$.ifwClosed($content$$,$e$jscomp$35_popup$$.map_element)});var $tiles_loaded$$=!1;$baseLayerIndex$$.on("load",function(){$tiles_loaded$$||($callback$$(),$tiles_loaded$$=!0)});setTimeout(function(){$tiles_loaded$$||($callback$$(),$tiles_loaded$$=!0)},5E3);$that$$.map.on("baselayerchange",function($currentLayerId_e$$){$that$$.currentbasemap=$currentLayerId_e$$.name;$currentLayerId_e$$=Object.keys($that$$.base_maps).indexOf($that$$.currentbasemap);
$that$$.baseLayerFunction($currentLayerId_e$$)})};this.setLayer=function $this$setLayer$($index$$){$index$$=Object.keys($that$$.base_maps)[$index$$];$that$$.map.removeLayer($that$$.base_maps[$that$$.currentbasemap]);$that$$.map.addLayer($that$$.base_maps[$index$$]);$that$$.currentbasemap=$index$$};this.updateMapStyle=function $this$updateMapStyle$($quantifyMode$$){$quantifyMode$$&&($that$$.savedmapstyle=$that$$.base_maps[$that$$.currentbasemap]);$quantifyMode$$&&"CartoDB  : Carto Dark"!=$that$$.currentbasemap?
($that$$.map.removeLayer($that$$.savedmapstyle),$that$$.map.addLayer($that$$.base_map_3),$that$$.currentbasemap="CartoDB  : Carto Dark"):$quantifyMode$$||"CartoDB  : Carto Dark"==getKeyByValue($that$$.base_maps,$that$$.savedmapstyle)||($that$$.map.removeLayer($that$$.base_map_3),$that$$.map.addLayer($that$$.savedmapstyle))};this.createMarker=function $this$createMarker$($latlng$$,$icon$jscomp$4_texture$$,$size$$,$movable$$,$mapSymbol$$,$zIndex$$){$icon$jscomp$4_texture$$=PIXI.Texture.from($icon$jscomp$4_texture$$,
{width:$size$$,height:$size$$});return new this.pixioverlay.pixiMarker({latlng:[$latlng$$.lat,$latlng$$.lng],texture:$icon$jscomp$4_texture$$,interactive:!0,alpha:1,zIndex:$zIndex$$,clickListener:function(){$that$$.markerClickFunction.call($mapSymbol$$)}})};this.updateMarker=function $this$updateMarker$($$jscomp$destructuring$var1_marker$jscomp$11_texture$$,$icons$$,$mapSymbol$$,$zIndex$$){var $latlng$$=$$jscomp$destructuring$var1_marker$jscomp$11_texture$$.latlng;this.pixioverlay.removeMarker($$jscomp$destructuring$var1_marker$jscomp$11_texture$$);
var $layout$$=new MultiSymbolLayout($icons$$);$$jscomp$destructuring$var1_marker$jscomp$11_texture$$=$layout$$.createMultiSymbol();$$jscomp$destructuring$var1_marker$jscomp$11_texture$$=PIXI.Texture.from($$jscomp$destructuring$var1_marker$jscomp$11_texture$$.canvas,{width:$$jscomp$destructuring$var1_marker$jscomp$11_texture$$.width,height:$$jscomp$destructuring$var1_marker$jscomp$11_texture$$.height});$$jscomp$destructuring$var1_marker$jscomp$11_texture$$=new this.pixioverlay.pixiMarker({latlng:$latlng$$,
texture:$$jscomp$destructuring$var1_marker$jscomp$11_texture$$,interactive:!0,alpha:1,zIndex:$zIndex$$,clickListener:function(){$that$$.markerClickFunction.call($mapSymbol$$,$that$$.pixioverlay.current_symbol_index)}});1<$icons$$.length&&($$jscomp$destructuring$var1_marker$jscomp$11_texture$$.multi_symbol_layout=$layout$$);return $$jscomp$destructuring$var1_marker$jscomp$11_texture$$};this.setMarkerVisible=function $this$setMarkerVisible$($marker$$,$show$$){$marker$$.visible=$show$$};this.getMarkerPosition=
function $this$getMarkerPosition$($marker$$){return{lat:$marker$$.latlng[0],lng:$marker$$.latlng[1]}};this.getInfoWindowPosition=function $this$getInfoWindowPosition$($infoWindow$$){return $infoWindow$$.getLatLng()};this.destroyOverlay=function $this$destroyOverlay$($overlay$$){"gl_Marker"==$overlay$$.type&&this.pixioverlay.removeMarker($overlay$$);"gl_Polygon"==$overlay$$.type&&this.pixioverlay.removePolygonOrLine($overlay$$);"gl_Line"==$overlay$$.type&&this.pixioverlay.removePolygonOrLine($overlay$$)};
this.moveMarker=function $this$moveMarker$($marker$$,$newLat$$,$newLng$$){console.log("MOVE MARKER")};this.addMarkerListeners=function $this$addMarkerListeners$($clickFun$$,$rightClickFun$$,$dragFun$$,$mouseOverFun$$,$mouseOutFun$$){$that$$.markerClickFunction=$clickFun$$};this.createShape=function $this$createShape$($geoData$$,$mapShape$$,$id$$,$color$$,$lineWidth$$){var $geo$$={},$type$$=getKeyByValue(IMGeoType,$geoData$$.getType());$geo$$.type=$type$$;$geo$$.coordinates=$geoData$$.geoData;$geo$$.idx=
$id$$;$id$$=polygonSettingsBoth($color$$);if("MultiPolygon"==$type$$||"Polygon"==$type$$){$geo$$.boundingBox=$geoData$$.getBoundingBox();var $shape$$=new this.pixioverlay.gLPolygon({geo:$geo$$,center:[42,20],line_width:$lineWidth$$,fill_color:$color$$,fill_alpha:$id$$.fill_alpha,stroke_color:$id$$.stroke_color,stroke_alpha:1,interactive:!0,hover_line_width:2*$lineWidth$$,hover_fill_color:$color$$,hover_fill_alpha:$id$$.hover_fill_alpha,hover_stroke_color:$color$$,hover_stroke_alpha:1,clickListener:$that$$.shapeClickFunction.bind($mapShape$$),
map_shape:$mapShape$$})}"MultiLineString"==$type$$&&($shape$$=new this.pixioverlay.pixiLine({geo:$geo$$,line_width:$lineWidth$$,stroke_color:$id$$.stroke_color,stroke_alpha:1,interactive:!0,hover_line_width:2*$lineWidth$$,hover_fill_color:$color$$,hover_fill_alpha:$id$$.hover_fill_alpha,hover_stroke_color:$color$$,hover_stroke_alpha:1,clickListener:$that$$.shapeClickFunction.bind($mapShape$$),map_shape:$mapShape$$}));return $shape$$};this.addShape=function $this$addShape$($shapeObject$$){};this.removeShape=
function $this$removeShape$($shapeObject$$){};this.addShapeListeners=function $this$addShapeListeners$($clickFun$$){$that$$.shapeClickFunction=$clickFun$$};this.createInfoWindow=function $this$createInfoWindow$($anchorElement$$,$symbols$$,$elements$$,$mapElement$$){if("gl_Polygon"==$anchorElement$$.type){var $content$$=$getPopupContentWithTabs$$($elements$$,$symbols$$);$anchorElement$$.popup=L.popup({className:"pixi-popup",autoClose:!1,closeOnClick:!1}).setContent($content$$[0]);$anchorElement$$.popup.map_element=
$mapElement$$}else{var $_in$$=$anchorElement$$.orig_options,$popup$$=new L.popup({className:"pixi-popup",autoClose:!1,closeOnClick:!1,offset:L.point(0,-Math.ceil($_in$$.texture.orig.height*$that$$.pixioverlay.external_scale/4))});$content$$=$getPopupContentWithTabs$$($elements$$,$symbols$$);$popup$$.setLatLng($_in$$.latlng).setContent($content$$[0]);$anchorElement$$.popup=$popup$$;$anchorElement$$.popup.map_element=$mapElement$$;$content$$.find('.ifw_nav_tabs a[data-toggle="tab"]').on("shown.bs.tab",
function($e$$){var $ifid$$=$popup$$._leaflet_id;$content$$.hasClass("ids_set")||($content$$.find(".nav-link").each(function(){jQuery(this).attr("href",jQuery(this).attr("href")+"_"+$ifid$$)}),$content$$.find(".tab-pane").each(function(){jQuery(this).attr("id",jQuery(this).attr("id")+"_"+$ifid$$)}));$content$$.addClass("ids_set");$e$$=jQuery(this).data().id;$that$$.ifwTabOpened($content$$.find("div#tab_"+$e$$+"_"+$ifid$$)[0],$e$$,$mapElement$$,$anchorElement$$.popup,$anchorElement$$.popup.owner);$anchorElement$$.popup.tab_index=
$e$$;$anchorElement$$.popup.update()});$content$$.find('.ifw_nav_tabs a[data-toggle="tab"]').on("hidden.bs.tab",function($e$jscomp$38_tabid$$){$e$jscomp$38_tabid$$=jQuery(this).data().id;var $ifid$$=$popup$$._leaflet_id;$that$$.ignoreCloseEvent?$that$$.ignoreCloseEvent=!1:$that$$.ifwTabClosed(jQuery($content$$).find("div#tab_"+$e$jscomp$38_tabid$$+"_"+$ifid$$)[0],$e$jscomp$38_tabid$$,$mapElement$$)})}$anchorElement$$.popup.owner=$anchorElement$$;return $anchorElement$$.popup};this.openInfoWindow=
function $this$openInfoWindow$($anchorElement$jscomp$3_ifid$$,$infoWindow$$,$tabIndex$$,$lat$$,$lng$$,$mapElement$$){$lat$$&&$lng$$&&($infoWindow$$.setLatLng(L.latLng($lat$$,$lng$$)),L.latLng($lat$$,$lng$$));$tabIndex$$||($tabIndex$$=0);this.ignoreCloseEvent=void 0!=$infoWindow$$._contentNode;$infoWindow$$.openOn($that$$.map);$infoWindow$$.tab_index==$tabIndex$$?($anchorElement$jscomp$3_ifid$$=$infoWindow$$._leaflet_id,$that$$.ifwTabOpened(jQuery($infoWindow$$._contentNode).find("div#tab_"+$tabIndex$$+
"_"+$anchorElement$jscomp$3_ifid$$)[0],$tabIndex$$,$infoWindow$$.map_element,$infoWindow$$,$infoWindow$$.owner)):jQuery($infoWindow$$._contentNode).find("a.nav-link[data-id="+$tabIndex$$+"]").tab("show");$infoWindow$$.tab_index=$tabIndex$$;$that$$.pixioverlay.resetHover();jQuery(".pixi-popup").on("mouseover",function(){$that$$.pixioverlay.resetHover()})};this.updateInfoWindowContent=function $this$updateInfoWindowContent$($infoWindow$$,$tabIndex$$,$newContent$$){if(-1==$tabIndex$$)$infoWindow$$.setContent($newContent$$);
else{var $tabContent$$=jQuery($infoWindow$$._contentNode),$lid$$=$infoWindow$$._leaflet_id;jQuery($tabContent$$).find("div#tab_"+$tabIndex$$+"_"+$lid$$).html($newContent$$);$infoWindow$$.update()}return $infoWindow$$._contentNode};this.destroyInfoWindow=function $this$destroyInfoWindow$($infoWindow$$){};this.addInfoWindowListeners=function $this$addInfoWindowListeners$($tabOpenedFun$$,$tabClosedFun$$,$windowClosedFun$$,$locationWindowOpenedFun$$,$locationWindowClosedFun$$){$that$$.ifwTabOpened=$tabOpenedFun$$;
$that$$.ifwTabClosed=$tabClosedFun$$;$that$$.ifwClosed=$windowClosedFun$$;$that$$.locIfwClosed=$locationWindowClosedFun$$;$that$$.LocIfwOpenend=$locationWindowOpenedFun$$};this.addNewOverlaysComponent=function $this$addNewOverlaysComponent$($list$$,$overlayAddedCallback$$){};this.removeNewOverlaysComponent=function $this$removeNewOverlaysComponent$(){};this.addUndoComponent=function $this$addUndoComponent$($revertInfo$$,$undoInfo$$,$commitInfo$$){};this.updateUndoComponent=function $this$updateUndoComponent$($showRevert$$,
$showUndo$$,$showCommit$$){};this.removeUndoComponent=function $this$removeUndoComponent$(){};this.createOptionElement=function $this$createOptionElement$(){var $result$$=document.createElement("div");$result$$.style.textAlign="center";$result$$.className+="custom_control_base custom_control_shadow";var $controlText$$=document.createElement("div");$controlText$$.innerHTML='<i class="fa fa-cog" aria-hidden="true"></i>';$result$$.appendChild($controlText$$);return $result$$};this.removeOptionElement=
function $this$removeOptionElement$(){};this.addOptionElement=function $this$addOptionElement$($element$$){jQuery($element$$).addClass("leafletcustom leaflet-control leaflet-bar");jQuery(".leaflet-bottom.leaflet-right").prepend($element$$)};this.centerOnOverlay=function $this$centerOnOverlay$($overlay$$){};this.setCenter=function $this$setCenter$($lat$$,$lng$$){$that$$.map.panTo(new L.latLng($lat$$,$lng$$))};this.setZoom=function $this$setZoom$($zoom$$){$that$$.map.setZoom($zoom$$)};this.setCenterAndZoom=
function $this$setCenterAndZoom$($lat$$,$lng$$,$zoom$$){$that$$.map.flyTo([$lat$$,$lng$$],$zoom$$,{animate:!1})};this.getZoom=function $this$getZoom$(){return $that$$.map.getZoom()};this.getWKTStringForOverlay=function $this$getWKTStringForOverlay$($overlay$$){};this.zoomToBounds=function $this$zoomToBounds$($lat1$$,$lng1$$,$lat2$$,$lng2$$){};this.addLocationMarker=function $this$addLocationMarker$($lat$$,$lng$$,$infowindow_text$$,$id$$,$zoom$$){var $content$$=document.createElement("div");$content$$.innerHTML=
$infowindow_text$$;$infowindow_text$$=L.popup({className:"pixi-popup",autoClose:!1,closeOnClick:!1}).setContent($content$$);var $marker$$=L.marker(L.latLng($lat$$,$lng$$));$marker$$.bindPopup($infowindow_text$$);$marker$$.addTo($that$$.map);$infowindow_text$$.on("remove",function(){$marker$$.remove();$that$$.locIfwClosed($id$$,$content$$)});setTimeout(function(){try{$marker$$.openPopup()}catch($e$$){}$that$$.LocIfwOpenend($id$$,$content$$)},750);$zoom$$&&$that$$.map.setView(L.latLng($lat$$,$lng$$),
10,{animate:!0});return $marker$$};this.changePolygonAppearance=function $this$changePolygonAppearance$($polygon$$,$fillColor$$,$strokeColor$$,$fillOpacity$$,$strokeOpacity$$,$i$jscomp$121_zIndex$$){for($i$jscomp$121_zIndex$$=0;$i$jscomp$121_zIndex$$<$polygon$$.length;$i$jscomp$121_zIndex$$++){var $cur_poly$$=$polygon$$[$i$jscomp$121_zIndex$$];$cur_poly$$.fill_color=$rgb2hex$$($fillColor$$);$cur_poly$$.stroke_color=$rgb2hex$$($strokeColor$$);$cur_poly$$.fill_alpha=$fillOpacity$$;$cur_poly$$.stroke_alpha=
$strokeOpacity$$}};this.revertChangedOverlays=function $this$revertChangedOverlays$(){for(var $allpolygons$$=$that$$.pixioverlay.pixipolygons,$i$$=0;$i$$<$allpolygons$$.length;$i$$++){var $cur_poly$$=$allpolygons$$[$i$$],$color$$=$cur_poly$$.map_shape.owner.getColorHex(),$polygon_settings$$=polygonSettingsBoth($color$$);$cur_poly$$.fill_color=$color$$;$cur_poly$$.stroke_color=$polygon_settings$$.stroke_color;$cur_poly$$.fill_alpha=$polygon_settings$$.fill_alpha;$cur_poly$$.stroke_alpha=1}};this.showPrintVersion=
function $this$showPrintVersion$($print$$){};this.addLocationDiv=function $this$addLocationDiv$($clickFunction$$,$callback$$){var $div$$=jQuery('<div class="leafletcustom leaflet-control leaflet-bar im_loc_nav custom_control_base custom_control_shadow"><i class="fas fa-compass" aria-hidden="true"></i></div>');jQuery(".leaflet-bottom.leaflet-right").prepend($div$$);$div$$.on("click",$clickFunction$$);$callback$$()};this.getCenter=function $this$getCenter$(){return $that$$.map.getCenter()};this.repaint=
function $this$repaint$($ready$$){$ready$$&&$that$$.pixioverlay.completeDraw()};this.addMapListeners=function $this$addMapListeners$($baseLayerFun$$){this.baseLayerFunction=$baseLayerFun$$}};ajaxurl=ajax_object.ajaxurl;var categories={Informant:0,Concept:1,PhoneticType:2,MorphologicType:3,BaseType:4,ExtraLing:5,Polygon:6,Custom:7,CustomSub:8};chosenSettings.normalize_search_text=removeDiacriticsPlusSpecial;chosenSettings.display_disabled_options=!1;
jQuery(function(){jQuery(".conceptTooltip").each(function(){var $id$$=jQuery(this).data("id");jQuery(this).qtip({content:{text:createConceptToolTipContent($id$$)},position:{my:"bottom right",at:"top left"}})});addMouseOverHelp(jQuery("#trSelectionBar"));bindMenuSlide()});
function getHexagonChoices(){var $possibleValues$$=[];jQuery("#hexagonSelect option[value!='']").each(function(){$possibleValues$$.push({id:"A"+jQuery(this).val(),name:jQuery(this).text()})});for(var $areaId$$=!1,$i$$=0;$i$$<legend.getLength();$i$$++){var $element$$=legend.getElement($i$$);if(6==$element$$.category){$areaId$$=$element$$.key;$i$$=$areaId$$.indexOf("|");-1!==$i$$&&($areaId$$=$areaId$$.substring(0,$i$$));break}}if(!1===$areaId$$)return[$possibleValues$$,!0];$element$$=[];for($i$$=0;$i$$<
$possibleValues$$.length;$i$$++){var $hexaCategory$$=$possibleValues$$[$i$$].id;$hexaCategory$$=$hexaCategory$$.substring(0,$hexaCategory$$.indexOf("|"));$hexaCategory$$==$areaId$$&&$element$$.push($possibleValues$$[$i$$])}return 0==$element$$.length?[$possibleValues$$,!0]:[$element$$,!1]}
function bindMenuSlide(){jQuery(".mode_switch_label").on("click",function(){if(!jQuery(this).hasClass("disabled"))if("phy_label"==jQuery(this).attr("id"))optionManager.setOption("polymode","phy");else{var $result$$=getHexagonChoices(),$listValues$$=$result$$[0];1==$listValues$$.length?optionManager.setOption("polymode",$listValues$$[0].id):buildHexModal($listValues$$,$result$$[1])}});jQuery(".move_menu").on("click",function(){jQuery(".move_menu .active").fadeOut("fast",function(){jQuery(".move_menu .inactive").fadeIn("fast",
function(){jQuery(".move_menu span").toggleClass("active inactive")})});jQuery("#leftTable").slideToggle(function(){adjustlegendTable();jQuery(".tablecontainer").toggleClass("menu_closed")})});jQuery(".menu_heading").on("click",function($e$jscomp$40_target$$){$e$jscomp$40_target$$=jQuery($e$jscomp$40_target$$.target);if(!$e$jscomp$40_target$$.hasClass("mode_switch_label")&&!$e$jscomp$40_target$$.hasClass("l_disabled")){var $id$$=jQuery(this).attr("id"),$that$$=jQuery(this).parent();"legend_heading"==
$id$$&&$that$$.addClass("keep_shadow");$that$$.find(".menu_caret").toggleClass("fa-caret-right fa-caret-down");$that$$.find(".menu_collapse").slideToggle(function(){checkNavBar();"legend_heading"!=$id$$||$that$$.hasClass("active")||$that$$.removeClass("keep_shadow")});jQuery(".menu_grp").each(function(){jQuery(this).find(".menu_heading").attr("id")!=$id$$&&(jQuery(this).removeClass("active"),jQuery(this).hasClass("keep_shadow")&&jQuery(this).removeClass("keep_shadow"))});$that$$.toggleClass("active");
jQuery(".menu_collapse").each(function(){jQuery(this).parent().hasClass("active")||(jQuery(this).slideUp(),jQuery(this).parent().find(".menu_caret").hasClass("fa-caret-down")&&jQuery(this).parent().find(".menu_caret").removeClass("fa-caret-down").addClass("fa-caret-right"))});"selection_heading"==$id$$&&jQuery("#trSelectionBar .im_table_select:visible").val("").chosen(chosenSettings)}});jQuery(document).on("im_show_print_borders",function($event$$,$callback$$){jQuery.post(ajax_object.ajaxurl,{action:"va",
namespace:"util",query:"get_print_overlays"},$callback$$)});jQuery(document).on("im_before_load_data",function($event$$,$data$$){$data$$.category===categories.Polygon&&"dialectology"!=$data$$.trigger&&(lastPolygonSelection={category:$data$$.category,key:$data$$.key,filter:$data$$.ajaxData.filter},jQuery(".dialectometry-btn").hasClass("active")&&jQuery(".dialectometry-btn").removeClass("active"));if(("menu"==$data$$.trigger||"dialectology"==$data$$.trigger)&&$data$$.category==categories.Polygon&&"phy"!==
optionManager.getOptionState("polymode")){$data$$.ajaxData.hexgrid=$data$$.key;categoryManager.addAjaxData("hexgrid",$data$$.key);for(var $i$$=0;$i$$<legend.getLength();$i$$++){var $element$$=legend.getElement($i$$);$element$$.category!=categories.Polygon&&$element$$.reloadSymbols()}}jQuery("#legend_heading").hasClass("l_disabled")&&jQuery("#legend_heading").removeClass("l_disabled");if("menu"==$data$$.trigger||"dialectology"==$data$$.trigger)jQuery("#legend_heading").next(".menu_collapse").is(":visible")||
jQuery("#legend_heading").trigger("click")});var $locationWindowQTips$$={};jQuery(document).on("im_location_window_opened",function($event$$,$id$$,$element$$){$locationWindowQTips$$[$id$$]=addBiblioQTips(jQuery($element$$))});jQuery(document).on("im_location_window_closed",function($event$$,$id$$,$element$$){for($event$$=0;$event$$<$locationWindowQTips$$[$id$$].length;$event$$++)$locationWindowQTips$$[$id$$][$event$$]&&$locationWindowQTips$$[$id$$][$event$$].destroy(!0)});jQuery(document).on("im_legend_after_update",
function(){adjustlegendTable();setTableRowWidth()});jQuery(document).on("im_load_syn_map",function(){jQuery("#legend_heading").trigger("click")});jQuery(document).on("im_server_extra_data",function($event$$,$data$$){for(var $key$$ in $data$$.BIB)0==jQuery("#VAbibDiv #"+$key$$).length&&jQuery("#VAbibDiv").append($data$$.BIB[$key$$]);for(var $key$41$$ in $data$$.STI)0==jQuery("#VAstiDiv #"+$key$41$$).length&&jQuery("#VAstiDiv").append($data$$.STI[$key$41$$])});jQuery("#syn_heading").one("click",function(){jQuery("#IM_Syn_Map_Selection").chosen("destroy");
jQuery("#IM_Syn_Map_Selection").val("").chosen({allow_single_deselect:!0})});jQuery(window).resize(function(){jQuery(".menu-toggle").hasClass("toggled-on")&&jQuery(".menu-toggle").trigger("click");setTableRowWidth();adjustlegendTable()})}
function buildHexModal($list_values$$,$trigger_load$$){var $modal_content$$=getHexModalContent($list_values$$);jQuery(".select_hex_popup .hex-modal-btn").remove();jQuery(".select_hex_popup .hex-modal-btn-grp").append($modal_content$$);jQuery(".select_hex_popup").modal();jQuery(".hex-modal-btn").one("click",function(){var $id$$=jQuery(this).attr("id"),$shortenedId$$=$id$$.substring(0,$id$$.indexOf("|")),$optionData$$={};$trigger_load$$&&($optionData$$.load=$shortenedId$$);optionManager.setOption("polymode",
$id$$,$optionData$$);jQuery(".select_hex_popup").modal("hide")});jQuery(".select_hex_popup").on("hide.bs.modal",function(){syncOptionAndBtnStates()})}function syncOptionAndBtnStates(){var $state$$=optionManager.getOptionState("polymode");"phy"!=$state$$&&($state$$="hex");var $id$$=jQuery(".map_mode_selection label.active").attr("id");$id$$=$id$$.replace("_label","");$id$$!=$state$$&&(jQuery(".map_mode_selection label").removeClass("active"),jQuery("#"+($state$$+"_label")).addClass("active"))}
function getHexModalContent($list_values$$){for(var $content$$="",$i$$=0;$i$$<$list_values$$.length;$i$$++){var $value$$=$list_values$$[$i$$];$content$$+='<button id="'+$value$$.id+'" type="button" class="btn btn-secondary hex-modal-btn">'+$value$$.name+"</button>"}return jQuery($content$$)}
function adjustlegendTable(){var $remaining_window_height$$=window.innerHeight,$legend_menu_offset$$=jQuery("#leftTable .menu_grp:nth-child(2)").offset().top,$legend_menu_height$$=jQuery("#leftTable .menu_grp:nth-child(2) > .menu_heading").outerHeight(),$syn_menu_height$$=jQuery("#leftTable .menu_grp:nth-child(3) > .menu_heading").outerHeight(),$search_height$$=jQuery("#IM_main_div .search_container").outerHeight();jQuery(".move_menu").outerHeight();$remaining_window_height$$=$remaining_window_height$$-
$legend_menu_offset$$-$legend_menu_height$$-$syn_menu_height$$-$search_height$$-50;jQuery(".legendtable tbody").css("max-height",$remaining_window_height$$+"px")}function setTableRowWidth(){var $width$$=jQuery(".tablecontainer").width();jQuery(".legendtable tr").width($width$$+"px")}function simplifyELingKey($key$$){var $posPipe$$=$key$$.indexOf("|");return-1!==$posPipe$$?$key$$.substring(1,$posPipe$$):$key$$.substring(1)}
function showOutsideOnlyElements($show$$){jQuery("#baseTypeSelect option[data-in-ak=0]").prop("disabled",!$show$$);jQuery("#baseTypeSelect").trigger("chosen:updated");jQuery("#morphTypeSelect option[data-in-ak=0]").prop("disabled",!$show$$);jQuery("#morphTypeSelect").trigger("chosen:updated");jQuery("#phonTypeSelect option[data-in-ak=0]").prop("disabled",!$show$$);jQuery("#phonTypeSelect").trigger("chosen:updated");jQuery("#conceptSelect a.sf-tree-leaf[data-in-ak=0]").css("display",$show$$?"":"none")}
jQuery(document).on("im_map_initialized",function(){categoryManager.addAjaxData("db",ajax_object.db);categoryManager.addInfoWindowContentConstructor("record",RecordInfoWindowContent);categoryManager.addInfoWindowContentConstructor("informant",InformantInfoWindowContent);categoryManager.addInfoWindowContentConstructor("polygon",SyntaxInfoWindowContent);categoryManager.addInfoWindowContentConstructor("simple",SyntaxInfoWindowContent);void 0==PATH.tk&&categoryManager.loadData(6,"A17","custom",{subElementCategory:-1});
var $loc$$=optionManager.getOptionState("location")||optionManager.getOptionState("municipality");$loc$$&&gotoLocation(1*$loc$$.substring(1),!0);commentManager.commentTabOpened=function $commentManager$commentTabOpened$($element$$){try{addBiblioQTips($element$$);var $old$$=jQuery("#commentTitle").find(".quote");$old$$.qtip("destroy",!0);$old$$.remove();jQuery("#commentTitle").find(".quote_space").remove();$element$$.find(".quote").toggle(!1);jQuery("#commentTitle").append("<span class='quote_space'>&nbsp;</span>");
var $copy$$=$element$$.find(".quote").clone();jQuery("#commentTitle").append($copy$$);$copy$$.toggle(!0);$copy$$.qtip({show:"click",hide:"unfocus"})}catch($e$$){console.log($e$$)}};commentManager.commentTabClosed=function $commentManager$commentTabClosed$($element$$){$element$$.find(".bibl").qtip("destroy",!0);jQuery("#commentTitle").find(".quote").qtip("destroy",!0)};commentManager.showCommentMenu=function $commentManager$showCommentMenu$($categoryID$$,$elementID$$){return"xxx"==ajax_object.db}});
var backupCommunities;jQuery(document).on("im_edit_mode_started",function(){backupCommunities=optionManager.getOptionState("comm");optionManager.setOption("comm",!1,{reload:!1})});jQuery(document).on("im_edit_mode_stopped",function(){void 0!==backupCommunities&&optionManager.setOption("comm",backupCommunities,{reload:!1})});
jQuery(document).on("im_syn_map_before_loading",function($event$$,$mapInfos$$,$data$$){$event$$=$mapInfos$$.Options.tdb;if($event$$==ajax_object.next_version||ajax_object.local_db)$event$$="xxx";$event$$!=ajax_object.db&&($mapInfos$$["continue"]=!1,reloadPageWithParam(["db","tk"],[$event$$,$mapInfos$$.id]))});
jQuery(document).on("im_add_options",function(){categoryManager.addAjaxData("outside",!1);"1"==ajax_object.dev&&optionManager.addOption("wkt",new ClickOption("Show WKT",function(){var $geoList_wkt$$=prompt("WKT:");if($geoList_wkt$$){$geoList_wkt$$=$geoList_wkt$$.split(";");for(var $i$$=0;$i$$<$geoList_wkt$$.length;$i$$++){var $shapeObject$$=mapInterface.createShape(geoManager.parseGeoDataUnformated($geoList_wkt$$[$i$$]),null,"debug");mapInterface.addShape($shapeObject$$)}}}));optionManager.addOption("tdb",
new HiddenOption("xxx"==ajax_object.db?ajax_object.next_version:ajax_object.db,!0));optionManager.addOption("polymode",new HexagonOption);optionManager.addOption("ak",new BoolOption(!1,TRANSLATIONS.ALPENKONVENTTION_INFORMANTEN,function($val$$,$details$$){categoryManager.addAjaxData("outside",$val$$);$details$$&&$details$$.first&&!$val$$&&showOutsideOnlyElements(!1);$details$$&&!0===$details$$.first||(showOutsideOnlyElements($val$$),optionManager.enableOptions(!1),legend.reloadOverlays(function(){optionManager.enableOptions(!0)}))},
!0));categoryManager.addAjaxData("community",!0);optionManager.addOption("comm",new BoolOption(!0,TRANSLATIONS.AUF_GEMEINDE,function($val$$,$details$$){categoryManager.addAjaxData("community",$val$$);if(!$details$$||!1!==$details$$.reload&&!0!==$details$$.first)optionManager.enableOptions(!1),legend.reloadOverlays(function(){optionManager.enableOptions(!0)})},!0));if("xxx"==ajax_object.db||171<1*ajax_object.db)categoryManager.addAjaxData("simple_polygons",!0),optionManager.addOption("simple_polygons",
new BoolOption(!0,Ue.VEREINFACHTE_POLYGONE,function($val$$,$details$$){categoryManager.addAjaxData("simple_polygons",$val$$);if(!$details$$||!1!==$details$$.reload&&!0!==$details$$.first)optionManager.enableOptions(!1),legend.reloadOverlays(function(){optionManager.enableOptions(!0)})},!0));if("1"==ajax_object.va_staff&&mapInterfaceType==MapInterfaceType.GoogleMaps){var $printOption$$=new BoolOption(!1,TRANSLATIONS.DRUCKFASSUNG,function($val$$,$details$$){mapInterface.showPrintVersion($val$$)},!1);
$printOption$$.setEnabled(!1);jQuery(document).on("im_quantify_mode",function($event$$,$val$$){$printOption$$.setEnabled(!$val$$)});optionManager.addOption("print",$printOption$$)}mapInterfaceType==MapInterfaceType.GoogleMaps&&jQuery.ajax({dataType:"json",url:ajax_object.plugin_url+"/im_config/map_styles/empty.json",success:function($data$$){mapInterface.addMapStyle("empty",$data$$);$printOption$$&&($printOption$$.setEnabled(!0),optionManager.getOptionState("print")&&mapInterface.showPrintVersion(!0))}});
jQuery(document).on("im_url_changed",function($event$$,$state$$){$state$$&&$state$$.tk&&jQuery(".modal_lang_cont a").each(function(){jQuery(this).attr("href",addParamToUrl(jQuery(this).attr("href"),"tk",$state$$.tk))})})});jQuery(document).on("im_legend_before_rebuild",function($event$$,$legend$$){jQuery("#IM_legend tr td:nth-child(3)").qtip("destroy",!0)});jQuery(document).on("im_show_edit_mode",function($event$$,$paramObject$$){$paramObject$$.result=!1});
jQuery(".sql-query-btn").click(function(){categoryManager.showFilterScreen(categories.Custom,"SQL")});var lastPolygonSelection=null;jQuery(".dialectometry-btn").click(function(){jQuery(this).hasClass("active")?categoryManager.loadData(lastPolygonSelection.category,lastPolygonSelection.key,"menu",lastPolygonSelection.filter):(jQuery(this).addClass("active"),categoryManager.loadData(6,"A62","dialectology",{subElementCategory:-5}))});
jQuery(document).on("im_legend_element_created",function($event$$,$legendElement$$,$DOMElement$$){addConceptQTip($legendElement$$)});function addConceptQTip($currentElement$$){if($currentElement$$.category==categories.Concept&&-1!=$currentElement$$.key){var $element$$=createConceptToolTipContent($currentElement$$.key.substring(1));$element$$&&jQuery($currentElement$$.htmlElement).find("td:nth-child(3)").qtip({content:{text:$element$$},position:{my:"bottom left",at:"top left"}})}}
function createConceptToolTipContent($concept_id$$){$concept_id$$=Concepts[$concept_id$$];var $conceptName_span$$=$concept_id$$[0],$conceptDescr$$=$concept_id$$[1],$conceptImg_result$$=$concept_id$$[4];return $conceptName_span$$&&$conceptName_span$$!=$conceptDescr$$||$conceptImg_result$$?($conceptImg_result$$=document.createElement("div"),$conceptName_span$$&&$conceptName_span$$!=$conceptDescr$$&&($conceptName_span$$=document.createElement("span"),$conceptName_span$$.style["text-align"]="center",
$conceptName_span$$.appendChild(document.createTextNode($concept_id$$[1])),$conceptImg_result$$.appendChild($conceptName_span$$)),jQuery($conceptImg_result$$)):null}var alphabetSorter=new AlphabetSorter,numRecSorter=new RecordNumberSorter,il=new SimpleListBuilder(function($index$$){return["locationName","number","gender","age"]});il.addListPrinter(new JsonListPrinter);il.addListPrinter(new HtmlListPrinter);il.addListPrinter(new CsvListPrinter);
var stringInput=new StringInputType,informatEditConfig=new EditConfiguration;informatEditConfig.setFieldData(OverlayType.PointSymbol,[new FieldInformation("Erhebung",stringInput,!0),new FieldInformation("Nummer",stringInput,!0),new FieldInformation("Ortsname",stringInput,!1),new FieldInformation("Bemerkungen",stringInput,!1)]);informatEditConfig.allowNewOverlays(OverlayType.PointSymbol);informatEditConfig.allowGeoDataChange(OverlayType.PointSymbol);
categoryManager.registerCategory(buildCategoryInformation({categoryID:categories.Informant,categoryPrefix:"I",name:Ue.INFORMANTEN,elementID:"informantSelect",textForNewComment:Ue.KOMMENTAR_INFORMANT_SCHREIBEN,textForListRetrieval:"Informanten-Daten exportieren",listBuilder:il,editConfiguration:informatEditConfig}));
var lingTags=[{tag:"ERHEBUNG",name:"Atlas"}],lingTagFunction=function $lingTagFunction$($categoryID$$,$elementID$$){for(var $ids$$=$elementID$$.substring(1).split("+"),$resultList$$=[],$prefix$$=$elementID$$[0],$i$$=0;$i$$<$ids$$.length;$i$$++)for(var $newTags$$=SourceMapping[$prefix$$+$ids$$[$i$$]].split(","),$j$$=0;$j$$<$newTags$$.length;$j$$++)-1==$resultList$$.indexOf($newTags$$[$j$$])&&$resultList$$.push($newTags$$[$j$$]);return{ERHEBUNG:$resultList$$}};
categoryManager.registerCategory(buildCategoryInformation({categoryID:categories.PhoneticType,categoryPrefix:"P",name:Ue.PHON_TYP,nameEmpty:Ue.NICHT_TYPISIERT,elementID:"phonTypeSelect",filterComponents:[new GroupingComponent([categories.Concept],categories.Concept,!0,new Sorter([alphabetSorter,numRecSorter]),void 0,lingTags),new MarkingComponent(lingTagFunction)],countNames:[Ue.BELEG,Ue.BELEGE],textForNewComment:Ue.KOMMENTAR_PTYP_SCHREIBEN}));
categoryManager.registerCategory(buildCategoryInformation({categoryID:categories.MorphologicType,categoryPrefix:"L",name:Ue.MORPH_TYP,nameEmpty:Ue.NICHT_TYPISIERT,elementID:"morphTypeSelect",filterComponents:[new GroupingComponent([categories.Concept],categories.Concept,!0,new Sorter([alphabetSorter,numRecSorter]),void 0,lingTags),new MarkingComponent(lingTagFunction),new TypeGenderFilterComponent],countNames:[Ue.BELEG,Ue.BELEGE],textForNewComment:Ue.KOMMENTAR_MTYP_SCHREIBEN,costumGetNameFunction:function($key$$,
$regularNameFun$$){var $candidates_insertString_regular$$=$regularNameFun$$($key$$),$gender_id$$=$key$$.substring(1);if($candidates_insertString_regular$$)var $base$$=$candidates_insertString_regular$$;else{$candidates_insertString_regular$$=jQuery("#morphTypeSelect option[value*='+"+$key$$.substring(1)+"'], #morphTypeSelect option[value*='"+$key$$.substring(1)+"+']");for(var $regexp$$=new RegExp("(^|\\+)"+$gender_id$$+"($|\\+)"),$i$42$$=0;$i$42$$<$candidates_insertString_regular$$.length;$i$42$$++){var $option$$=
$candidates_insertString_regular$$.eq($i$42$$);if($option$$.val().match($regexp$$)){$base$$=$option$$.text();break}}}$gender_id$$=TypeGenders[$gender_id$$];$candidates_insertString_regular$$="";$gender_id$$&&($candidates_insertString_regular$$=" "+$gender_id$$+".");return $base$$.substring(0,$base$$.length-1)+$candidates_insertString_regular$$+")"}}));
categoryManager.registerCategory(buildCategoryInformation({categoryID:categories.BaseType,categoryPrefix:"B",name:Ue.BASISTYP,nameEmpty:Ue.NICHT_TYPISIERT,elementID:"baseTypeSelect",filterComponents:[new GroupingComponent([categories.MorphologicType,categories.Concept],categories.Concept,!0,new Sorter([alphabetSorter,numRecSorter]),void 0,lingTags),new MarkingComponent(lingTagFunction)],countNames:[Ue.BELEG,Ue.BELEGE],textForNewComment:Ue.KOMMENTAR_BASIS_SCHREIBEN}));
var conceptSorterFunc=function $conceptSorterFunc$($mainCategoryId$$,$elementId$$,$subCategoryId$$,$filterId$$){return 1!=$filterId$$||$subCategoryId$$==categories.MorphologicType};
categoryManager.registerCategory(buildCategoryInformation({categoryID:categories.Concept,categoryPrefix:"C",name:Ue.KONZEPT,nameEmpty:Ue.KEIN_KONZEPT,elementID:"conceptSelect",filterComponents:[new ConceptFilterComponent,new GroupingComponent([categories.MorphologicType,categories.BaseType],categories.MorphologicType,!0,new Sorter([alphabetSorter,new LanguageFamilySortComponent,numRecSorter]),conceptSorterFunc,lingTags),new MarkingComponent(lingTagFunction)],countNames:[Ue.BELEG,Ue.BELEGE],textForNewComment:Ue.KOMMENTAR_KONZEPT_SCHREIBEN,
costumGetNameFunction:function($key$$){$key$$=$key$$.substring(1);return""==Concepts[$key$$][0]?Concepts[$key$$][1]:Concepts[$key$$][0]}}));
var elingTagFunction=function $elingTagFunction$($categoryID$$,$elementID$$){var $result$$={},$ak$$=optionManager.getOptionState("ak"),$tagObject$$=ELing[simplifyELingKey($elementID$$)][1];if($tagObject$$)for(var $key$$ in $tagObject$$)for(var $i$$=0;$i$$<$tagObject$$[$key$$].length;$i$$++)if($ak$$||"1"==$tagObject$$[$key$$][$i$$].ak)$result$$.hasOwnProperty($key$$)||($result$$[$key$$]=[]),$result$$[$key$$].push($tagObject$$[$key$$][$i$$].value);return $result$$},elingGroupFunction=function $elingGroupFunction$($categoryID$$,
$elementID$$){var $result$$=[],$ak$$=optionManager.getOptionState("ak"),$tagObject$$=ELing[simplifyELingKey($elementID$$)][1];if($tagObject$$)for(var $key$$ in $tagObject$$)for(var $i$$=0;$i$$<$tagObject$$[$key$$].length;$i$$++)if($ak$$||"1"==$tagObject$$[$key$$][$i$$].ak){$i$$=Ue[$key$$];$result$$.push({tag:$key$$,name:$i$$?$i$$:$key$$});break}return $result$$},elingTag=new TagComponent(elingTagFunction),elingGroupingE=new GroupingComponent([],void 0,!0,void 0,void 0,elingGroupFunction);
categoryManager.registerCategory(buildCategoryInformation({categoryID:categories.ExtraLing,categoryPrefix:"E",name:Ue.AUSSERSPR,nameEmpty:Ue.EMPTY,elementID:"extraLingSelect",filterComponents:[elingTag,elingGroupingE],textForNewComment:Ue.KOMMENTAR_AUSSERSPR_SCHREIBEN,costumGetNameFunction:function($key$$){return ELing[simplifyELingKey($key$$)][0]}}));
var elingGroupingP=new GroupingComponent(function($categoryID$$,$elementID$$){var $result$$=[];"1"!=ajax_object.va_staff||"A62"!=$elementID$$&&"A60"!=$elementID$$||($result$$.push(-4),"A62"==$elementID$$&&$result$$.push(-5));"63"!=simplifyELingKey($elementID$$)&&"17"!=simplifyELingKey($elementID$$)&&"74"!=simplifyELingKey($elementID$$)||$result$$.push(-1);return $result$$},function($categoryID$$,$elementID$$){if("63"==simplifyELingKey($elementID$$)||"17"==simplifyELingKey($elementID$$)||"74"==simplifyELingKey($elementID$$))return-1;
if("62"==simplifyELingKey($elementID$$)||"60"==simplifyELingKey($elementID$$))return"LAND"},!0,void 0,void 0,elingGroupFunction),polyEditConfig=new EditConfiguration;polyEditConfig.allowGeoDataChange(OverlayType.PointSymbol,function($elementID$$){return"A62"==$elementID$$});
categoryManager.registerCategory(buildCategoryInformation({categoryID:categories.Polygon,categoryPrefix:"A",name:Ue.POLYGONE,nameEmpty:Ue.EMPTY,elementID:"polygonSelect",filterComponents:[elingTag,elingGroupingP,new CenterPointFilterComponent],textForNewComment:Ue.KOMMENTAR_AUSSERSPR_SCHREIBEN,costumGetNameFunction:function($key$$){return ELing[simplifyELingKey($key$$)][0]},editConfiguration:polyEditConfig,singleSelect:!0,forbidRemovingFunction:function($key$$){return"phy"!==optionManager.getOptionState("polymode")},
lineWidth:function($key$$){return"phy"!==optionManager.getOptionState("polymode")?2:62==simplifyELingKey($key$$)?1:2}}));
categoryManager.registerCategory(buildCategoryInformation({categoryID:categories.Custom,categoryPrefix:"X",name:Ue.EIGENE_KATEGORIE,nameEmpty:Ue.EMPTY,elementID:void 0,filterComponents:[new SQL_Filter("Type_Kind = 'L' AND Type = 'Butter' AND Instance like 'p%'")],costumGetNameFunction:function($element$jscomp$68_key$$){return($element$jscomp$68_key$$=legend.getElementByKey(categories.Custom,$element$jscomp$68_key$$))&&$element$jscomp$68_key$$.filterData?$element$jscomp$68_key$$.filterData.query_name:
"SQL"}}));categoryManager.registerCategory(buildCategoryInformation({categoryID:categories.CustomSub,categoryPrefix:"Y",name:Ue.EIGENE_KATEGORIE,nameEmpty:Ue.EMPTY,elementID:void 0,costumGetNameFunction:function($key$$){return $key$$.substring(1)},subLegendNameFun:function($filterData$$){return $filterData$$.groupingName}}));for(var i=0;i<TagValues.length;i++)Ue[TagValues[i]]&&categoryManager.addTagTranslation(TagValues[i],Ue[TagValues[i]]);categoryManager.addTagTranslation("ERHEBUNG",Ue.ERHEBUNG);
var mapPosition={lat:46.059547,lng:11.13222,zoom:7,minZoom:6},clustererOptions={viewportLat:43.43132018706552,viewportLng:4.884734173789496,viewportHeight:4.93608093568811,viewportWidth:11.586466768725804,gridsizeLng:16,gridsizeLat:16,threshold:8.983152841195214E-4};
if(mapInterfaceType==MapInterfaceType.GoogleMaps){var GMData={mapTypeId:google.maps.MapTypeId.TERRAIN,fullscreenControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT},streetViewControl:!1,mapTypeControl:!1};jQuery(initMap(mapPosition,clustererOptions,GMData));jQuery.ajax({dataType:"json",url:ajax_object.plugin_url+"/im_config/map_styles/black_no_labels.json",success:function($data$$){mapInterface.addMapStyle("hex_quantify",$data$$)}});jQuery.ajax({dataType:"json",url:ajax_object.plugin_url+
"/im_config/map_styles/no_labels.json",success:function($data$$){mapInterface.addMapStyle("hex_normal",$data$$)}});jQuery(document).on("im_google_maps_style",function($event$$,$data$$){"phy"!=optionManager.getOptionState("polymode")&&($data$$.style="normal"==$data$$.style?"hex_normal":"hex_quantify")})}else mapInterfaceType==MapInterfaceType.PixiWebGL&&jQuery(initMap(mapPosition,clustererOptions,{}));function RecordInfoWindowContent($categoryID$jscomp$39_concepts_i$$,$elementID$$,$overlayType$$,$data$$){this.numRecords=1;this.record=$data$$.record;this.original=[$data$$.original];this.encoding=1*$data$$.encoding;$categoryID$jscomp$39_concepts_i$$=0==$data$$.concepts.length?!1:$data$$.concepts.slice(0);this.meaningLang=!1===$categoryID$jscomp$39_concepts_i$$?$data$$.meanings[0]:!1;!1===$categoryID$jscomp$39_concepts_i$$&&($categoryID$jscomp$39_concepts_i$$=this.meaningLang?$data$$.meanings[1]:
[""]);this.concepts=$categoryID$jscomp$39_concepts_i$$;this.sources=Array(this.concepts.length);this.sources[0]=$data$$.source;for($categoryID$jscomp$39_concepts_i$$=1;$categoryID$jscomp$39_concepts_i$$<this.concepts.length;$categoryID$jscomp$39_concepts_i$$++)this.sources[$categoryID$jscomp$39_concepts_i$$]="";this.typeTable=$data$$.typeTable;this.communityName=$data$$.community;this.geonamesID=$data$$.geonames;this.ex_id=$data$$.external_id;this.tooltipApis=[];this.getHtml=function $this$getHtml$($i$jscomp$131_index$$){var $result$$=
"<div>",$hashIndex$$=this.record.indexOf("###"),$conceptArray_conceptDescription_crecord_firstOriginal$$=-1==$hashIndex$$?this.record:this.record.substring(0,$hashIndex$$);4==this.encoding&&($conceptArray_conceptDescription_crecord_firstOriginal$$=escapeHtml($conceptArray_conceptDescription_crecord_firstOriginal$$));var $cid$$=this.geonamesID?"<a target='_BLANK' href='https://www.geonames.org/"+this.geonamesID+"'><img class='geonamesLogo' src='"+ajax_object.plugin_url+"/images/geonames-icon.svg' /></a>":
"";if("TYP"==$conceptArray_conceptDescription_crecord_firstOriginal$$.substring(1,4))$result$$+="<table style='width : 100%'><tr><td>"+Ue.KEIN_BELEG+"</td>";else{$result$$+="<table style='width : 100%'><tr><td><h1 class='singleRecord'>"+(-1==$hashIndex$$?$conceptArray_conceptDescription_crecord_firstOriginal$$:$conceptArray_conceptDescription_crecord_firstOriginal$$+"<font color='red'>*</font>")+"</h1><div style='display: none'>";$result$$=1==this.encoding?$result$$+("Darstellung: IPA "+Ue.QUELLE):
2==this.encoding?$result$$+"Darstellung: IPA VA":$result$$+("Darstellung: DST "+Ue.QUELLE);var $conceptName$$;$conceptArray_conceptDescription_crecord_firstOriginal$$=this.original[0];for(var $allIdentical_wdataLink$$=!0,$cdescr_emptyValues$$=!1,$j$$=0;$j$$<this.original.length;$j$$++){if(!this.original[$j$$]){$cdescr_emptyValues$$=!0;break}this.original[$j$$]!=$conceptArray_conceptDescription_crecord_firstOriginal$$&&($allIdentical_wdataLink$$=!1)}$cdescr_emptyValues$$||($conceptName$$=$allIdentical_wdataLink$$?
$conceptArray_conceptDescription_crecord_firstOriginal$$:this.original.join(" / "));3>this.encoding&&$conceptName$$&&($result$$+="<br /><br /><span>DST "+Ue.QUELLE+": </span><span class='originalRecord'>"+$conceptName$$+"</span>");$result$$+="<br /><br />VA-ID: "+this.ex_id;$result$$+="<br /><br /><a href='"+ajax_object.site_url+"?api=1&action=getRecord&id="+this.ex_id+"&version="+("xxx"==ajax_object.db?ajax_object.max_db:ajax_object.db)+"' target='_BLANK' style='margin: 5px;'><i class='list_export_icon fas fa-file-download' title='"+
Ue.API_LINK_RECORD+"'></i></a>";$result$$+="</div><span>("+Ue.EINZELBELEG+")</span></td>"}if(0==$i$jscomp$131_index$$||"hex"==optionManager.getOptionState("polymode"))$result$$+="<td><h2 class='community singleRecord'>"+this.communityName+$cid$$+"</h2></td>";$result$$=$result$$+"</tr></table><br /><br />"+(this.typeTable+"<br /><br /><table class='easy-table easy-table-default va_record_source_table'><tr><th>"+Ue.QUELLE+"</th><th>"+(this.meaningLang?Ue.BEDEUTUNG+" "+Ue.QUELLE+" ("+this.meaningLang+
")":Ue.KONZEPT)+"</th></tr>");for($i$jscomp$131_index$$=0;$i$jscomp$131_index$$<this.sources.length;$i$jscomp$131_index$$++)this.concepts[$i$jscomp$131_index$$].match(/^C[0-9]+$/)?($cid$$=this.concepts[$i$jscomp$131_index$$].substring(1),$conceptArray_conceptDescription_crecord_firstOriginal$$=Concepts[$cid$$],void 0!==$conceptArray_conceptDescription_crecord_firstOriginal$$?($conceptName$$=$conceptArray_conceptDescription_crecord_firstOriginal$$[0],$conceptArray_conceptDescription_crecord_firstOriginal$$=
$conceptArray_conceptDescription_crecord_firstOriginal$$[1]):($conceptName$$="",$conceptArray_conceptDescription_crecord_firstOriginal$$=Ue.KEIN_KONZEPT),$allIdentical_wdataLink$$="",QIDS[$cid$$]&&($allIdentical_wdataLink$$=" <a target='_BLANK' href='https://www.wikidata.org/wiki/Q"+QIDS[$cid$$]+"'>(Wikidata)</a>"),""!=$conceptName$$&&$conceptName$$!=$conceptArray_conceptDescription_crecord_firstOriginal$$?$cdescr_emptyValues$$=$conceptArray_conceptDescription_crecord_firstOriginal$$.replace("'",
"&apos;"):($cdescr_emptyValues$$="",$conceptName$$=$conceptArray_conceptDescription_crecord_firstOriginal$$),$result$$+="<tr><td class='atlasSource'>"+this.sources[$i$jscomp$131_index$$]+"</td><td><span class='currentRecordWindowConcept' data-id='"+$cid$$+"' data-concept-descr='"+$cdescr_emptyValues$$+"'>"+$conceptName$$+"</span>"+$allIdentical_wdataLink$$+"</td></tr>"):$result$$+="<tr><td class='atlasSource'>"+this.sources[$i$jscomp$131_index$$]+"</td><td>„"+this.concepts[$i$jscomp$131_index$$]+
"“</td></tr>";$result$$+="</table>";-1!=$hashIndex$$&&($result$$+="<br /><span class='fullRecordInfo'>* "+Ue.BELEG_TEIL+" <span>"+this.record.substring($hashIndex$$+3)+"</span></font>");return $result$$+"</div>"};this.tryMerge=function $this$tryMerge$($oldContent$$){if($oldContent$$ instanceof RecordInfoWindowContent&&$oldContent$$.record==this.record){for(var $j$$=0;$j$$<this.sources.length;$j$$++)$oldContent$$.sources.push(this.sources[$j$$]),$oldContent$$.concepts.push(this.concepts[$j$$]),$oldContent$$.original.push(this.original[0]);
$oldContent$$.numRecords++;return!0}return!1};this.onOpen=function $this$onOpen$($baseTypes_content$$){var $apis_capi_communities_concepts$$=jQuery($baseTypes_content$$).find(".currentRecordWindowConcept");$apis_capi_communities_concepts$$.qtip({content:{text:function(){var $res$$="";jQuery(this).data("concept-descr")&&($res$$+=jQuery(this).data("concept-descr")+"<br /><br />");$res$$+="VA-ID: C"+jQuery(this).data("id");$res$$+="<br /><br /><a href='"+ajax_object.site_url+"?api=1&action=getRecord&id=C"+
jQuery(this).data("id")+"&version="+("xxx"==ajax_object.db?ajax_object.max_db:ajax_object.db)+"' target='_BLANK' style='margin: 5px;'><i class='list_export_icon fas fa-file-download' title='"+Ue.API_LINK_CONCEPT+"'></i></a>";return $res$$+="<br /><br /><a href='"+ajax_object.lex_path+"#C"+jQuery(this).data("id")+"' target='_BLANK'>"+Ue.LEX_ALP_REF+"</a>"},title:{button:!0}},position:{my:"bottom left",at:"top left"},events:{render:function($event$$,$api$$){$api$$.elements.target.bind("click",function(){$api$$.set("hide.event",
!1)})},hide:function($event$$,$api$$){$api$$.set("hide.event","mouseleave")}}});$apis_capi_communities_concepts$$=$apis_capi_communities_concepts$$.qtip("api");null!=$apis_capi_communities_concepts$$&&this.tooltipApis.push($apis_capi_communities_concepts$$);$apis_capi_communities_concepts$$=jQuery($baseTypes_content$$).find(".singleRecord:not(.community)");$apis_capi_communities_concepts$$.each(function(){var $textElement$$=jQuery(this).next().clone();""!=$textElement$$.html()&&jQuery(this).qtip({content:{text:$textElement$$,
title:{button:!0}},position:{my:"top left",at:"bottom left"},style:{classes:"qtip-record"},events:{render:function($event$$,$api$$){$api$$.elements.target.bind("click",function(){$api$$.set("hide.event",!1)})},hide:function($event$$,$api$$){$api$$.set("hide.event","mouseleave")}}})});var $thisObject$$=this;$apis_capi_communities_concepts$$.each(function(){$thisObject$$.tooltipApis.push(jQuery(this).qtip("api"))});jQuery($baseTypes_content$$).find(".infoWindowTypeSelect").each(function(){jQuery(this).change(function(){jQuery(this).parent().parent().children().eq(1).html(jQuery(this).find("option:selected").data("tname"))})});
$apis_capi_communities_concepts$$=addBibLikeQTips(jQuery($baseTypes_content$$).find(".va_record_source_table"),["bibl","stimulus"],["blue","blue"],["","sti"]);for(var $i$43_i$44$$=0;$i$43_i$44$$<$apis_capi_communities_concepts$$.length;$i$43_i$44$$++)$thisObject$$.tooltipApis.push($apis_capi_communities_concepts$$[$i$43_i$44$$]);$apis_capi_communities_concepts$$=addBibLikeQTips(jQuery($baseTypes_content$$).find(".va_type_table"),["iso"],["light"],["ISO_"]);for($i$43_i$44$$=0;$i$43_i$44$$<$apis_capi_communities_concepts$$.length;$i$43_i$44$$++)$thisObject$$.tooltipApis.push($apis_capi_communities_concepts$$[$i$43_i$44$$]);
$apis_capi_communities_concepts$$=jQuery($baseTypes_content$$).find(".community");$apis_capi_communities_concepts$$.each(function(){jQuery(this).qtip({content:{text:function(){var $res$$="VA-ID: A"+$data$$.id_community;$data$$.comm_download&&($res$$+=$data$$.comm_download);return $res$$},title:{button:!0}},position:{my:"top left",at:"bottom left"},style:{classes:"qtip-record"},events:{render:function($event$$,$api$$){$api$$.elements.target.bind("click",function(){$api$$.set("hide.event",!1)})},hide:function($event$$,
$api$$){$api$$.set("hide.event","mouseleave")}}})});$apis_capi_communities_concepts$$.each(function(){$thisObject$$.tooltipApis.push(jQuery(this).qtip("api"))});$apis_capi_communities_concepts$$=jQuery($baseTypes_content$$).find(".va_lex_type");$apis_capi_communities_concepts$$.each(function(){jQuery(this).qtip({content:{text:function(){var $res$$="VA-ID: L"+jQuery(this).data("id");$res$$+="<br /><br /><a href='"+ajax_object.site_url+"?api=1&action=getRecord&id=L"+jQuery(this).data("id")+"&version="+
("xxx"==ajax_object.db?ajax_object.max_db:ajax_object.db)+"' target='_BLANK' style='margin: 5px;'><i class='list_export_icon fas fa-file-download' title='"+Ue.API_LINK_LEX+"'></i></a>";$res$$+="<br /><br /><a href='"+ajax_object.lex_path+"#L"+jQuery(this).data("id")+"' target='_BLANK'>"+Ue.LEX_ALP_REF+"</a>";var $lidString_lids$$=jQuery(this).data("lids")+"";if($lidString_lids$$){$res$$+="<br /><br />Wikidata: ";$lidString_lids$$=$lidString_lids$$.split(",");for(var $i$45$$=0;$i$45$$<$lidString_lids$$.length;$i$45$$++)0<
$i$45$$&&($res$$+=", "),$res$$+="<a target='_BLANK' href='https://www.wikidata.org/wiki/Lexeme:L"+$lidString_lids$$[$i$45$$]+"'>L"+$lidString_lids$$[$i$45$$]+"</a>"}return $res$$},title:{button:!0}},position:{my:"top left",at:"bottom left"},style:{classes:"qtip-record"},events:{render:function($event$$,$api$$){$api$$.elements.target.bind("click",function(){$api$$.set("hide.event",!1)})},hide:function($event$$,$api$$){$api$$.set("hide.event","mouseleave")}}})});$apis_capi_communities_concepts$$.each(function(){$thisObject$$.tooltipApis.push(jQuery(this).qtip("api"))});
$baseTypes_content$$=jQuery($baseTypes_content$$).find(".va_base_type");$baseTypes_content$$.each(function(){jQuery(this).qtip({content:{text:function(){var $res$$="VA-ID: B"+jQuery(this).data("id");$res$$+="<br /><br /><a href='"+ajax_object.site_url+"?api=1&action=getRecord&id=B"+jQuery(this).data("id")+"&version="+("xxx"==ajax_object.db?ajax_object.max_db:ajax_object.db)+"' target='_BLANK' style='margin: 5px;'><i class='list_export_icon fas fa-file-download' title='"+Ue.API_LINK_BASE+"'></i></a>";
return $res$$+="<br /><br /><a href='"+ajax_object.lex_path+"#B"+jQuery(this).data("id")+"' target='_BLANK'>"+Ue.LEX_ALP_REF+"</a>"},title:{button:!0}},position:{my:"top left",at:"bottom left"},style:{classes:"qtip-record"},events:{render:function($event$$,$api$$){$api$$.elements.target.bind("click",function(){$api$$.set("hide.event",!1)})},hide:function($event$$,$api$$){$api$$.set("hide.event","mouseleave")}}})});$baseTypes_content$$.each(function(){$thisObject$$.tooltipApis.push(jQuery(this).qtip("api"))})};
this.onClose=function $this$onClose$($content$jscomp$28_i$$){for($content$jscomp$28_i$$=0;$content$jscomp$28_i$$<this.tooltipApis.length;$content$jscomp$28_i$$++)this.tooltipApis[$content$jscomp$28_i$$]&&this.tooltipApis[$content$jscomp$28_i$$].destroy(!0)};this.getData=function $this$getData$(){return[]};this.getName=function $this$getName$(){return""};this.resetState=function $this$resetState$(){this.original=[$data$$.original];this.concepts=0==$data$$.concepts.length?[""]:$data$$.concepts.slice(0);
this.sources=Array(this.concepts.length);this.sources[0]=$data$$.source;for(var $i$$=1;$i$$<this.concepts.length;$i$$++)this.sources[$i$$]="";this.numRecords=1};this.getNumElements=function $this$getNumElements$(){return this.numRecords}};function InformantInfoWindowContent($categoryID$$,$elementID$$,$overlayType$$,$data$$){this.data=$data$$;this.apis=[];this.getHtml=function $this$getHtml$($index$jscomp$118_res$$){$index$jscomp$118_res$$="<h2>"+this.data.locationName+'</h2><br /><table class="informantDetails"><tr><td>'+Ue.INFORMANT_NUMMER+"</td><td>"+this.data.number+"</td></tr>";this.data.gender&&($index$jscomp$118_res$$+="<tr><td>"+Ue.GESCHLECHT+"</td><td>"+this.data.gender+"</td></tr>");this.data.age&&($index$jscomp$118_res$$+=
"<tr><td>"+Ue.ALTER+"</td><td>"+this.data.age+"</td></tr>");$index$jscomp$118_res$$+="</table>";this.data.description&&($index$jscomp$118_res$$+="<br /><div>"+this.data.description+"</div>");return $index$jscomp$118_res$$};this.tryMerge=function $this$tryMerge$($oldContent$$){return!1};this.onOpen=function $this$onOpen$($content$$){this.apis=addBiblioQTips(jQuery($content$$))};this.onClose=function $this$onClose$($content$jscomp$30_i$$){for($content$jscomp$30_i$$=0;$content$jscomp$30_i$$<this.apis.length;$content$jscomp$30_i$$++)this.apis[$content$jscomp$30_i$$]&&
this.apis[$content$jscomp$30_i$$].destroy(!0)};this.getData=function $this$getData$(){return[this.data]};this.getName=function $this$getName$(){return this.data.locationName};this.resetState=function $this$resetState$(){};this.getNumElements=function $this$getNumElements$(){return 1}};function SyntaxInfoWindowContent($categoryID$$,$elementID$$,$overlayType$$,$data$$){this.apis=[];this.original=$overlayType$$==OverlayType.Polygon?new PolygonInfoWindowContent($categoryID$$,$elementID$$,$overlayType$$,$data$$):new SimpleInfoWindowContent($categoryID$$,$elementID$$,$overlayType$$,$data$$);this.getHtml=function $this$getHtml$($index$$){return this.original.getHtml($index$$)};this.tryMerge=function $this$tryMerge$($oldContent$$){return this.original.tryMerge($oldContent$$)};this.onOpen=
function $this$onOpen$($tabContent$$,$tabIndex$$,$infoWindow$$,$overlay$$){this.original.onOpen($tabContent$$,$tabIndex$$,$infoWindow$$,$overlay$$);this.apis=addBiblioQTips(jQuery($tabContent$$))};this.onClose=function $this$onClose$($content$jscomp$31_i$$){this.original.onClose($content$jscomp$31_i$$);for($content$jscomp$31_i$$=0;$content$jscomp$31_i$$<this.apis.length;$content$jscomp$31_i$$++)this.apis[$content$jscomp$31_i$$]&&this.apis[$content$jscomp$31_i$$].destroy(!0)};this.getData=function $this$getData$(){return this.original.getData()};
this.getName=function $this$getName$(){return this.original.getName()};this.resetState=function $this$resetState$(){this.original.resetState()};this.getNumElements=function $this$getNumElements$(){return this.original.getNumElements()}};function ConceptFilterComponent(){this.storeData=function $this$storeData$($filterData$$,$element$$){var $ids$$=[],$elements$$=jQuery($element$$).children("div").jstree("get_selected");jQuery.each($elements$$,function(){$ids$$.push(jQuery("#"+this).data("concept"))});if(0==$ids$$.length)return!1;$filterData$$.conceptIds=$ids$$;jQuery($element$$).children("div").jstree("destroy");return!0};this.storeDefaultData=function $this$storeDefaultData$($filterData$$){$filterData$$.conceptIds="ALL"};this.getFilterScreenElement=
function $this$getFilterScreenElement$($categoryId$$,$elementId$$){var $result$$=document.createElement("div");$result$$.style["max-height"]="250pt";$result$$.style["overflow-y"]="auto";$result$$.style["margin-bottom"]="2em";var $h2_treeDiv$$=document.createElement("h2");$h2_treeDiv$$.appendChild(document.createTextNode(Ue.UNTERKONZEPTE_LISTE));$result$$.appendChild($h2_treeDiv$$);$h2_treeDiv$$=document.createElement("div");$h2_treeDiv$$.dataset.conceptId=$elementId$$.substring(1);$result$$.appendChild($h2_treeDiv$$);
return $result$$};this.setValues=function $this$setValues$($data$$,$element$$,$categoryId$$,$elementId$$){if("ALL"!=$data$$.conceptIds)jQuery($element$$).children("div").on("loaded.jstree",function(){jQuery(this).jstree("deselect_all");jQuery(this).jstree("open_all");for(var $i$46$$=0;$i$46$$<$data$$.conceptIds.length;$i$46$$++)jQuery(this).jstree("select_node",jQuery(this).find("[data-concept="+$data$$.conceptIds[$i$46$$]+"]"))})};this.afterAppending=function $this$afterAppending$($divElement$jscomp$1_element$$){$divElement$jscomp$1_element$$=
jQuery($divElement$jscomp$1_element$$).children("div");var $treeArray$$=createSubTreeJSON($divElement$jscomp$1_element$$.data("conceptId"));$divElement$jscomp$1_element$$.css("height",24*$treeArray$$.count+"px");$divElement$jscomp$1_element$$.jstree({core:{data:$treeArray$$.json,themes:{icons:!1}},plugins:["checkbox"],checkbox:{three_state:!1,visible:!0}})}}
function createSubTreeJSON($id_concept_result$$){for(var $conceptArray$$=Concepts[$id_concept_result$$],$count$$=0,$numChildren$$=$conceptArray$$[3].length,$children$$=[$numChildren$$],$i$jscomp$136_numRecords$$=0;$i$jscomp$136_numRecords$$<$numChildren$$;$i$jscomp$136_numRecords$$++){var $childResult$$=createSubTreeJSON($conceptArray$$[3][$i$jscomp$136_numRecords$$]);$children$$[$i$jscomp$136_numRecords$$]=$childResult$$.json;$count$$+=$childResult$$.count}$i$jscomp$136_numRecords$$=optionManager.getOptionState("ak")?
$conceptArray$$[2]:$conceptArray$$[5];$id_concept_result$$={text:getNodeText($conceptArray$$[0],$conceptArray$$[1],$i$jscomp$136_numRecords$$),state:{selected:!0},li_attr:{"data-concept":$id_concept_result$$}};0<$numChildren$$&&($id_concept_result$$.children=$children$$);return{json:$id_concept_result$$,count:$count$$+1}}
function getNodeText($name$$,$description$$,$count$$){return(""==$name$$||$name$$==$description$$?$description$$:$name$$+" ("+$description$$+")")+" ("+$count$$+" "+("1"==$count$$?Ue.BELEG:Ue.BELEGE)+")"};function SQL_Filter($defaultVal$$){this.defaultVal=$defaultVal$$;this.oldID=null;this.getFilterScreenElement=function $this$getFilterScreenElement$($categoryId$$,$elementId$$){var $div$$=document.createElement("div"),$groupNameField_nameField_text$$=document.createElement("input");$groupNameField_nameField_text$$.type="text";$groupNameField_nameField_text$$.autocomplete="off";$groupNameField_nameField_text$$.id="va_sql_name";$groupNameField_nameField_text$$.style["margin-left"]="5px";$div$$.appendChild(document.createTextNode(Ue.NAME));
$div$$.appendChild($groupNameField_nameField_text$$);$groupNameField_nameField_text$$=document.createElement("div");$groupNameField_nameField_text$$.style["margin-top"]="40px";$groupNameField_nameField_text$$.appendChild(document.createTextNode("WHERE"));var $groupField_headlineGroup_icon$jscomp$5_icon2_input$$=document.createElement("i");$groupField_headlineGroup_icon$jscomp$5_icon2_input$$.className="far fa-question-circle";$groupField_headlineGroup_icon$jscomp$5_icon2_input$$.id="va_sql_help";
$groupField_headlineGroup_icon$jscomp$5_icon2_input$$.style.marginLeft="10px";$groupNameField_nameField_text$$.appendChild($groupField_headlineGroup_icon$jscomp$5_icon2_input$$);$div$$.appendChild($groupNameField_nameField_text$$);$groupField_headlineGroup_icon$jscomp$5_icon2_input$$=document.createElement("textarea");$groupField_headlineGroup_icon$jscomp$5_icon2_input$$.style.width="500px";$groupField_headlineGroup_icon$jscomp$5_icon2_input$$.style.height="150px";$groupField_headlineGroup_icon$jscomp$5_icon2_input$$.style["margin-top"]=
"10px";$groupField_headlineGroup_icon$jscomp$5_icon2_input$$.style["margin-bottom"]="50px";$groupField_headlineGroup_icon$jscomp$5_icon2_input$$.id="va_sql_textarea";$groupField_headlineGroup_icon$jscomp$5_icon2_input$$.autocomplete="off";$groupField_headlineGroup_icon$jscomp$5_icon2_input$$.appendChild(document.createTextNode(this.defaultVal));$div$$.appendChild($groupField_headlineGroup_icon$jscomp$5_icon2_input$$);$groupField_headlineGroup_icon$jscomp$5_icon2_input$$=document.createElement("h1");
$groupField_headlineGroup_icon$jscomp$5_icon2_input$$.appendChild(document.createTextNode(Ue.GRUPPIERUNG+" ("+Ue.OPTIONAL+")"));$div$$.appendChild($groupField_headlineGroup_icon$jscomp$5_icon2_input$$);$groupField_headlineGroup_icon$jscomp$5_icon2_input$$=document.createElement("input");$groupField_headlineGroup_icon$jscomp$5_icon2_input$$.type="text";$groupField_headlineGroup_icon$jscomp$5_icon2_input$$.autocomplete="off";$groupField_headlineGroup_icon$jscomp$5_icon2_input$$.id="va_sql_group";$groupField_headlineGroup_icon$jscomp$5_icon2_input$$.style["margin-left"]=
"5px";$groupField_headlineGroup_icon$jscomp$5_icon2_input$$.style.width="80%";var $br$$=document.createElement("br");$div$$.appendChild($br$$);$div$$.appendChild(document.createTextNode("GROUP BY "));$div$$.appendChild($groupField_headlineGroup_icon$jscomp$5_icon2_input$$);$groupField_headlineGroup_icon$jscomp$5_icon2_input$$=document.createElement("i");$groupField_headlineGroup_icon$jscomp$5_icon2_input$$.className="far fa-question-circle";$groupField_headlineGroup_icon$jscomp$5_icon2_input$$.id=
"va_sql_group_help";$groupField_headlineGroup_icon$jscomp$5_icon2_input$$.style.marginLeft="10px";$groupNameField_nameField_text$$.appendChild($groupField_headlineGroup_icon$jscomp$5_icon2_input$$);$div$$.appendChild($groupField_headlineGroup_icon$jscomp$5_icon2_input$$);$div$$.appendChild(document.createTextNode(Ue.NAME+" "+Ue.GRUPPIERUNG));$groupNameField_nameField_text$$=document.createElement("input");$groupNameField_nameField_text$$.type="text";$groupNameField_nameField_text$$.autocomplete="off";
$groupNameField_nameField_text$$.id="va_sql_group_name";$groupNameField_nameField_text$$.style["margin-left"]="5px";$groupNameField_nameField_text$$.style["margin-top"]="10px";$div$$.appendChild($groupNameField_nameField_text$$);return $div$$};this.storeData=function $this$storeData$($data$$){$data$$.where=jQuery("#va_sql_textarea").val();$data$$.query_name=jQuery("#va_sql_name").val();$data$$.groupingSQL=jQuery("#va_sql_group").val();$data$$.groupingName=jQuery("#va_sql_group_name").val();$data$$.groupingSQL&&
($data$$.subElementCategory=categories.CustomSub);this.oldID?($data$$.id=this.oldID,this.oldID=null):$data$$.id="SQL"+this.getNextSQLId();return!0};this.storeDefaultData=function $this$storeDefaultData$($data$$,$categoryId$$,$elementId$$){$data$$.where=this.defaultVal;$data$$.id="SQL"+this.getNextSQLId()};this.setValues=function $this$setValues$($data$$,$element$$,$categoryId$$,$elementId$$){jQuery("#va_sql_textarea").val($data$$.where);jQuery("#va_sql_name").val($data$$.query_name);jQuery("#va_sql_group").val($data$$.groupingSQL);
jQuery("#va_sql_group_name").val($data$$.groupingName);this.oldID=$data$$.id};this.afterAppending=function $this$afterAppending$($element$$,$mainCategoryId$$,$elementId$$){addMouseOverHelpSingleElement(jQuery($element$$).find("#va_sql_help"),jQuery("#va_sql_help_div").html());addMouseOverHelpSingleElement(jQuery($element$$).find("#va_sql_group_help"),jQuery("#va_sql_group_help_div").html())};this.getNextSQLId=function $this$getNextSQLId$(){for(var $maxid$$=-1,$i$47$$=0;$i$47$$<legend.getLength();$i$47$$++){var $le$$=
legend.getElement($i$47$$);$le$$.filterData&&$le$$.filterData.where&&($le$$=1*$le$$.key.substring(3),$maxid$$=Math.max($maxid$$,$le$$))}return $maxid$$+1}};function CenterPointFilterComponent(){this.storeData=function $this$storeData$($filterData$$,$element$$){jQuery("#centerOption").is(":checked")&&($filterData$$.addCenterPoints="1");jQuery("#fragOption").is(":checked")&&($filterData$$.onlyMultipolygons="1");jQuery("#outsideOption").is(":checked")&&($filterData$$.centerOutsideContour="1");return!0};this.storeDefaultData=function $this$storeDefaultData$($filterData$$){};this.setValues=function $this$setValues$($data$$,$element$$,$categoryId$$,$elementId$$){$data$$.addCenterPoints&&
jQuery("#centerOption").prop("checked",!0);$data$$.onlyMultipolygons&&jQuery("#fragOption").prop("checked",!0);$data$$.centerOutsideContour&&jQuery("#outsideOption").prop("checked",!0)};this.getFilterScreenElement=function $this$getFilterScreenElement$($categoryId$$,$elementId$$){if($elementId$$.startsWith("A62")||$elementId$$.startsWith("A60")||$elementId$$.startsWith("A17")){var $result$$=document.createElement("div");$result$$.style["margin-top"]="5px";var $centerOption_fragOption_outsideOption$$=
document.createElement("input");$centerOption_fragOption_outsideOption$$.type="checkbox";$centerOption_fragOption_outsideOption$$.id="centerOption";$result$$.appendChild($centerOption_fragOption_outsideOption$$);$result$$.appendChild(document.createTextNode("Mittelpunkte anzeigen"));$result$$.appendChild(document.createElement("br"));$centerOption_fragOption_outsideOption$$=document.createElement("input");$centerOption_fragOption_outsideOption$$.type="checkbox";$centerOption_fragOption_outsideOption$$.id=
"fragOption";$result$$.appendChild($centerOption_fragOption_outsideOption$$);$result$$.appendChild(document.createTextNode("Nur Gemeinden aus mehreren Teilen anzeigen"));$result$$.appendChild(document.createElement("br"));$centerOption_fragOption_outsideOption$$=document.createElement("input");$centerOption_fragOption_outsideOption$$.type="checkbox";$centerOption_fragOption_outsideOption$$.id="outsideOption";$result$$.appendChild($centerOption_fragOption_outsideOption$$);$result$$.appendChild(document.createTextNode("Nur Gemeinden mit Mittelpunkt außerhalb des Gemeindegebiets anzeigen"));
$result$$.appendChild(document.createElement("br"));return $result$$}return null};this.afterAppending=function $this$afterAppending$($element$$){}};function TypeGenderFilterComponent(){this.getFilterScreenElement=function $this$getFilterScreenElement$($categoryId$$,$elementId$$){var $idList$$=$elementId$$.substring(1).split("+");if(2>$idList$$.length)return null;var $result$$=document.createElement("div");$result$$.className="filterComponent";$result$$.id="typeGenderComponent";$result$$.dataset.prefix=$elementId$$[0];var $caption$jscomp$1_i$$=document.createElement("h2");$caption$jscomp$1_i$$.appendChild(document.createTextNode(Ue.GENUS));$result$$.appendChild($caption$jscomp$1_i$$);
for($caption$jscomp$1_i$$=0;$caption$jscomp$1_i$$<$idList$$.length;$caption$jscomp$1_i$$++)if(optionManager.getOptionState("ak")||"1"==TypeOccs["L"+$idList$$[$caption$jscomp$1_i$$]]){var $gender$$=TypeGenders[$idList$$[$caption$jscomp$1_i$$]],$input$$=document.createElement("input");$input$$.type="checkbox";$input$$.checked="checked";$input$$.className="typeGenderCheckbox";$input$$.dataset.id=$idList$$[$caption$jscomp$1_i$$];$input$$.style["margin-right"]="5px";$result$$.appendChild($input$$);$result$$.appendChild(document.createTextNode(Ue["GENUS_"+
$gender$$.toUpperCase()]));$result$$.appendChild(document.createElement("br"))}return $result$$};this.storeData=function $this$storeData$($data$$){var $usedGenders$$=jQuery("#typeGenderComponent .typeGenderCheckbox:checked");if(0==$usedGenders$$.length)return!1;var $newIds$$=[];$usedGenders$$.each(function(){$newIds$$.push(jQuery(this).data("id"))});$data$$.id=jQuery("#typeGenderComponent").data("prefix")+$newIds$$.join("+");return $data$$.adjustSubElementSymbols=!0};this.storeDefaultData=function $this$storeDefaultData$($data$$,
$categoryId$$,$elementId$$){$data$$.adjustSubElementSymbols=!0};this.setValues=function $this$setValues$($data$$,$element$$,$categoryId$$,$elementId$$){};this.afterAppending=function $this$afterAppending$($element$$,$mainCategoryId$$,$elementId$$){}};function LanguageFamilySortComponent(){this.initFields=function $this$initFields$($keyArray$$,$data$jscomp$157_i$$,$indexLang_name$jscomp$88_subElementCategory$$){this.nameMapping=Sorter.createNameMapping($keyArray$$,$indexLang_name$jscomp$88_subElementCategory$$);this.langFamMapping={};switch(1*this.sortOrder){case 0:var $charToInt$$={g:0,r:1,s:2};break;case 1:$charToInt$$={g:0,s:1,r:2};break;case 2:$charToInt$$={r:0,g:1,s:2};break;case 3:$charToInt$$={r:0,s:1,g:2};break;case 4:$charToInt$$={s:0,
g:1,r:2};break;case 5:$charToInt$$={s:0,r:1,g:2}}for($data$jscomp$157_i$$=0;$data$jscomp$157_i$$<$keyArray$$.length;$data$jscomp$157_i$$++){$indexLang_name$jscomp$88_subElementCategory$$=this.nameMapping[$keyArray$$[$data$jscomp$157_i$$]];var $pos$$=$indexLang_name$jscomp$88_subElementCategory$$.indexOf("(");-1==$pos$$&&(this.langFamMapping[$keyArray$$[$data$jscomp$157_i$$]]=3);$indexLang_name$jscomp$88_subElementCategory$$=$charToInt$$[$indexLang_name$jscomp$88_subElementCategory$$.substring($pos$$+
1,$pos$$+2)];this.langFamMapping[$keyArray$$[$data$jscomp$157_i$$]]=void 0==$indexLang_name$jscomp$88_subElementCategory$$?3:$indexLang_name$jscomp$88_subElementCategory$$}};this.compareFunction=function $this$compareFunction$($a$$,$b$$){return-1==$a$$?-1:-1==$b$$?1:this.langFamMapping[$a$$]==this.langFamMapping[$b$$]?this.nameMapping[$a$$].localeCompare(this.nameMapping[$b$$]):this.langFamMapping[$a$$]-this.langFamMapping[$b$$]};this.getName=function $this$getName$(){return Ue.NACH_SPRACHFAMILIEN};
this.getNumSortOrders=function $this$getNumSortOrders$(){return 6};this.getSortOrderName=function $this$getSortOrderName$($index$$){switch($index$$){case 0:return"ger,rom,sla";case 1:return"ger,sla,rom";case 2:return"rom,ger,sla";case 3:return"rom,sla,ger";case 4:return"sla,ger,rom";default:return"sla,rom,ger"}};this.getDefaultSortOrder=function $this$getDefaultSortOrder$(){return 0}};function HexagonOption(){this.appendHtmlElements=function $this$appendHtmlElements$($parent$$){};this.setEnabled=function $this$setEnabled$($val$$){$val$$?jQuery(".mode_switch_label").removeClass("disabled"):jQuery(".mode_switch_label").addClass("disabled")};this.applyState=function $this$applyState$($val$$,$details$$){if(!$details$$||!0!==$details$$.first){symbolClusterer.checkQuantify();this.setHexMenus("phy"!==$val$$);"phy"!==$val$$?(categoryManager.addAjaxData("hexgrid",$val$$),optionManager.setOption("ak",
"false",{first:!0})):categoryManager.removeAjaxData("hexgrid");$details$$&&void 0!==$details$$.load&&categoryManager.loadData(6,$details$$.load,"costum");for(var $i$$=0;$i$$<legend.getLength();$i$$++)if(legend.getElement($i$$).category==categories.Polygon&&legend.getElement($i$$).filterData){delete legend.getElement($i$$).filterData.removed;break}optionManager.enableOptions(!1);legend.reloadOverlays(function(){optionManager.enableOptions(!0);"phy"==$val$$?(jQuery("#phy_label").addClass("active"),
jQuery("#hex_label").removeClass("active"),jQuery("#hex_label").removeClass("focus"),jQuery("#phy_label").children().first().prop("checked",!0),jQuery("#hex_label").children().first().prop("checked",!1)):(jQuery("#phy_label").removeClass("active"),jQuery("#hex_label").addClass("active"),jQuery("#phy_label").removeClass("focus"),jQuery("#phy_label").children().first().prop("checked",!1),jQuery("#hex_label").children().first().prop("checked",!0))})}};this.setKey=function $this$setKey$($key$$){this.key=
$key$$};this.getDefaultValue=function $this$getDefaultValue$(){return"phy"};this.setHexMenus=function $this$setHexMenus$($isHex$$){$isHex$$?(jQuery("#polygonSelect").chosen("destroy"),jQuery("#polygonSelect").toggle(!1),jQuery("#hexagonSelect").chosen(chosenSettings),categoryManager.setElementID(categories.Polygon,"hexagonSelect")):(jQuery("#hexagonSelect").chosen("destroy"),jQuery("#hexagonSelect").toggle(!1),jQuery("#polygonSelect").chosen(chosenSettings),categoryManager.setElementID(categories.Polygon,
"polygonSelect"))};this.isSaved=function $this$isSaved$(){return!0}};window.categoryManager=categoryManager;categoryManager.produceMapURL=categoryManager.produceMapURL;